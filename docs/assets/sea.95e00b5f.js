import{m as dh,n as ph,o as mh,f as vh}from"./index.2f68069d.js";var Os={exports:{}},Ya;function yh(){if(Ya)return Os.exports;Ya=1,Os.exports=F,Os.exports.default=F;function F(O,q,I){I=I||2;var Y=q&&q.length,U=Y?q[0]*I:O.length,W=M(O,0,U,I,!0),J=[];if(!W||W.next===W.prev)return J;var tt,rt,Z,Nt,ct,It,Ht;if(Y&&(W=m(O,q,W,I)),O.length>80*I){tt=Z=O[0],rt=Nt=O[1];for(var Ot=I;Ot<U;Ot+=I)ct=O[Ot],It=O[Ot+1],ct<tt&&(tt=ct),It<rt&&(rt=It),ct>Z&&(Z=ct),It>Nt&&(Nt=It);Ht=Math.max(Z-tt,Nt-rt),Ht=Ht!==0?32767/Ht:0}return a(W,J,I,tt,rt,Ht,0),J}function M(O,q,I,Y,U){var W,J;if(U===dt(O,q,I,Y)>0)for(W=q;W<I;W+=Y)J=f(W,O[W],O[W+1],J);else for(W=I-Y;W>=q;W-=Y)J=f(W,O[W],O[W+1],J);return J&&N(J,J.next)&&(K(J),J=J.next),J}function p(O,q){if(!O)return O;q||(q=O);var I=O,Y;do if(Y=!1,!I.steiner&&(N(I,I.next)||E(I.prev,I,I.next)===0)){if(K(I),I=q=I.prev,I===I.next)break;Y=!0}else I=I.next;while(Y||I!==q);return q}function a(O,q,I,Y,U,W,J){if(!!O){!J&&W&&_(O,Y,U,W);for(var tt=O,rt,Z;O.prev!==O.next;){if(rt=O.prev,Z=O.next,W?h(O,Y,U,W):d(O)){q.push(rt.i/I|0),q.push(O.i/I|0),q.push(Z.i/I|0),K(O),O=Z.next,tt=Z.next;continue}if(O=Z,O===tt){J?J===1?(O=c(p(O),q,I),a(O,q,I,Y,U,W,2)):J===2&&g(O,q,I,Y,U,W):a(p(O),q,I,Y,U,W,1);break}}}}function d(O){var q=O.prev,I=O,Y=O.next;if(E(q,I,Y)>=0)return!1;for(var U=q.x,W=I.x,J=Y.x,tt=q.y,rt=I.y,Z=Y.y,Nt=U<W?U<J?U:J:W<J?W:J,ct=tt<rt?tt<Z?tt:Z:rt<Z?rt:Z,It=U>W?U>J?U:J:W>J?W:J,Ht=tt>rt?tt>Z?tt:Z:rt>Z?rt:Z,Ot=Y.next;Ot!==q;){if(Ot.x>=Nt&&Ot.x<=It&&Ot.y>=ct&&Ot.y<=Ht&&X(U,tt,W,rt,J,Z,Ot.x,Ot.y)&&E(Ot.prev,Ot,Ot.next)>=0)return!1;Ot=Ot.next}return!0}function h(O,q,I,Y){var U=O.prev,W=O,J=O.next;if(E(U,W,J)>=0)return!1;for(var tt=U.x,rt=W.x,Z=J.x,Nt=U.y,ct=W.y,It=J.y,Ht=tt<rt?tt<Z?tt:Z:rt<Z?rt:Z,Ot=Nt<ct?Nt<It?Nt:It:ct<It?ct:It,$e=tt>rt?tt>Z?tt:Z:rt>Z?rt:Z,ot=Nt>ct?Nt>It?Nt:It:ct>It?ct:It,ar=v(Ht,Ot,q,I,Y),ur=v($e,ot,q,I,Y),vt=O.prevZ,Rt=O.nextZ;vt&&vt.z>=ar&&Rt&&Rt.z<=ur;){if(vt.x>=Ht&&vt.x<=$e&&vt.y>=Ot&&vt.y<=ot&&vt!==U&&vt!==J&&X(tt,Nt,rt,ct,Z,It,vt.x,vt.y)&&E(vt.prev,vt,vt.next)>=0||(vt=vt.prevZ,Rt.x>=Ht&&Rt.x<=$e&&Rt.y>=Ot&&Rt.y<=ot&&Rt!==U&&Rt!==J&&X(tt,Nt,rt,ct,Z,It,Rt.x,Rt.y)&&E(Rt.prev,Rt,Rt.next)>=0))return!1;Rt=Rt.nextZ}for(;vt&&vt.z>=ar;){if(vt.x>=Ht&&vt.x<=$e&&vt.y>=Ot&&vt.y<=ot&&vt!==U&&vt!==J&&X(tt,Nt,rt,ct,Z,It,vt.x,vt.y)&&E(vt.prev,vt,vt.next)>=0)return!1;vt=vt.prevZ}for(;Rt&&Rt.z<=ur;){if(Rt.x>=Ht&&Rt.x<=$e&&Rt.y>=Ot&&Rt.y<=ot&&Rt!==U&&Rt!==J&&X(tt,Nt,rt,ct,Z,It,Rt.x,Rt.y)&&E(Rt.prev,Rt,Rt.next)>=0)return!1;Rt=Rt.nextZ}return!0}function c(O,q,I){var Y=O;do{var U=Y.prev,W=Y.next.next;!N(U,W)&&R(U,Y,Y.next,W)&&D(U,W)&&D(W,U)&&(q.push(U.i/I|0),q.push(Y.i/I|0),q.push(W.i/I|0),K(Y),K(Y.next),Y=O=W),Y=Y.next}while(Y!==O);return p(Y)}function g(O,q,I,Y,U,W){var J=O;do{for(var tt=J.next.next;tt!==J.prev;){if(J.i!==tt.i&&b(J,tt)){var rt=G(J,tt);J=p(J,J.next),rt=p(rt,rt.next),a(J,q,I,Y,U,W,0),a(rt,q,I,Y,U,W,0);return}tt=tt.next}J=J.next}while(J!==O)}function m(O,q,I,Y){var U=[],W,J,tt,rt,Z;for(W=0,J=q.length;W<J;W++)tt=q[W]*Y,rt=W<J-1?q[W+1]*Y:O.length,Z=M(O,tt,rt,Y,!1),Z===Z.next&&(Z.steiner=!0),U.push(H(Z));for(U.sort(S),W=0;W<U.length;W++)I=y(U[W],I);return I}function S(O,q){return O.x-q.x}function y(O,q){var I=L(O,q);if(!I)return q;var Y=G(I,O);return p(Y,Y.next),p(I,I.next)}function L(O,q){var I=q,Y=O.x,U=O.y,W=-1/0,J;do{if(U<=I.y&&U>=I.next.y&&I.next.y!==I.y){var tt=I.x+(U-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(tt<=Y&&tt>W&&(W=tt,J=I.x<I.next.x?I:I.next,tt===Y))return J}I=I.next}while(I!==q);if(!J)return null;var rt=J,Z=J.x,Nt=J.y,ct=1/0,It;I=J;do Y>=I.x&&I.x>=Z&&Y!==I.x&&X(U<Nt?Y:W,U,Z,Nt,U<Nt?W:Y,U,I.x,I.y)&&(It=Math.abs(U-I.y)/(Y-I.x),D(I,O)&&(It<ct||It===ct&&(I.x>J.x||I.x===J.x&&C(J,I)))&&(J=I,ct=It)),I=I.next;while(I!==rt);return J}function C(O,q){return E(O.prev,O,q.prev)<0&&E(q.next,O,O.next)<0}function _(O,q,I,Y){var U=O;do U.z===0&&(U.z=v(U.x,U.y,q,I,Y)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==O);U.prevZ.nextZ=null,U.prevZ=null,T(U)}function T(O){var q,I,Y,U,W,J,tt,rt,Z=1;do{for(I=O,O=null,W=null,J=0;I;){for(J++,Y=I,tt=0,q=0;q<Z&&(tt++,Y=Y.nextZ,!!Y);q++);for(rt=Z;tt>0||rt>0&&Y;)tt!==0&&(rt===0||!Y||I.z<=Y.z)?(U=I,I=I.nextZ,tt--):(U=Y,Y=Y.nextZ,rt--),W?W.nextZ=U:O=U,U.prevZ=W,W=U;I=Y}W.nextZ=null,Z*=2}while(J>1);return O}function v(O,q,I,Y,U){return O=(O-I)*U|0,q=(q-Y)*U|0,O=(O|O<<8)&16711935,O=(O|O<<4)&252645135,O=(O|O<<2)&858993459,O=(O|O<<1)&1431655765,q=(q|q<<8)&16711935,q=(q|q<<4)&252645135,q=(q|q<<2)&858993459,q=(q|q<<1)&1431655765,O|q<<1}function H(O){var q=O,I=O;do(q.x<I.x||q.x===I.x&&q.y<I.y)&&(I=q),q=q.next;while(q!==O);return I}function X(O,q,I,Y,U,W,J,tt){return(U-J)*(q-tt)>=(O-J)*(W-tt)&&(O-J)*(Y-tt)>=(I-J)*(q-tt)&&(I-J)*(W-tt)>=(U-J)*(Y-tt)}function b(O,q){return O.next.i!==q.i&&O.prev.i!==q.i&&!A(O,q)&&(D(O,q)&&D(q,O)&&V(O,q)&&(E(O.prev,O,q.prev)||E(O,q.prev,q))||N(O,q)&&E(O.prev,O,O.next)>0&&E(q.prev,q,q.next)>0)}function E(O,q,I){return(q.y-O.y)*(I.x-q.x)-(q.x-O.x)*(I.y-q.y)}function N(O,q){return O.x===q.x&&O.y===q.y}function R(O,q,I,Y){var U=w(E(O,q,I)),W=w(E(O,q,Y)),J=w(E(I,Y,O)),tt=w(E(I,Y,q));return!!(U!==W&&J!==tt||U===0&&B(O,I,q)||W===0&&B(O,Y,q)||J===0&&B(I,O,Y)||tt===0&&B(I,q,Y))}function B(O,q,I){return q.x<=Math.max(O.x,I.x)&&q.x>=Math.min(O.x,I.x)&&q.y<=Math.max(O.y,I.y)&&q.y>=Math.min(O.y,I.y)}function w(O){return O>0?1:O<0?-1:0}function A(O,q){var I=O;do{if(I.i!==O.i&&I.next.i!==O.i&&I.i!==q.i&&I.next.i!==q.i&&R(I,I.next,O,q))return!0;I=I.next}while(I!==O);return!1}function D(O,q){return E(O.prev,O,O.next)<0?E(O,q,O.next)>=0&&E(O,O.prev,q)>=0:E(O,q,O.prev)<0||E(O,O.next,q)<0}function V(O,q){var I=O,Y=!1,U=(O.x+q.x)/2,W=(O.y+q.y)/2;do I.y>W!=I.next.y>W&&I.next.y!==I.y&&U<(I.next.x-I.x)*(W-I.y)/(I.next.y-I.y)+I.x&&(Y=!Y),I=I.next;while(I!==O);return Y}function G(O,q){var I=new st(O.i,O.x,O.y),Y=new st(q.i,q.x,q.y),U=O.next,W=q.prev;return O.next=q,q.prev=O,I.next=U,U.prev=I,Y.next=I,I.prev=Y,W.next=Y,Y.prev=W,Y}function f(O,q,I,Y){var U=new st(O,q,I);return Y?(U.next=Y.next,U.prev=Y,Y.next.prev=U,Y.next=U):(U.prev=U,U.next=U),U}function K(O){O.next.prev=O.prev,O.prev.next=O.next,O.prevZ&&(O.prevZ.nextZ=O.nextZ),O.nextZ&&(O.nextZ.prevZ=O.prevZ)}function st(O,q,I){this.i=O,this.x=q,this.y=I,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}F.deviation=function(O,q,I,Y){var U=q&&q.length,W=U?q[0]*I:O.length,J=Math.abs(dt(O,0,W,I));if(U)for(var tt=0,rt=q.length;tt<rt;tt++){var Z=q[tt]*I,Nt=tt<rt-1?q[tt+1]*I:O.length;J-=Math.abs(dt(O,Z,Nt,I))}var ct=0;for(tt=0;tt<Y.length;tt+=3){var It=Y[tt]*I,Ht=Y[tt+1]*I,Ot=Y[tt+2]*I;ct+=Math.abs((O[It]-O[Ot])*(O[Ht+1]-O[It+1])-(O[It]-O[Ht])*(O[Ot+1]-O[It+1]))}return J===0&&ct===0?0:Math.abs((ct-J)/J)};function dt(O,q,I,Y){for(var U=0,W=q,J=I-Y;W<I;W+=Y)U+=(O[J]-O[W])*(O[W+1]+O[J+1]),J=W;return U}return F.flatten=function(O){for(var q=O[0][0].length,I={vertices:[],holes:[],dimensions:q},Y=0,U=0;U<O.length;U++){for(var W=0;W<O[U].length;W++)for(var J=0;J<q;J++)I.vertices.push(O[U][W][J]);U>0&&(Y+=O[U-1].length,I.holes.push(Y))}return I},Os.exports}var ke={exports:{}},Re={},Ha;function Lt(){if(Ha)return Re;Ha=1;function F(p,a){return{type:"Feature",properties:a||{},geometry:p}}Re.feature=F,Re.point=function(p,a){if(!Array.isArray(p))throw new Error("Coordinates must be an array");if(p.length<2)throw new Error("Coordinates must be at least 2 numbers long");return F({type:"Point",coordinates:p.slice()},a)},Re.polygon=function(p,a){if(!p)throw new Error("No coordinates passed");for(var d=0;d<p.length;d++){var h=p[d];if(h.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var c=0;c<h[h.length-1].length;c++)if(h[h.length-1][c]!==h[0][c])throw new Error("First and last Position are not equivalent.")}return F({type:"Polygon",coordinates:p},a)},Re.lineString=function(p,a){if(!p)throw new Error("No coordinates passed");return F({type:"LineString",coordinates:p},a)},Re.featureCollection=function(p){return{type:"FeatureCollection",features:p}},Re.multiLineString=function(p,a){if(!p)throw new Error("No coordinates passed");return F({type:"MultiLineString",coordinates:p},a)},Re.multiPoint=function(p,a){if(!p)throw new Error("No coordinates passed");return F({type:"MultiPoint",coordinates:p},a)},Re.multiPolygon=function(p,a){if(!p)throw new Error("No coordinates passed");return F({type:"MultiPolygon",coordinates:p},a)},Re.geometryCollection=function(p,a){return F({type:"GeometryCollection",geometries:p},a)};var M={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373};return Re.radiansToDistance=function(p,a){var d=M[a||"kilometers"];if(d===void 0)throw new Error("Invalid unit");return p*d},Re.distanceToRadians=function(p,a){var d=M[a||"kilometers"];if(d===void 0)throw new Error("Invalid unit");return p/d},Re.distanceToDegrees=function(p,a){var d=M[a||"kilometers"];if(d===void 0)throw new Error("Invalid unit");return p/d*57.2958},Re}var Lo,Wa;function Aa(){if(Wa)return Lo;Wa=1;var F=Lt().polygon,M=Lt().featureCollection;Lo=function(c,g){return M(h(c.features.map(function(m){var S={x:m.geometry.coordinates[0],y:m.geometry.coordinates[1]};return g&&(S.z=m.properties[g]),S})).map(function(m){return F([[[m.a.x,m.a.y],[m.b.x,m.b.y],[m.c.x,m.c.y],[m.a.x,m.a.y]]],{a:m.a.z,b:m.b.z,c:m.c.z})}))};function p(c,g,m){this.a=c,this.b=g,this.c=m;var S=g.x-c.x,y=g.y-c.y,L=m.x-c.x,C=m.y-c.y,_=S*(c.x+g.x)+y*(c.y+g.y),T=L*(c.x+m.x)+C*(c.y+m.y),v=2*(S*(m.y-g.y)-y*(m.x-g.x)),H,X,b,E;Math.abs(v)<1e-6?(H=Math.min(c.x,g.x,m.x),X=Math.min(c.y,g.y,m.y),b=(Math.max(c.x,g.x,m.x)-H)*.5,E=(Math.max(c.y,g.y,m.y)-X)*.5,this.x=H+b,this.y=X+E,this.r=b*b+E*E):(this.x=(C*_-y*T)/v,this.y=(S*T-L*_)/v,b=this.x-c.x,E=this.y-c.y,this.r=b*b+E*E)}function a(c,g){return g.x-c.x}function d(c){var g=c.length,m,S,y,L,C;t:for(;g;)for(S=c[--g],m=c[--g],y=g;y;)if(C=c[--y],L=c[--y],m===L&&S===C||m===C&&S===L){c.splice(g,2),c.splice(y,2),g-=2;continue t}}function h(c){if(c.length<3)return[];c.sort(a);for(var g=c.length-1,m=c[g].x,S=c[0].x,y=c[g].y,L=y;g--;)c[g].y<y&&(y=c[g].y),c[g].y>L&&(L=c[g].y);var C=S-m,_=L-y,T=C>_?C:_,v=(S+m)*.5,H=(L+y)*.5,X=[new p({x:v-20*T,y:H-T,__sentinel:!0},{x:v,y:H+20*T,__sentinel:!0},{x:v+20*T,y:H-T,__sentinel:!0})],b=[],E=[],N,R,B;for(g=c.length;g--;){for(E.length=0,N=X.length;N--;){if(C=c[g].x-X[N].x,C>0&&C*C>X[N].r){b.push(X[N]),X.splice(N,1);continue}_=c[g].y-X[N].y,!(C*C+_*_>X[N].r)&&(E.push(X[N].a,X[N].b,X[N].b,X[N].c,X[N].c,X[N].a),X.splice(N,1))}for(d(E),N=E.length;N;)B=E[--N],R=E[--N],X.push(new p(R,B,c[g]))}for(Array.prototype.push.apply(b,X),g=b.length;g--;)(b[g].a.__sentinel||b[g].b.__sentinel||b[g].c.__sentinel)&&b.splice(g,1);return b}return Lo}var Mr={},Za;function bs(){if(Za)return Mr;Za=1;function F(d){if(Array.isArray(d)&&typeof d[0]=="number"&&typeof d[1]=="number")return d;if(d){if(d.type==="Feature"&&d.geometry&&d.geometry.type==="Point"&&Array.isArray(d.geometry.coordinates))return d.geometry.coordinates;if(d.type==="Point"&&Array.isArray(d.coordinates))return d.coordinates}throw new Error("A coordinate, feature, or point geometry is required")}function M(d,h,c){if(!h||!c)throw new Error("type and name required");if(!d||d.type!==h)throw new Error("Invalid input to "+c+": must be a "+h+", given "+d.type)}function p(d,h,c){if(!c)throw new Error(".featureOf() requires a name");if(!d||d.type!=="Feature"||!d.geometry)throw new Error("Invalid input to "+c+", Feature with geometry required");if(!d.geometry||d.geometry.type!==h)throw new Error("Invalid input to "+c+": must be a "+h+", given "+d.geometry.type)}function a(d,h,c){if(!c)throw new Error(".collectionOf() requires a name");if(!d||d.type!=="FeatureCollection")throw new Error("Invalid input to "+c+", FeatureCollection required");for(var g=0;g<d.features.length;g++){var m=d.features[g];if(!m||m.type!=="Feature"||!m.geometry)throw new Error("Invalid input to "+c+", Feature with geometry required");if(!m.geometry||m.geometry.type!==h)throw new Error("Invalid input to "+c+": must be a "+h+", given "+m.geometry.type)}}return Mr.geojsonType=M,Mr.collectionOf=a,Mr.featureOf=p,Mr.getCoord=F,Mr}var Ro,Ja;function br(){if(Ja)return Ro;Ja=1;var F=bs();Ro=function(a,d){var h=F.getCoord(a),c=d.geometry.coordinates;d.geometry.type==="Polygon"&&(c=[c]);for(var g=0,m=!1;g<c.length&&!m;g++)if(M(h,c[g][0])){for(var S=!1,y=1;y<c[g].length&&!S;)M(h,c[g][y])&&(S=!0),y++;S||(m=!0)}return m};function M(p,a){for(var d=!1,h=0,c=a.length-1;h<a.length;c=h++){var g=a[h][0],m=a[h][1],S=a[c][0],y=a[c][1],L=m>p[1]!=y>p[1]&&p[0]<(S-g)*(p[1]-m)/(y-m)+g;L&&(d=!d)}return d}return Ro}var To,Ka;function xh(){if(Ka)return To;Ka=1;var F=Array.isArray||function(M){return Object.prototype.toString.call(M)==="[object Array]"};return To=function(M,p){if(!F(M))throw new Error("Coordinates must be an array");if(M.length<2)throw new Error("Coordinates must be at least 2 numbers long");return{type:"Feature",geometry:{type:"Point",coordinates:M},properties:p||{}}},To}var Po,ja;function Eh(){if(ja)return Po;ja=1;var F=xh();return Po=function(M,p){var a=M[0],d=M[1],h=M[2];M[3];for(var c=(h-a)/p,g={type:"FeatureCollection",features:[]},m=0;m<=p;m++)for(var S=0;S<=p;S++)g.features.push(F([m*c+a,S*c+d]));return g},Po}var Vn={},Qa;function Dr(){if(Qa)return Vn;Qa=1;function F(c,g,m){var S,y,L,C,_,T,v,H,X,b=0,E,N=c.type==="FeatureCollection",R=c.type==="Feature",B=N?c.features.length:1;for(S=0;S<B;S++)for(X=N?c.features[S].geometry:R?c.geometry:c,E=X.type==="GeometryCollection",v=E?X.geometries.length:1,C=0;C<v;C++)if(T=E?X.geometries[C]:X,H=T.coordinates,b=m&&(T.type==="Polygon"||T.type==="MultiPolygon")?1:0,T.type==="Point")g(H);else if(T.type==="LineString"||T.type==="MultiPoint")for(y=0;y<H.length;y++)g(H[y]);else if(T.type==="Polygon"||T.type==="MultiLineString")for(y=0;y<H.length;y++)for(L=0;L<H[y].length-b;L++)g(H[y][L]);else if(T.type==="MultiPolygon")for(y=0;y<H.length;y++)for(L=0;L<H[y].length;L++)for(_=0;_<H[y][L].length-b;_++)g(H[y][L][_]);else throw new Error("Unknown Geometry Type")}Vn.coordEach=F;function M(c,g,m,S){return F(c,function(y){m=g(m,y)},S),m}Vn.coordReduce=M;function p(c,g){var m;switch(c.type){case"FeatureCollection":for(m=0;m<c.features.length;m++)g(c.features[m].properties);break;case"Feature":g(c.properties);break}}Vn.propEach=p;function a(c,g,m){return p(c,function(S){m=g(m,S)}),m}Vn.propReduce=a;function d(c,g){if(c.type==="Feature")g(c);else if(c.type==="FeatureCollection")for(var m=0;m<c.features.length;m++)g(c.features[m])}Vn.featureEach=d;function h(c){var g=[];return F(c,function(m){g.push(m)}),g}return Vn.coordAll=h,Vn}var Oo,$a;function Ds(){if($a)return Oo;$a=1;var F=Dr().coordEach;return Oo=function(M){var p=[1/0,1/0,-1/0,-1/0];return F(M,function(a){p[0]>a[0]&&(p[0]=a[0]),p[1]>a[1]&&(p[1]=a[1]),p[2]<a[0]&&(p[2]=a[0]),p[3]<a[1]&&(p[3]=a[1])}),p},Oo}var Mo,tu;function gl(){return tu||(tu=1,Mo=function(F,M){var p=F.geometry.coordinates[0],a=F.geometry.coordinates[1],d=M.geometry.coordinates[0][0][0],h=M.geometry.coordinates[0][0][1],c=M.properties.a,g=M.geometry.coordinates[0][1][0],m=M.geometry.coordinates[0][1][1],S=M.properties.b,y=M.geometry.coordinates[0][2][0],L=M.geometry.coordinates[0][2][1],C=M.properties.c,_=(C*(p-d)*(a-m)+c*(p-g)*(a-L)+S*(p-y)*(a-h)-S*(p-d)*(a-L)-C*(p-g)*(a-h)-c*(p-y)*(a-m))/((p-d)*(a-m)+(p-g)*(a-L)+(p-y)*(a-h)-(p-d)*(a-L)-(p-g)*(a-h)-(p-y)*(a-m));return _}),Mo}var _o,eu;function be(){if(eu)return _o;eu=1;var F=bs().getCoord,M=Lt().radiansToDistance;return _o=function(p,a,d){var h=Math.PI/180,c=F(p),g=F(a),m=h*(g[1]-c[1]),S=h*(g[0]-c[0]),y=h*c[1],L=h*g[1],C=Math.pow(Math.sin(m/2),2)+Math.pow(Math.sin(S/2),2)*Math.cos(y)*Math.cos(L);return M(2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C)),d)},_o}var bo,nu;function fl(){if(nu)return bo;nu=1;var F=be();return bo=function(M){var p=F(M.slice(0,2),[M[2],M[1]],"miles"),a=F(M.slice(0,2),[M[0],M[3]],"miles");if(p>=a){var d=(M[1]+M[3])/2;return[M[0],d-(M[2]-M[0])/2,M[2],d+(M[2]-M[0])/2]}else{var h=(M[0]+M[2])/2;return[h-(M[3]-M[1])/2,M[1],h+(M[3]-M[1])/2,M[3]]}},bo}var Do,ru;function Ih(){if(ru)return Do;ru=1,Do=d;var F=1e-10;function M(h,c){var g=h.x-c.x,m=h.y-c.y;return g*g+m*m<F}function p(h){for(var c=h.head;c;){var g=c.next;c.next=c.prev,c.prev=g,c=g}var g=h.head;h.head=h.tail,h.tail=g}function a(h){this.level=h,this.s=null,this.count=0}a.prototype.remove_seq=function(h){h.prev?h.prev.next=h.next:this.s=h.next,h.next&&(h.next.prev=h.prev),--this.count},a.prototype.addSegment=function(h,c){for(var g=this.s,m=null,S=null,y=!1,L=!1;g&&(m==null&&(M(h,g.head.p)?(m=g,y=!0):M(h,g.tail.p)&&(m=g)),S==null&&(M(c,g.head.p)?(S=g,L=!0):M(c,g.tail.p)&&(S=g)),!(S!=null&&m!=null));)g=g.next;var C=(m!=null?1:0)|(S!=null?2:0);switch(C){case 0:var _={p:h,prev:null},T={p:c,next:null};_.next=T,T.prev=_,m={head:_,tail:T,next:this.s,prev:null,closed:!1},this.s&&(this.s.prev=m),this.s=m,++this.count;break;case 1:var v={p:c};y?(v.next=m.head,v.prev=null,m.head.prev=v,m.head=v):(v.next=null,v.prev=m.tail,m.tail.next=v,m.tail=v);break;case 2:var v={p:h};L?(v.next=S.head,v.prev=null,S.head.prev=v,S.head=v):(v.next=null,v.prev=S.tail,S.tail.next=v,S.tail=v);break;case 3:if(m===S){var v={p:m.tail.p,next:m.head,prev:null};m.head.prev=v,m.head=v,m.closed=!0;break}switch((y?1:0)|(L?2:0)){case 0:p(m);case 1:S.tail.next=m.head,m.head.prev=S.tail,S.tail=m.tail,this.remove_seq(m);break;case 3:p(m);case 2:m.tail.next=S.head,S.head.prev=m.tail,m.tail=S.tail,this.remove_seq(S);break}}};function d(h){if(h)this.drawContour=h;else{var c=this;c.contours={},this.drawContour=function(g,m,S,y,L,C){var _=c.contours[C];_||(_=c.contours[C]=new a(L)),_.addSegment({x:g,y:m},{x:S,y})},this.contourList=function(){var g=[],m=c.contours;for(var S in m)for(var y=m[S].s,L=m[S].level;y;){var C=y.head,_=[];for(_.level=L,_.k=S;C&&C.p;)_.push(C.p),C=C.next;g.push(_),y=y.next}return g.sort(function(T,v){return T.k-v.k}),g}}this.h=new Array(5),this.sh=new Array(5),this.xh=new Array(5),this.yh=new Array(5)}return d.prototype.contour=function(h,c,g,m,S,y,L,C,_){var T=this.h,v=this.sh,H=this.xh,X=this.yh,b=this.drawContour;this.contours={};for(var E=function(rt,Z){return(T[Z]*H[rt]-T[rt]*H[Z])/(T[Z]-T[rt])},N=function(rt,Z){return(T[Z]*X[rt]-T[rt]*X[Z])/(T[Z]-T[rt])},R,B,w,A,D,V,G=0,f=0,K=0,st=0,dt=[0,1,1,0],O=[0,0,1,1],q=[[[0,0,8],[0,2,5],[7,6,9]],[[0,3,4],[1,3,1],[4,3,0]],[[9,6,7],[5,2,0],[8,0,0]]],I=S-1;I>=m;I--)for(var Y=c;Y<=g-1;Y++){var U,W;if(U=Math.min(h[Y][I],h[Y][I+1]),W=Math.min(h[Y+1][I],h[Y+1][I+1]),D=Math.min(U,W),U=Math.max(h[Y][I],h[Y][I+1]),W=Math.max(h[Y+1][I],h[Y+1][I+1]),V=Math.max(U,W),V>=_[0]&&D<=_[C-1]){for(var J=0;J<C;J++)if(_[J]>=D&&_[J]<=V){for(var tt=4;tt>=0;tt--)tt>0?(T[tt]=h[Y+dt[tt-1]][I+O[tt-1]]-_[J],H[tt]=y[Y+dt[tt-1]],X[tt]=L[I+O[tt-1]]):(T[0]=.25*(T[1]+T[2]+T[3]+T[4]),H[0]=.5*(y[Y]+y[Y+1]),X[0]=.5*(L[I]+L[I+1])),T[tt]>F?v[tt]=1:T[tt]<-F?v[tt]=-1:v[tt]=0;for(tt=1;tt<=4;tt++)if(R=tt,B=0,tt!=4?w=tt+1:w=1,A=q[v[R]+1][v[B]+1][v[w]+1],A!=0){switch(A){case 1:G=H[R],K=X[R],f=H[B],st=X[B];break;case 2:G=H[B],K=X[B],f=H[w],st=X[w];break;case 3:G=H[w],K=X[w],f=H[R],st=X[R];break;case 4:G=H[R],K=X[R],f=E(B,w),st=N(B,w);break;case 5:G=H[B],K=X[B],f=E(w,R),st=N(w,R);break;case 6:G=H[w],K=X[w],f=E(R,B),st=N(R,B);break;case 7:G=E(R,B),K=N(R,B),f=E(B,w),st=N(B,w);break;case 8:G=E(B,w),K=N(B,w),f=E(w,R),st=N(w,R);break;case 9:G=E(w,R),K=N(w,R),f=E(R,B),st=N(R,B);break}b(G,K,f,st,_[J],J)}}}}},Do}var Ao,iu;function Nh(){if(iu)return Ao;iu=1;var F=Aa(),M=br(),p=Eh(),a=Ds(),d=gl(),h=Lt().featureCollection,c=Lt().lineString,g=fl(),m=Ih();return Ao=function(S,y,L,C){for(var _=F(S,y),T=a(S),v=g(T),H=p(v,L),X=[],b=0;b<H.features.length;b++)for(var E=H.features[b],N=0;N<_.features.length;N++){var R=_.features[N];M(E,R)&&(E.properties={},E.properties[y]=d(E,R))}for(var B=Math.sqrt(H.features.length),w=0;w<B;w++){for(var A=H.features.slice(w*B,(w+1)*B),D=[],V=0;V<A.length;V++)A[V].properties?D.push(A[V].properties[y]):D.push(0);X.push(D)}for(var G=(v[2]-v[0])/B,f=[],K=[],st=0;st<B;st++)f.push(st*G+v[0]),K.push(st*G+v[1]);var dt=new m;dt.contour(X,0,L,0,L,f,K,C.length,C);var O=dt.contourList(),q=h([]);return O.forEach(function(I){if(I.length>2){var Y=[];I.forEach(function(W){Y.push([W.x,W.y])});var U=c(Y);U.properties={},U.properties[y]=I.level,q.features.push(U)}}),q},Ao}var Fo,su;function Ch(){if(su)return Fo;su=1,Fo=F;function F(M){for(var p=0,a=0,d=1;d<M.length;++d)M[d][0]<M[p][0]&&(p=d),M[d][0]>M[a][0]&&(a=d);return p<a?[[p],[a]]:p>a?[[a],[p]]:[[p]]}return Fo}var Go={exports:{}},qo,ou;function dl(){if(ou)return qo;ou=1,qo=M;var F=+(Math.pow(2,27)+1);function M(p,a,d){var h=p*a,c=F*p,g=c-p,m=c-g,S=p-m,y=F*a,L=y-a,C=y-L,_=a-C,T=h-m*C,v=T-S*C,H=v-m*_,X=S*_-H;return d?(d[0]=X,d[1]=h,d):[X,h]}return qo}var Bo,au;function wh(){if(au)return Bo;au=1,Bo=M;function F(p,a){var d=p+a,h=d-p,c=d-h,g=a-h,m=p-c,S=m+g;return S?[S,d]:[d]}function M(p,a){var d=p.length|0,h=a.length|0;if(d===1&&h===1)return F(p[0],a[0]);var c=d+h,g=new Array(c),m=0,S=0,y=0,L=Math.abs,C=p[S],_=L(C),T=a[y],v=L(T),H,X;_<v?(X=C,S+=1,S<d&&(C=p[S],_=L(C))):(X=T,y+=1,y<h&&(T=a[y],v=L(T))),S<d&&_<v||y>=h?(H=C,S+=1,S<d&&(C=p[S],_=L(C))):(H=T,y+=1,y<h&&(T=a[y],v=L(T)));for(var b=H+X,E=b-H,N=X-E,R=N,B=b,w,A,D,V,G;S<d&&y<h;)_<v?(H=C,S+=1,S<d&&(C=p[S],_=L(C))):(H=T,y+=1,y<h&&(T=a[y],v=L(T))),X=R,b=H+X,E=b-H,N=X-E,N&&(g[m++]=N),w=B+b,A=w-B,D=w-A,V=b-A,G=B-D,R=G+V,B=w;for(;S<d;)H=C,X=R,b=H+X,E=b-H,N=X-E,N&&(g[m++]=N),w=B+b,A=w-B,D=w-A,V=b-A,G=B-D,R=G+V,B=w,S+=1,S<d&&(C=p[S]);for(;y<h;)H=T,X=R,b=H+X,E=b-H,N=X-E,N&&(g[m++]=N),w=B+b,A=w-B,D=w-A,V=b-A,G=B-D,R=G+V,B=w,y+=1,y<h&&(T=a[y]);return R&&(g[m++]=R),B&&(g[m++]=B),m||(g[m++]=0),g.length=m,g}return Bo}var zo,uu;function Sh(){if(uu)return zo;uu=1,zo=F;function F(M,p,a){var d=M+p,h=d-M,c=d-h,g=p-h,m=M-c;return a?(a[0]=m+g,a[1]=d,a):[m+g,d]}return zo}var Vo,lu;function Lh(){if(lu)return Vo;lu=1;var F=dl(),M=Sh();Vo=p;function p(a,d){var h=a.length;if(h===1){var c=F(a[0],d);return c[0]?c:[c[1]]}var g=new Array(2*h),m=[.1,.1],S=[.1,.1],y=0;F(a[0],d,m),m[0]&&(g[y++]=m[0]);for(var L=1;L<h;++L){F(a[L],d,S);var C=m[1];M(C,S[0],m),m[0]&&(g[y++]=m[0]);var _=S[1],T=m[1],v=_+T,H=v-_,X=T-H;m[1]=v,X&&(g[y++]=X)}return m[1]&&(g[y++]=m[1]),y===0&&(g[y++]=0),g.length=y,g}return Vo}var ko,hu;function Rh(){if(hu)return ko;hu=1,ko=M;function F(p,a){var d=p+a,h=d-p,c=d-h,g=a-h,m=p-c,S=m+g;return S?[S,d]:[d]}function M(p,a){var d=p.length|0,h=a.length|0;if(d===1&&h===1)return F(p[0],-a[0]);var c=d+h,g=new Array(c),m=0,S=0,y=0,L=Math.abs,C=p[S],_=L(C),T=-a[y],v=L(T),H,X;_<v?(X=C,S+=1,S<d&&(C=p[S],_=L(C))):(X=T,y+=1,y<h&&(T=-a[y],v=L(T))),S<d&&_<v||y>=h?(H=C,S+=1,S<d&&(C=p[S],_=L(C))):(H=T,y+=1,y<h&&(T=-a[y],v=L(T)));for(var b=H+X,E=b-H,N=X-E,R=N,B=b,w,A,D,V,G;S<d&&y<h;)_<v?(H=C,S+=1,S<d&&(C=p[S],_=L(C))):(H=T,y+=1,y<h&&(T=-a[y],v=L(T))),X=R,b=H+X,E=b-H,N=X-E,N&&(g[m++]=N),w=B+b,A=w-B,D=w-A,V=b-A,G=B-D,R=G+V,B=w;for(;S<d;)H=C,X=R,b=H+X,E=b-H,N=X-E,N&&(g[m++]=N),w=B+b,A=w-B,D=w-A,V=b-A,G=B-D,R=G+V,B=w,S+=1,S<d&&(C=p[S]);for(;y<h;)H=T,X=R,b=H+X,E=b-H,N=X-E,N&&(g[m++]=N),w=B+b,A=w-B,D=w-A,V=b-A,G=B-D,R=G+V,B=w,y+=1,y<h&&(T=-a[y]);return R&&(g[m++]=R),B&&(g[m++]=B),m||(g[m++]=0),g.length=m,g}return ko}var cu;function Fa(){return cu||(cu=1,function(F){var M=dl(),p=wh(),a=Lh(),d=Rh(),h=5,c=11102230246251565e-32,g=(3+16*c)*c,m=(7+56*c)*c;function S(E,N,R,B){return function(A,D,V){var G=E(E(N(D[1],V[0]),N(-V[1],D[0])),E(N(A[1],D[0]),N(-D[1],A[0]))),f=E(N(A[1],V[0]),N(-V[1],A[0])),K=B(G,f);return K[K.length-1]}}function y(E,N,R,B){return function(A,D,V,G){var f=E(E(R(E(N(V[1],G[0]),N(-G[1],V[0])),D[2]),E(R(E(N(D[1],G[0]),N(-G[1],D[0])),-V[2]),R(E(N(D[1],V[0]),N(-V[1],D[0])),G[2]))),E(R(E(N(D[1],G[0]),N(-G[1],D[0])),A[2]),E(R(E(N(A[1],G[0]),N(-G[1],A[0])),-D[2]),R(E(N(A[1],D[0]),N(-D[1],A[0])),G[2])))),K=E(E(R(E(N(V[1],G[0]),N(-G[1],V[0])),A[2]),E(R(E(N(A[1],G[0]),N(-G[1],A[0])),-V[2]),R(E(N(A[1],V[0]),N(-V[1],A[0])),G[2]))),E(R(E(N(D[1],V[0]),N(-V[1],D[0])),A[2]),E(R(E(N(A[1],V[0]),N(-V[1],A[0])),-D[2]),R(E(N(A[1],D[0]),N(-D[1],A[0])),V[2])))),st=B(f,K);return st[st.length-1]}}function L(E,N,R,B){return function(A,D,V,G,f){var K=E(E(E(R(E(R(E(N(G[1],f[0]),N(-f[1],G[0])),V[2]),E(R(E(N(V[1],f[0]),N(-f[1],V[0])),-G[2]),R(E(N(V[1],G[0]),N(-G[1],V[0])),f[2]))),D[3]),E(R(E(R(E(N(G[1],f[0]),N(-f[1],G[0])),D[2]),E(R(E(N(D[1],f[0]),N(-f[1],D[0])),-G[2]),R(E(N(D[1],G[0]),N(-G[1],D[0])),f[2]))),-V[3]),R(E(R(E(N(V[1],f[0]),N(-f[1],V[0])),D[2]),E(R(E(N(D[1],f[0]),N(-f[1],D[0])),-V[2]),R(E(N(D[1],V[0]),N(-V[1],D[0])),f[2]))),G[3]))),E(R(E(R(E(N(V[1],G[0]),N(-G[1],V[0])),D[2]),E(R(E(N(D[1],G[0]),N(-G[1],D[0])),-V[2]),R(E(N(D[1],V[0]),N(-V[1],D[0])),G[2]))),-f[3]),E(R(E(R(E(N(G[1],f[0]),N(-f[1],G[0])),D[2]),E(R(E(N(D[1],f[0]),N(-f[1],D[0])),-G[2]),R(E(N(D[1],G[0]),N(-G[1],D[0])),f[2]))),A[3]),R(E(R(E(N(G[1],f[0]),N(-f[1],G[0])),A[2]),E(R(E(N(A[1],f[0]),N(-f[1],A[0])),-G[2]),R(E(N(A[1],G[0]),N(-G[1],A[0])),f[2]))),-D[3])))),E(E(R(E(R(E(N(D[1],f[0]),N(-f[1],D[0])),A[2]),E(R(E(N(A[1],f[0]),N(-f[1],A[0])),-D[2]),R(E(N(A[1],D[0]),N(-D[1],A[0])),f[2]))),G[3]),E(R(E(R(E(N(D[1],G[0]),N(-G[1],D[0])),A[2]),E(R(E(N(A[1],G[0]),N(-G[1],A[0])),-D[2]),R(E(N(A[1],D[0]),N(-D[1],A[0])),G[2]))),-f[3]),R(E(R(E(N(V[1],G[0]),N(-G[1],V[0])),D[2]),E(R(E(N(D[1],G[0]),N(-G[1],D[0])),-V[2]),R(E(N(D[1],V[0]),N(-V[1],D[0])),G[2]))),A[3]))),E(R(E(R(E(N(V[1],G[0]),N(-G[1],V[0])),A[2]),E(R(E(N(A[1],G[0]),N(-G[1],A[0])),-V[2]),R(E(N(A[1],V[0]),N(-V[1],A[0])),G[2]))),-D[3]),E(R(E(R(E(N(D[1],G[0]),N(-G[1],D[0])),A[2]),E(R(E(N(A[1],G[0]),N(-G[1],A[0])),-D[2]),R(E(N(A[1],D[0]),N(-D[1],A[0])),G[2]))),V[3]),R(E(R(E(N(D[1],V[0]),N(-V[1],D[0])),A[2]),E(R(E(N(A[1],V[0]),N(-V[1],A[0])),-D[2]),R(E(N(A[1],D[0]),N(-D[1],A[0])),V[2]))),-G[3]))))),st=E(E(E(R(E(R(E(N(G[1],f[0]),N(-f[1],G[0])),V[2]),E(R(E(N(V[1],f[0]),N(-f[1],V[0])),-G[2]),R(E(N(V[1],G[0]),N(-G[1],V[0])),f[2]))),A[3]),R(E(R(E(N(G[1],f[0]),N(-f[1],G[0])),A[2]),E(R(E(N(A[1],f[0]),N(-f[1],A[0])),-G[2]),R(E(N(A[1],G[0]),N(-G[1],A[0])),f[2]))),-V[3])),E(R(E(R(E(N(V[1],f[0]),N(-f[1],V[0])),A[2]),E(R(E(N(A[1],f[0]),N(-f[1],A[0])),-V[2]),R(E(N(A[1],V[0]),N(-V[1],A[0])),f[2]))),G[3]),R(E(R(E(N(V[1],G[0]),N(-G[1],V[0])),A[2]),E(R(E(N(A[1],G[0]),N(-G[1],A[0])),-V[2]),R(E(N(A[1],V[0]),N(-V[1],A[0])),G[2]))),-f[3]))),E(E(R(E(R(E(N(V[1],f[0]),N(-f[1],V[0])),D[2]),E(R(E(N(D[1],f[0]),N(-f[1],D[0])),-V[2]),R(E(N(D[1],V[0]),N(-V[1],D[0])),f[2]))),A[3]),R(E(R(E(N(V[1],f[0]),N(-f[1],V[0])),A[2]),E(R(E(N(A[1],f[0]),N(-f[1],A[0])),-V[2]),R(E(N(A[1],V[0]),N(-V[1],A[0])),f[2]))),-D[3])),E(R(E(R(E(N(D[1],f[0]),N(-f[1],D[0])),A[2]),E(R(E(N(A[1],f[0]),N(-f[1],A[0])),-D[2]),R(E(N(A[1],D[0]),N(-D[1],A[0])),f[2]))),V[3]),R(E(R(E(N(D[1],V[0]),N(-V[1],D[0])),A[2]),E(R(E(N(A[1],V[0]),N(-V[1],A[0])),-D[2]),R(E(N(A[1],D[0]),N(-D[1],A[0])),V[2]))),-f[3])))),dt=B(K,st);return dt[dt.length-1]}}function C(E){var N=E===3?S:E===4?y:L;return N(p,M,a,d)}var _=C(3),T=C(4),v=[function(){return 0},function(){return 0},function(N,R){return R[0]-N[0]},function(N,R,B){var w=(N[1]-B[1])*(R[0]-B[0]),A=(N[0]-B[0])*(R[1]-B[1]),D=w-A,V;if(w>0){if(A<=0)return D;V=w+A}else if(w<0){if(A>=0)return D;V=-(w+A)}else return D;var G=g*V;return D>=G||D<=-G?D:_(N,R,B)},function(N,R,B,w){var A=N[0]-w[0],D=R[0]-w[0],V=B[0]-w[0],G=N[1]-w[1],f=R[1]-w[1],K=B[1]-w[1],st=N[2]-w[2],dt=R[2]-w[2],O=B[2]-w[2],q=D*K,I=V*f,Y=V*G,U=A*K,W=A*f,J=D*G,tt=st*(q-I)+dt*(Y-U)+O*(W-J),rt=(Math.abs(q)+Math.abs(I))*Math.abs(st)+(Math.abs(Y)+Math.abs(U))*Math.abs(dt)+(Math.abs(W)+Math.abs(J))*Math.abs(O),Z=m*rt;return tt>Z||-tt>Z?tt:T(N,R,B,w)}];function H(E){var N=v[E.length];return N||(N=v[E.length]=C(E.length)),N.apply(void 0,E)}function X(E,N,R,B,w,A,D){return function(G,f,K,st,dt){switch(arguments.length){case 0:case 1:return 0;case 2:return B(G,f);case 3:return w(G,f,K);case 4:return A(G,f,K,st);case 5:return D(G,f,K,st,dt)}for(var O=new Array(arguments.length),q=0;q<arguments.length;++q)O[q]=arguments[q];return E(O)}}function b(){for(;v.length<=h;)v.push(C(v.length));F.exports=X.apply(void 0,[H].concat(v));for(var E=0;E<=h;++E)F.exports[E]=v[E]}b()}(Go)),Go.exports}var Uo,gu;function Th(){if(gu)return Uo;gu=1,Uo=M;var F=Fa()[3];function M(p){var a=p.length;if(a<3){for(var L=new Array(a),d=0;d<a;++d)L[d]=d;return a===2&&p[0][0]===p[1][0]&&p[0][1]===p[1][1]?[0]:L}for(var h=new Array(a),d=0;d<a;++d)h[d]=d;h.sort(function(v,H){var X=p[v][0]-p[H][0];return X||p[v][1]-p[H][1]});for(var c=[h[0],h[1]],g=[h[0],h[1]],d=2;d<a;++d){for(var m=h[d],S=p[m],y=c.length;y>1&&F(p[c[y-2]],p[c[y-1]],S)<=0;)y-=1,c.pop();for(c.push(m),y=g.length;y>1&&F(p[g[y-2]],p[g[y-1]],S)>=0;)y-=1,g.pop();g.push(m)}for(var L=new Array(g.length+c.length-2),C=0,d=0,_=c.length;d<_;++d)L[C++]=c[d];for(var T=g.length-2;T>0;--T)L[C++]=g[T];return L}return Uo}var Xo,fu;function Ph(){if(fu)return Xo;fu=1,Xo=M;var F=Th();function M(p){var a=F(p),d=a.length;if(d<=2)return[];for(var h=new Array(d),c=a[d-1],g=0;g<d;++g){var m=a[g];h[g]=[c,m],c=m}return h}return Xo}var ye={},Ut={},du;function Oh(){if(du)return Ut;du=1;var F=32;Ut.INT_BITS=F,Ut.INT_MAX=2147483647,Ut.INT_MIN=-1<<F-1,Ut.sign=function(a){return(a>0)-(a<0)},Ut.abs=function(a){var d=a>>F-1;return(a^d)-d},Ut.min=function(a,d){return d^(a^d)&-(a<d)},Ut.max=function(a,d){return a^(a^d)&-(a<d)},Ut.isPow2=function(a){return!(a&a-1)&&!!a},Ut.log2=function(a){var d,h;return d=(a>65535)<<4,a>>>=d,h=(a>255)<<3,a>>>=h,d|=h,h=(a>15)<<2,a>>>=h,d|=h,h=(a>3)<<1,a>>>=h,d|=h,d|a>>1},Ut.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},Ut.popCount=function(a){return a=a-(a>>>1&1431655765),a=(a&858993459)+(a>>>2&858993459),(a+(a>>>4)&252645135)*16843009>>>24};function M(a){var d=32;return a&=-a,a&&d--,a&65535&&(d-=16),a&16711935&&(d-=8),a&252645135&&(d-=4),a&858993459&&(d-=2),a&1431655765&&(d-=1),d}Ut.countTrailingZeros=M,Ut.nextPow2=function(a){return a+=a===0,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1},Ut.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a-(a>>>1)},Ut.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,a&=15,27030>>>a&1};var p=new Array(256);return function(a){for(var d=0;d<256;++d){var h=d,c=d,g=7;for(h>>>=1;h;h>>>=1)c<<=1,c|=h&1,--g;a[d]=c<<g&255}}(p),Ut.reverse=function(a){return p[a&255]<<24|p[a>>>8&255]<<16|p[a>>>16&255]<<8|p[a>>>24&255]},Ut.interleave2=function(a,d){return a&=65535,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,d&=65535,d=(d|d<<8)&16711935,d=(d|d<<4)&252645135,d=(d|d<<2)&858993459,d=(d|d<<1)&1431655765,a|d<<1},Ut.deinterleave2=function(a,d){return a=a>>>d&1431655765,a=(a|a>>>1)&858993459,a=(a|a>>>2)&252645135,a=(a|a>>>4)&16711935,a=(a|a>>>16)&65535,a<<16>>16},Ut.interleave3=function(a,d,h){return a&=1023,a=(a|a<<16)&4278190335,a=(a|a<<8)&251719695,a=(a|a<<4)&3272356035,a=(a|a<<2)&1227133513,d&=1023,d=(d|d<<16)&4278190335,d=(d|d<<8)&251719695,d=(d|d<<4)&3272356035,d=(d|d<<2)&1227133513,a|=d<<1,h&=1023,h=(h|h<<16)&4278190335,h=(h|h<<8)&251719695,h=(h|h<<4)&3272356035,h=(h|h<<2)&1227133513,a|h<<2},Ut.deinterleave3=function(a,d){return a=a>>>d&1227133513,a=(a|a>>>2)&3272356035,a=(a|a>>>4)&251719695,a=(a|a>>>8)&4278190335,a=(a|a>>>16)&1023,a<<22>>22},Ut.nextCombination=function(a){var d=a|a-1;return d+1|(~d&-~d)-1>>>M(a)+1},Ut}var Yo,pu;function Mh(){if(pu)return Yo;pu=1,Yo=F;function F(p){this.roots=new Array(p),this.ranks=new Array(p);for(var a=0;a<p;++a)this.roots[a]=a,this.ranks[a]=0}var M=F.prototype;return Object.defineProperty(M,"length",{get:function(){return this.roots.length}}),M.makeSet=function(){var p=this.roots.length;return this.roots.push(p),this.ranks.push(0),p},M.find=function(p){for(var a=p,d=this.roots;d[p]!==p;)p=d[p];for(;d[a]!==p;){var h=d[a];d[a]=p,a=h}return p},M.link=function(p,a){var d=this.find(p),h=this.find(a);if(d!==h){var c=this.ranks,g=this.roots,m=c[d],S=c[h];m<S?g[d]=h:S<m?g[h]=d:(g[h]=d,++c[d])}},Yo}var mu;function _h(){if(mu)return ye;mu=1;var F=Oh(),M=Mh();function p(b){for(var E=0,N=Math.max,R=0,B=b.length;R<B;++R)E=N(E,b[R].length);return E-1}ye.dimension=p;function a(b){for(var E=-1,N=Math.max,R=0,B=b.length;R<B;++R)for(var w=b[R],A=0,D=w.length;A<D;++A)E=N(E,w[A]);return E+1}ye.countVertices=a;function d(b){for(var E=new Array(b.length),N=0,R=b.length;N<R;++N)E[N]=b[N].slice(0);return E}ye.cloneCells=d;function h(b,E){var N=b.length,R=b.length-E.length,B=Math.min;if(R)return R;switch(N){case 0:return 0;case 1:return b[0]-E[0];case 2:var G=b[0]+b[1]-E[0]-E[1];return G||B(b[0],b[1])-B(E[0],E[1]);case 3:var w=b[0]+b[1],A=E[0]+E[1];if(G=w+b[2]-(A+E[2]),G)return G;var D=B(b[0],b[1]),V=B(E[0],E[1]),G=B(D,b[2])-B(V,E[2]);return G||B(D+b[2],w)-B(V+E[2],A);default:var f=b.slice(0);f.sort();var K=E.slice(0);K.sort();for(var st=0;st<N;++st)if(R=f[st]-K[st],R)return R;return 0}}ye.compareCells=h;function c(b,E){return h(b[0],E[0])}function g(b,E){if(E){for(var N=b.length,R=new Array(N),B=0;B<N;++B)R[B]=[b[B],E[B]];R.sort(c);for(var B=0;B<N;++B)b[B]=R[B][0],E[B]=R[B][1];return b}else return b.sort(h),b}ye.normalize=g;function m(b){if(b.length===0)return[];for(var E=1,N=b.length,R=1;R<N;++R){var B=b[R];if(h(B,b[R-1])){if(R===E){E++;continue}b[E++]=B}}return b.length=E,b}ye.unique=m;function S(b,E){for(var N=0,R=b.length-1,B=-1;N<=R;){var w=N+R>>1,A=h(b[w],E);A<=0?(A===0&&(B=w),N=w+1):A>0&&(R=w-1)}return B}ye.findCell=S;function y(b,E){for(var N=new Array(b.length),R=0,B=N.length;R<B;++R)N[R]=[];for(var w=[],R=0,A=E.length;R<A;++R)for(var D=E[R],V=D.length,G=1,f=1<<V;G<f;++G){w.length=F.popCount(G);for(var K=0,st=0;st<V;++st)G&1<<st&&(w[K++]=D[st]);var dt=S(b,w);if(!(dt<0))for(;N[dt++].push(R),!(dt>=b.length||h(b[dt],w)!==0););}return N}ye.incidence=y;function L(b,E){if(!E)return y(m(_(b,0)),b);for(var N=new Array(E),R=0;R<E;++R)N[R]=[];for(var R=0,B=b.length;R<B;++R)for(var w=b[R],A=0,D=w.length;A<D;++A)N[w[A]].push(R);return N}ye.dual=L;function C(b){for(var E=[],N=0,R=b.length;N<R;++N)for(var B=b[N],w=B.length|0,A=1,D=1<<w;A<D;++A){for(var V=[],G=0;G<w;++G)A>>>G&1&&V.push(B[G]);E.push(V)}return g(E)}ye.explode=C;function _(b,E){if(E<0)return[];for(var N=[],R=(1<<E+1)-1,B=0;B<b.length;++B)for(var w=b[B],A=R;A<1<<w.length;A=F.nextCombination(A)){for(var D=new Array(E+1),V=0,G=0;G<w.length;++G)A&1<<G&&(D[V++]=w[G]);N.push(D)}return g(N)}ye.skeleton=_;function T(b){for(var E=[],N=0,R=b.length;N<R;++N)for(var B=b[N],w=0,A=B.length;w<A;++w){for(var D=new Array(B.length-1),V=0,G=0;V<A;++V)V!==w&&(D[G++]=B[V]);E.push(D)}return g(E)}ye.boundary=T;function v(b,E){for(var N=new M(E),R=0;R<b.length;++R)for(var B=b[R],w=0;w<B.length;++w)for(var A=w+1;A<B.length;++A)N.link(B[w],B[A]);for(var D=[],V=N.ranks,R=0;R<V.length;++R)V[R]=-1;for(var R=0;R<b.length;++R){var G=N.find(b[R][0]);V[G]<0?(V[G]=D.length,D.push([b[R].slice(0)])):D[V[G]].push(b[R].slice(0))}return D}function H(b){for(var E=m(g(_(b,0))),N=new M(E.length),R=0;R<b.length;++R)for(var B=b[R],w=0;w<B.length;++w)for(var A=S(E,[B[w]]),D=w+1;D<B.length;++D)N.link(A,S(E,[B[D]]));for(var V=[],G=N.ranks,R=0;R<G.length;++R)G[R]=-1;for(var R=0;R<b.length;++R){var f=N.find(S(E,[b[R][0]]));G[f]<0?(G[f]=V.length,V.push([b[R].slice(0)])):V[G[f]].push(b[R].slice(0))}return V}function X(b,E){return E?v(b,E):H(b)}return ye.connectedComponents=X,ye}var Ho,vu;function bh(){if(vu)return Ho;vu=1,Ho=S;var F=Fa(),M=_h().compareCells;function p(y,L,C){this.vertices=y,this.adjacent=L,this.boundary=C,this.lastVisited=-1}p.prototype.flip=function(){var y=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=y;var L=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=L};function a(y,L,C){this.vertices=y,this.cell=L,this.index=C}function d(y,L){return M(y.vertices,L.vertices)}function h(y){for(var L=["function orient(){var tuple=this.tuple;return test("],C=0;C<=y;++C)C>0&&L.push(","),L.push("tuple[",C,"]");L.push(")}return orient");var _=new Function("test",L.join("")),T=F[y+1];return T||(T=F),_(T)}var c=[];function g(y,L,C){this.dimension=y,this.vertices=L,this.simplices=C,this.interior=C.filter(function(v){return!v.boundary}),this.tuple=new Array(y+1);for(var _=0;_<=y;++_)this.tuple[_]=this.vertices[_];var T=c[y];T||(T=c[y]=h(y)),this.orient=T}var m=g.prototype;m.handleBoundaryDegeneracy=function(y,L){var C=this.dimension,_=this.vertices.length-1,T=this.tuple,v=this.vertices,H=[y];for(y.lastVisited=-_;H.length>0;){y=H.pop(),y.vertices;for(var X=y.adjacent,b=0;b<=C;++b){var E=X[b];if(!(!E.boundary||E.lastVisited<=-_)){for(var N=E.vertices,R=0;R<=C;++R){var B=N[R];B<0?T[R]=L:T[R]=v[B]}var w=this.orient();if(w>0)return E;E.lastVisited=-_,w===0&&H.push(E)}}}return null},m.walk=function(y,L){var C=this.vertices.length-1,_=this.dimension,T=this.vertices,v=this.tuple,H=L?this.interior.length*Math.random()|0:this.interior.length-1,X=this.interior[H];t:for(;!X.boundary;){for(var b=X.vertices,E=X.adjacent,N=0;N<=_;++N)v[N]=T[b[N]];X.lastVisited=C;for(var N=0;N<=_;++N){var R=E[N];if(!(R.lastVisited>=C)){var B=v[N];v[N]=y;var w=this.orient();if(v[N]=B,w<0){X=R;continue t}else R.boundary?R.lastVisited=-C:R.lastVisited=C}}return}return X},m.addPeaks=function(y,L){var C=this.vertices.length-1,_=this.dimension,T=this.vertices,v=this.tuple,H=this.interior,X=this.simplices,b=[L];L.lastVisited=C,L.vertices[L.vertices.indexOf(-1)]=C,L.boundary=!1,H.push(L);for(var E=[];b.length>0;){var L=b.pop(),N=L.vertices,R=L.adjacent,B=N.indexOf(C);if(!(B<0)){for(var w=0;w<=_;++w)if(w!==B){var A=R[w];if(!(!A.boundary||A.lastVisited>=C)){var D=A.vertices;if(A.lastVisited!==-C){for(var V=0,G=0;G<=_;++G)D[G]<0?(V=G,v[G]=y):v[G]=T[D[G]];var f=this.orient();if(f>0){D[V]=C,A.boundary=!1,H.push(A),b.push(A),A.lastVisited=C;continue}else A.lastVisited=-C}var K=A.adjacent,st=N.slice(),dt=R.slice(),O=new p(st,dt,!0);X.push(O);var q=K.indexOf(L);if(!(q<0)){K[q]=O,dt[B]=A,st[w]=-1,dt[w]=L,R[w]=O,O.flip();for(var G=0;G<=_;++G){var I=st[G];if(!(I<0||I===C)){for(var Y=new Array(_-1),U=0,W=0;W<=_;++W){var J=st[W];J<0||W===G||(Y[U++]=J)}E.push(new a(Y,O,G))}}}}}}}E.sort(d);for(var w=0;w+1<E.length;w+=2){var tt=E[w],rt=E[w+1],Z=tt.index,Nt=rt.index;Z<0||Nt<0||(tt.cell.adjacent[tt.index]=rt.cell,rt.cell.adjacent[rt.index]=tt.cell)}},m.insert=function(y,L){var C=this.vertices;C.push(y);var _=this.walk(y,L);if(!!_){for(var T=this.dimension,v=this.tuple,H=0;H<=T;++H){var X=_.vertices[H];X<0?v[H]=y:v[H]=C[X]}var b=this.orient(v);b<0||b===0&&(_=this.handleBoundaryDegeneracy(_,y),!_)||this.addPeaks(y,_)}},m.boundary=function(){for(var y=this.dimension,L=[],C=this.simplices,_=C.length,T=0;T<_;++T){var v=C[T];if(v.boundary){for(var H=new Array(y),X=v.vertices,b=0,E=0,N=0;N<=y;++N)X[N]>=0?H[b++]=X[N]:E=N&1;if(E===(y&1)){var R=H[0];H[0]=H[1],H[1]=R}L.push(H)}}return L};function S(y,L){var C=y.length;if(C===0)throw new Error("Must have at least d+1 points");var _=y[0].length;if(C<=_)throw new Error("Must input at least d+1 points");var T=y.slice(0,_+1),v=F.apply(void 0,T);if(v===0)throw new Error("Input not in general position");for(var H=new Array(_+1),X=0;X<=_;++X)H[X]=X;v<0&&(H[0]=1,H[1]=0);for(var b=new p(H,new Array(_+1),!1),E=b.adjacent,N=new Array(_+2),X=0;X<=_;++X){for(var R=H.slice(),B=0;B<=_;++B)B===X&&(R[B]=-1);var w=R[0];R[0]=R[1],R[1]=w;var A=new p(R,new Array(_+1),!0);E[X]=A,N[X]=A}N[_+1]=b;for(var X=0;X<=_;++X)for(var R=E[X].vertices,D=E[X].adjacent,B=0;B<=_;++B){var V=R[B];if(V<0){D[B]=b;continue}for(var G=0;G<=_;++G)E[G].vertices.indexOf(V)<0&&(D[B]=E[G])}for(var f=new g(_,T,N),K=!!L,X=_+1;X<C;++X)f.insert(y[X],K);return f.boundary()}return Ho}var Wo,yu;function Dh(){if(yu)return Wo;yu=1,Wo=p;var F=Fa();function M(a,d){for(var h=new Array(d+1),c=0;c<a.length;++c)h[c]=a[c];for(var c=0;c<=a.length;++c){for(var g=a.length;g<=d;++g){for(var m=new Array(d),S=0;S<d;++S)m[S]=Math.pow(g+1-c,S);h[g]=m}var y=F.apply(void 0,h);if(y)return!0}return!1}function p(a){var d=a.length;if(d===0)return[];if(d===1)return[0];for(var h=a[0].length,c=[a[0]],g=[0],m=1;m<d;++m){if(c.push(a[m]),!M(c,h)){c.pop();continue}if(g.push(m),g.length===h+1)return g}return g}return Wo}var Zo,xu;function Ah(){if(xu)return Zo;xu=1,Zo=d;var F=bh(),M=Dh();function p(h,c){for(var g=h.length,m=new Array(g),S=0;S<c.length;++S)m[S]=h[c[S]];for(var y=c.length,S=0;S<g;++S)c.indexOf(S)<0&&(m[y++]=h[S]);return m}function a(h,c){for(var g=h.length,m=c.length,S=0;S<g;++S)for(var y=h[S],L=0;L<y.length;++L){var C=y[L];if(C<m)y[L]=c[C];else{C=C-m;for(var _=0;_<m;++_)C>=c[_]&&(C+=1);y[L]=C}}return h}function d(h,c){try{return F(h,!0)}catch{var g=M(h);if(g.length<=c)return[];var m=p(h,g),S=F(m,!0);return a(S,g)}}return Zo}var Jo,Eu;function Fh(){if(Eu)return Jo;Eu=1;var F=Ch(),M=Ph(),p=Ah();Jo=a;function a(d){var h=d.length;if(h===0)return[];if(h===1)return[[0]];var c=d[0].length;return c===0?[]:c===1?F(d):c===2?M(d):p(d,c)}return Jo}var Ko,Iu;function Gh(){if(Iu)return Ko;Iu=1;var F=Dr().coordEach,M=Fh(),p=Lt().polygon;return Ko=function(a){var d=[];F(a,function(m){d.push(m)});var h=M(d);if(h.length>0){for(var c=[],g=0;g<h.length;g++)c.push(d[h[g][0]]);return c.push(d[h[h.length-1][1]]),p([c])}},Ko}var jo,Nu;function qh(){if(Nu)return jo;Nu=1;var F=br(),M=Lt().featureCollection;return jo=function(p,a){for(var d=M([]),h=0;h<a.features.length;h++)for(var c=0;c<p.features.length;c++){var g=F(p.features[c],a.features[h]);g&&d.features.push(p.features[c])}return d},jo}var Ms={exports:{}},Cu;function As(){return Cu||(Cu=1,function(F,M){(function(p,a){a(M)})(dh,function(p){function a(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function d(){}function h(){}function c(){}function g(){}function m(){}function S(){}function y(){}function L(t){this.message=t}function C(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function _(){if(arguments.length===0)L.call(this);else if(arguments.length===1){var t=arguments[0];L.call(this,t)}}function T(){}function v(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)v.call(this,0,0);else if(arguments.length===1){var t=arguments[0];v.call(this,t.x,t.y,t.z)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];v.call(this,e,n,v.NULL_ORDINATE)}else if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2];this.x=r,this.y=s,this.z=o}}function H(){if(this.dimensionsToTest=2,arguments.length===0)H.call(this,2);else if(arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new h;this.dimensionsToTest=t}}function X(){}function b(){}function E(t){this.message=t||""}function N(){}function R(t){this.message=t||""}function B(t){this.message=t||""}function w(){this.array_=[],arguments[0]instanceof b&&this.addAll(arguments[0])}function A(){if(w.apply(this),arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}}function D(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof v){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof D){var e=arguments[0];this.init(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var s=arguments[0],o=arguments[1],u=arguments[2],l=arguments[3];this.init(s,o,u,l)}}function V(){}function G(){V.call(this,"Projective point not representable on the Cartesian plane.")}function f(){}function K(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1}function st(){}function dt(t){this.str=t}function O(t){this.value=t}function q(){}function I(){if(this.hi=0,this.lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof I){var e=arguments[0];this.init(e)}else if(typeof arguments[0]=="string"){var n=arguments[0];I.call(this,I.parse(n))}}else if(arguments.length===2){var r=arguments[0],s=arguments[1];this.init(r,s)}}function Y(){}function U(){}function W(){}function J(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof J&&arguments[1]instanceof J){var r=arguments[0],s=arguments[1];this.x=r.y*s.w-s.y*r.w,this.y=s.x*r.w-r.x*s.w,this.w=r.x*s.y-s.x*r.y}else if(arguments[0]instanceof v&&arguments[1]instanceof v){var o=arguments[0],u=arguments[1];this.x=o.y-u.y,this.y=u.x-o.x,this.w=o.x*u.y-u.x*o.y}}else if(arguments.length===3){var l=arguments[0],x=arguments[1],P=arguments[2];this.x=l,this.y=x,this.w=P}else if(arguments.length===4){var z=arguments[0],k=arguments[1],j=arguments[2],nt=arguments[3],at=z.y-k.y,ut=k.x-z.x,bt=z.x*k.y-k.x*z.y,kt=j.y-nt.y,Ve=nt.x-j.x,or=j.x*nt.y-nt.x*j.y;this.x=ut*or-Ve*bt,this.y=kt*bt-at*or,this.w=at*Ve-kt*ut}}function tt(){}function rt(){}function Z(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID()}function Nt(){}function ct(){}function It(){}function Ht(){}function Ot(){}function $e(){}function ot(){}function ar(){}function ur(){}function vt(){}function Rt(){}function Li(){}function Jt(){this.array_=[],arguments[0]instanceof b&&this.addAll(arguments[0])}function Ga(t){return t==null?dn:t.color}function Mt(t){return t==null?null:t.parent}function tn(t,e){t!==null&&(t.color=e)}function qs(t){return t==null?null:t.left}function qa(t){return t==null?null:t.right}function Xt(){this.root_=null,this.size_=0}function Ri(){}function Ba(){}function re(){this.array_=[],arguments[0]instanceof b&&this.addAll(arguments[0])}function en(){}function Q(){}function nn(){}function kn(){}function pt(){this.geometries=null;var t=arguments[0],e=arguments[1];if(Z.call(this,e),t===null&&(t=[]),Z.hasNullElements(t))throw new h;this.geometries=t}function he(){var t=arguments[0],e=arguments[1];pt.call(this,t,e)}function vn(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,arguments.length===1){var t=arguments[0];vn.call(this,t,ct.MOD2_BOUNDARY_RULE)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.geom=e,this.geomFact=e.getFactory(),this.bnRule=n}}function Bs(){this.count=null}function El(){}function Il(){}function Nl(){}function Cl(){}function wl(){}function Sl(){}function xe(){}function Vt(){}function gt(){this.points=null;var t=arguments[0],e=arguments[1];Z.call(this,e),this.init(t)}function Ti(){}function At(){this.coordinates=null;var t=arguments[0],e=arguments[1];Z.call(this,e),this.init(t)}function rn(){}function Tt(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(Z.call(this,n),t===null&&(t=this.getFactory().createLinearRing()),e===null&&(e=[]),Z.hasNullElements(e))throw new h;if(t.isEmpty()&&Z.hasNonEmptyElements(e))throw new h;this.shell=t,this.holes=e}function ce(){var t=arguments[0],e=arguments[1];pt.call(this,t,e)}function qt(){if(arguments[0]instanceof v&&arguments[1]instanceof ft){var t=arguments[0],e=arguments[1];qt.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(K(arguments[0],U)&&arguments[1]instanceof ft){var n=arguments[0],r=arguments[1];gt.call(this,n,r),this.validateConstruction()}}function Kt(){var t=arguments[0],e=arguments[1];pt.call(this,t,e)}function Ee(){if(this.factory=null,this.isUserDataCopied=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.factory=t}}}function Pi(){}function zs(){}function Vs(){}function ks(){}function Ie(){if(this.dimension=3,this.coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];Ie.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(var n=0;e>n;n++)this.coordinates[n]=new v}else if(K(arguments[0],U)){var r=arguments[0];if(r===null)return this.coordinates=new Array(0).fill(null),null;this.dimension=r.getDimension(),this.coordinates=new Array(r.size()).fill(null);for(var n=0;n<this.coordinates.length;n++)this.coordinates[n]=r.getCoordinateCopy(n)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var s=arguments[0],o=arguments[1];this.coordinates=s,this.dimension=o,s===null&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var u=arguments[0],l=arguments[1];this.coordinates=new Array(u).fill(null),this.dimension=l;for(var n=0;u>n;n++)this.coordinates[n]=new v}}}function yn(){}function Ll(t,e){return t===e||t!==t&&e!==e}function Rl(t,e){function n(r){return this&&this.constructor===n?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,void(r&&Tl.call(this,r))):new n(r)}return e||kl(t,"size",{get:ql}),t.constructor=n,n.prototype=t,n}function Tl(t){this.add?t.forEach(this.add,this):t.forEach(function(e){this.set(e[0],e[1])},this)}function Pl(t){return this.has(t)&&(this._keys.splice(je,1),this._values.splice(je,1),this._itp.forEach(function(e){je<e[0]&&e[0]--})),je>-1}function Ol(t){return this.has(t)?this._values[je]:void 0}function Ml(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!==e||e===0)for(je=t.length;je--&&!Ll(t[je],e););else je=t.indexOf(e);return je>-1}function _l(t){return Ml.call(this,this._keys,t)}function bl(t,e){return this.has(t)?this._values[je]=e:this._values[this._keys.push(t)-1]=e,this}function Dl(){(this._keys||0).length=this._values.length=0}function Al(){return Us(this._itp,this._keys)}function Fl(){return Us(this._itp,this._values)}function Gl(){return Us(this._itp,this._keys,this._values)}function Us(t,e,n){var r=[0],s=!1;return t.push(r),{next:function(){var o,u=r[0];return!s&&u<e.length?(o=n?[e[u],n[u]]:e[u],r[0]++):(s=!0,t.splice(t.indexOf(r),1)),{done:s,value:o}}}}function ql(){return this._values.length}function Bl(t,e){for(var n=this.entries();;){var r=n.next();if(r.done)break;t.call(e,r.value[1],r.value[0],this)}}function sn(){this.map_=new Xl}function Ct(){if(this.modelType=null,this.scale=null,arguments.length===0)this.modelType=Ct.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof Ue){var t=arguments[0];this.modelType=t,t===Ct.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var e=arguments[0];this.modelType=Ct.FIXED,this.setScale(e)}else if(arguments[0]instanceof Ct){var n=arguments[0];this.modelType=n.modelType,this.scale=n.scale}}}function Ue(){this.name=null;var t=arguments[0];this.name=t,Ue.nameToTypeMap.put(t,this)}function ft(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,arguments.length===0)ft.call(this,new Ct,0);else if(arguments.length===1){if(K(arguments[0],tt)){var t=arguments[0];ft.call(this,new Ct,0,t)}else if(arguments[0]instanceof Ct){var e=arguments[0];ft.call(this,e,0,ft.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];ft.call(this,n,r,ft.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var s=arguments[0],o=arguments[1],u=arguments[2];this.precisionModel=s,this.coordinateSequenceFactory=u,this.SRID=o}}function Xs(t){this.geometryFactory=t||new ft}function $t(t){this.parser=new Xs(t)}function Pt(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new v,this.intPt[1]=new v,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function Wt(){Pt.apply(this)}function Un(){}function Xn(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t}function et(){}function lt(){if(this.p0=null,this.p1=null,arguments.length===0)lt.call(this,new v,new v);else if(arguments.length===1){var t=arguments[0];lt.call(this,t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(arguments.length===4){var r=arguments[0],s=arguments[1],o=arguments[2],u=arguments[3];lt.call(this,new v(r,s),new v(o,u))}}function wt(){if(this.matrix=null,arguments.length===0)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(Q.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];wt.call(this),this.set(t)}else if(arguments[0]instanceof wt){var e=arguments[0];wt.call(this),this.matrix[f.INTERIOR][f.INTERIOR]=e.matrix[f.INTERIOR][f.INTERIOR],this.matrix[f.INTERIOR][f.BOUNDARY]=e.matrix[f.INTERIOR][f.BOUNDARY],this.matrix[f.INTERIOR][f.EXTERIOR]=e.matrix[f.INTERIOR][f.EXTERIOR],this.matrix[f.BOUNDARY][f.INTERIOR]=e.matrix[f.BOUNDARY][f.INTERIOR],this.matrix[f.BOUNDARY][f.BOUNDARY]=e.matrix[f.BOUNDARY][f.BOUNDARY],this.matrix[f.BOUNDARY][f.EXTERIOR]=e.matrix[f.BOUNDARY][f.EXTERIOR],this.matrix[f.EXTERIOR][f.INTERIOR]=e.matrix[f.EXTERIOR][f.INTERIOR],this.matrix[f.EXTERIOR][f.BOUNDARY]=e.matrix[f.EXTERIOR][f.BOUNDARY],this.matrix[f.EXTERIOR][f.EXTERIOR]=e.matrix[f.EXTERIOR][f.EXTERIOR]}}}function on(){this.areaBasePt=null,this.triangleCent3=new v,this.areasum2=0,this.cg3=new v,this.lineCentSum=new v,this.totalLength=0,this.ptCount=0,this.ptCentSum=new v;var t=arguments[0];this.areaBasePt=null,this.add(t)}function Oi(t){this.message=t||""}function ie(){this.array_=[]}function lr(){this.treeSet=new re,this.list=new w}function an(){if(this.geomFactory=null,this.inputPts=null,arguments.length===1){var t=arguments[0];an.call(this,an.extractCoordinates(t),t.getFactory())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.inputPts=lr.filterCoordinates(e),this.geomFactory=n}}function hr(){this.origin=null;var t=arguments[0];this.origin=t}function ae(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function cr(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new lt,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof gt&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];cr.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var n=arguments[0],r=arguments[1];this.srcPts=n,this._isClosed=cr.isClosed(n),this.snapTolerance=r}}function se(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t}function Ar(){if(ae.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,arguments.length===2){var t=arguments[0],e=arguments[1];this.snapTolerance=t,this.snapPts=e}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.snapTolerance=n,this.snapPts=r,this.isSelfSnap=s}}function Ne(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function Fr(){this.commonCoord=null,this.ccFilter=new Mi}function Mi(){this.commonBitsX=new Ne,this.commonBitsY=new Ne}function Gr(){this.trans=null;var t=arguments[0];this.trans=t}function Yn(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries()}function Hn(){if(this.boundaryRule=ct.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];if(t===null)throw new h;this.boundaryRule=t}}}function gr(){}function qr(){}function Ys(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function _i(){}function un(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e}function Hs(){this._size=null,this.items=null,this._size=0,this.items=new w,this.items.add(null)}function wn(){}function bi(){}function oe(){if(this.childBoundables=new w,this.bounds=null,this.level=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.level=t}}}function ue(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=n,this._distance=this.distance()}function Bt(){if(this.root=null,this.built=!1,this.itemBoundables=new w,this.nodeCapacity=null,arguments.length===0)Bt.call(this,Bt.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];T.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t}}function zl(){}function Di(){}function Ft(){if(arguments.length===0)Ft.call(this,Ft.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];Bt.call(this,t)}}function Br(){var t=arguments[0];oe.call(this,t)}function le(){}function Ws(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.segString=t,this.coord=new v(e),this.segmentIndex=n,this.segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))}function Zs(){this.nodeMap=new Xt,this.edge=null;var t=arguments[0];this.edge=t}function za(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var t=arguments[0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode()}function Js(){}function Xe(){this.nodeList=new Zs(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function zr(){this.tempEnv1=new D,this.tempEnv2=new D,this.overlapSeg1=new lt,this.overlapSeg2=new lt}function Ks(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.pts=t,this.start=e,this.end=n,this.context=r}function yt(){}function De(){}function Vr(){}function Ai(){if(this.segInt=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setSegmentIntersector(t)}}}function Sn(){if(this.monoChains=new w,this.index=new Ft,this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,arguments.length!==0){if(arguments.length===1){var t=arguments[0];Ai.call(this,t)}}}function kr(){zr.apply(this),this.si=null;var t=arguments[0];this.si=t}function ge(){if(this.pt=null,arguments.length===1){var t=arguments[0];L.call(this,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];L.call(this,ge.msgWithCoord(e,n)),this.pt=new v(n)}}function Ur(){}function xn(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new w,this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null}function Xr(){this.li=new Wt,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t}function Wn(){this.nv=null;var t=arguments[0];this.nv=new Xr(Wn.toSegmentStrings(t))}function fr(){this.mapOp=null;var t=arguments[0];this.mapOp=t}function $(){}function fe(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[$.ON]=e}else if(arguments[0]instanceof fe){var n=arguments[0];if(this.init(n.location.length),n!==null)for(var r=0;r<this.location.length;r++)this.location[r]=n.location[r]}}else if(arguments.length===3){var s=arguments[0],o=arguments[1],u=arguments[2];this.init(3),this.location[$.ON]=s,this.location[$.LEFT]=o,this.location[$.RIGHT]=u}}function zt(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new fe(t),this.elt[1]=new fe(t)}else if(arguments[0]instanceof zt){var e=arguments[0];this.elt[0]=new fe(e.elt[0]),this.elt[1]=new fe(e.elt[1])}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.elt[0]=new fe(f.NONE),this.elt[1]=new fe(f.NONE),this.elt[n].setLocation(r)}else if(arguments.length===3){var s=arguments[0],o=arguments[1],u=arguments[2];this.elt[0]=new fe(s,o,u),this.elt[1]=new fe(s,o,u)}else if(arguments.length===4){var l=arguments[0],x=arguments[1],P=arguments[2],z=arguments[3];this.elt[0]=new fe(f.NONE,f.NONE,f.NONE),this.elt[1]=new fe(f.NONE,f.NONE,f.NONE),this.elt[l].setLocations(x,P,z)}}function dr(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new w,this.pts=new w,this.label=new zt(f.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new w,this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing()}function Fi(){var t=arguments[0],e=arguments[1];dr.call(this,t,e)}function Yr(){var t=arguments[0],e=arguments[1];dr.call(this,t,e)}function Ln(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.label=t}}}function ln(){Ln.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new zt(0,f.NONE)}function pr(){this.nodeMap=new Xt,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function Ye(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,arguments.length===1){var t=arguments[0];this.edge=t}else if(arguments.length===3){var e=arguments[0],n=arguments[1],r=arguments[2];Ye.call(this,e,n,r,null)}else if(arguments.length===4){var s=arguments[0],o=arguments[1],u=arguments[2],l=arguments[3];Ye.call(this,s),this.init(o,u),this.label=l}}function Zn(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(Ye.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}function Jn(){}function He(){if(this.edges=new w,this.nodes=null,this.edgeEndList=new w,arguments.length===0)this.nodes=new pr(new Jn);else if(arguments.length===1){var t=arguments[0];this.nodes=new pr(t)}}function Gi(){this.geometryFactory=null,this.shellList=new w;var t=arguments[0];this.geometryFactory=t}function js(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new w,this.resultLineList=new w;var t=arguments[0],e=arguments[1],n=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=n}function Qs(){this.op=null,this.geometryFactory=null,this.resultPointList=new w;var t=arguments[0],e=arguments[1];this.op=t,this.geometryFactory=e}function qi(){}function Ce(){this.geom=null;var t=arguments[0];this.geom=t}function Kn(){this.edgeMap=new Xt,this.edgeList=null,this.ptInAreaLocation=[f.NONE,f.NONE]}function Bi(){Kn.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function mr(){Jn.apply(this)}function $s(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function hn(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.eventType=hn.DELETE,this.xValue=t,this.insertEvent=e}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.eventType=hn.INSERT,this.label=n,this.xValue=r,this.obj=s}}function zi(){}function Rn(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=n}function Vi(){zi.apply(this),this.events=new w,this.nOverlaps=null}function jn(){this.min=c.POSITIVE_INFINITY,this.max=c.NEGATIVE_INFINITY}function to(){}function ki(){jn.apply(this),this.item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.min=t,this.max=e,this.item=n}function Ui(){jn.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2)}function eo(){this.leaves=new w,this.root=null,this.level=0}function te(){if(this.lines=null,this.isForcedToLineString=!1,arguments.length===1){var t=arguments[0];this.lines=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.lines=e,this.isForcedToLineString=n}}function Xi(){this.items=new w}function Hr(){this.index=null;var t=arguments[0];if(!K(t,rn))throw new h;this.index=new Hi(t)}function Yi(){this.counter=null;var t=arguments[0];this.counter=t}function Hi(){this.index=new eo;var t=arguments[0];this.init(t)}function no(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new v(t),this.segmentIndex=e,this.dist=n}function ro(){this.nodeMap=new Xt,this.edge=null;var t=arguments[0];this.edge=t}function Wr(){}function io(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new D,this.env2=new D;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Wr;this.startIndex=e.getChainStartIndices(this.pts)}function Ae(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;2>t;t++)for(var e=0;3>e;e++)this.depth[t][e]=Ae.NULL_VALUE}function Te(){if(Ln.apply(this),this.pts=null,this.env=null,this.eiList=new ro(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new Ae,this.depthDelta=0,arguments.length===1){var t=arguments[0];Te.call(this,t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.pts=e,this.label=n}}function de(){if(He.apply(this),this.parentGeom=null,this.lineEdgeMap=new sn,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new Hn,arguments.length===2){var t=arguments[0],e=arguments[1];de.call(this,t,e,ct.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.argIndex=n,this.parentGeom=r,this.boundaryNodeRule=s,r!==null&&this.add(r)}}function Tn(){if(this.li=new Wt,this.resultPrecisionModel=null,this.arg=null,arguments.length===1){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new de(0,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];Tn.call(this,e,n,ct.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2];r.getPrecisionModel().compareTo(s.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(s.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new de(0,r,o),this.arg[1]=new de(1,s,o)}}function Pn(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=Pn.orientation(t)}function Wi(){this.edges=new w,this.ocaMap=new Xt}function it(){this.ptLocator=new Hn,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new Wi,this.resultPolyList=new w,this.resultLineList=new w,this.resultPointList=new w;var t=arguments[0],e=arguments[1];Tn.call(this,t,e),this.graph=new He(new mr),this.geomFact=t.getFactory()}function Pe(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()}function Zt(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e}function Fe(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var t=arguments[0];this.factory=t.getFactory(),this.add(t)}function vr(){this.poly=null,this.centreY=null,this.hiY=c.MAX_VALUE,this.loY=-c.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=Fe.avg(this.loY,this.hiY)}function Zi(){this.centroid=null,this.minDistance=c.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),this.interiorPoint===null&&this.addEndpoints(t)}function Ji(){this.centroid=null,this.minDistance=c.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t)}function ht(){}function _t(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}function En(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var t=arguments[0];this.input=t}function ee(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new lt,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,arguments.length===1){var t=arguments[0];ee.call(this,t,!1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isConvex=n}}function On(){this.inputGeom=null,this.distanceTolerance=null;var t=arguments[0];this.inputGeom=t}function Zr(){ae.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}function cn(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function pe(){this._isMarked=!1;var t=arguments[0];cn.call(this,t)}function yr(){this.vertexMap=new sn}function Ki(){this._isStart=!1;var t=arguments[0];pe.call(this,t)}function ji(){yr.apply(this)}function Jr(){this.result=null,this.factory=null,this.graph=null,this.lines=new w,this.nodeEdgeStack=new ie,this.ringStartEdge=null,this.graph=new ji}function We(){this.items=new w,this.subnode=new Array(4).fill(null)}function Qn(){}function Vl(t,e){var n,r,s,o,u={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},l={32:8,64:11}[t];if(o||(n=0>e||0>1/e,isFinite(e)||(o=u[t],n&&(o.d+=1<<t/4-1),r=Math.pow(2,l)-1,s=0)),!o){for(r={32:127,64:1023}[t],s=Math.abs(e);s>=2;)r++,s/=2;for(;1>s&&r>0;)r--,s*=2;0>=r&&(s/=2),t===32&&r>254&&(o={d:n?255:127,c:128,b:0,a:0},r=Math.pow(2,l)-1,s=0)}return r}function Kr(){this.pt=new v,this.level=0,this.env=null;var t=arguments[0];this.computeKey(t)}function In(){We.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2}function Mn(){}function $n(){We.apply(this)}function _n(){this.root=null,this.minExtent=1,this.root=new $n}function so(t){this.geometryFactory=t||new ft}function Va(t){this.geometryFactory=t||new ft,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new so(this.geometryFactory)}function ka(){this.parser=new so(this.geometryFactory)}function Ua(t){this.geometryFactory=t||new ft,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Xs(this.geometryFactory)}function jr(t){return[t.x,t.y]}function Xa(t){this.geometryFactory=t||new ft}function Qr(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,arguments.length===2){var t=arguments[0],e=arguments[1];Qr.call(this,t,e,0,0)}else if(arguments.length===4){var n=arguments[0],r=arguments[1];this.noder=n,this.scaleFactor=r,this.isScaled=!this.isIntegerPrecision()}}function $r(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,arguments.length===1){var t=arguments[0];this.inputGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isClosedEndpointsInInterior=!n.isInBoundary(2)}}function Qi(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function xt(){if(this.quadrantSegments=xt.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=xt.CAP_ROUND,this.joinStyle=xt.JOIN_ROUND,this.mitreLimit=xt.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=xt.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(arguments.length===4){var r=arguments[0],s=arguments[1],o=arguments[2],u=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(s),this.setJoinStyle(o),this.setMitreLimit(u)}}}function oo(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function $i(){this.array_=[]}function ao(){this.finder=null,this.dirEdgeList=new w,this.nodes=new w,this.rightMostCoord=null,this.env=null,this.finder=new oo}function jt(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=et.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t}function ti(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new w}function Ze(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new lt,this.seg1=new lt,this.offset0=new lt,this.offset1=new lt,this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new Wt,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===xt.JOIN_ROUND&&(this.closingSegLengthFactor=Ze.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}function ei(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e}function ts(){this.subgraphs=null,this.seg=new lt,this.cga=new et;var t=arguments[0];this.subgraphs=t}function es(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new lt(t),this.leftDepth=e}function uo(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new w;var t=arguments[0],e=arguments[1],n=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=n}function ni(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this.li=t}function bn(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new Wi;var t=arguments[0];this.bufParams=t}function ri(){this.li=new Wt,this.segStrings=null;var t=arguments[0];this.segStrings=t}function xr(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=n,0>=e)throw new h;e!==1&&(this.pt=new v(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new v,this.p1Scaled=new v),this.initCorners(this.pt)}function Dn(){this.tempEnv1=new D,this.selectedSegment=new lt}function ns(){this.index=null;var t=arguments[0];this.index=t}function ii(){Dn.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=n}function lo(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new w}function ho(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new Wt,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()}function Qt(){if(this.argGeom=null,this.distance=null,this.bufParams=new xt,this.resultGeometry=null,this.saveException=null,arguments.length===1){var t=arguments[0];this.argGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.argGeom=e,this.bufParams=n}}function tr(){this.comps=null;var t=arguments[0];this.comps=t}function me(){if(this.component=null,this.segIndex=null,this.pt=null,arguments.length===2){var t=arguments[0],e=arguments[1];me.call(this,t,me.INSIDE_AREA,e)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.component=n,this.segIndex=r,this.pt=s}}function er(){this.pts=null;var t=arguments[0];this.pts=t}function si(){this.locations=null;var t=arguments[0];this.locations=t}function Ge(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new Hn,this.minDistanceLocation=null,this.minDistance=c.MAX_VALUE,arguments.length===2){var t=arguments[0],e=arguments[1];Ge.call(this,t,e,0)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=n,this.geom[1]=r,this.terminateDistance=s}}function co(){this.factory=null,this.directedEdges=new w,this.coordinates=null;var t=arguments[0];this.factory=t}function Oe(){this._isMarked=!1,this._isVisited=!1,this.data=null}function we(){Oe.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.from=t,this.to=e,this.edgeDirection=r,this.p0=t.getCoordinate(),this.p1=n;var s=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y;this.quadrant=yt.quadrant(s,o),this.angle=Math.atan2(o,s)}function oi(){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];we.call(this,t,e,n,r)}function Je(){if(Oe.apply(this),this.dirEdge=null,arguments.length!==0){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}}function go(){this.outEdges=new w,this.sorted=!1}function gn(){if(Oe.apply(this),this.pt=null,this.deStar=null,arguments.length===1){var t=arguments[0];gn.call(this,t,new go)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.pt=e,this.deStar=n}}function rs(){Je.apply(this),this.line=null;var t=arguments[0];this.line=t}function fo(){this.nodeMap=new Xt}function Er(){this.edges=new Jt,this.dirEdges=new Jt,this.nodeMap=new fo}function is(){Er.apply(this)}function po(){this.graph=new is,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function ai(){this.edgeRing=null,this.next=null,this.label=-1;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];we.call(this,t,e,n,r)}function ss(){Je.apply(this),this.line=null;var t=arguments[0];this.line=t}function qe(){this.factory=null,this.deList=new w,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this.factory=t}function mo(){}function Yt(){Er.apply(this),this.factory=null;var t=arguments[0];this.factory=t}function ve(){if(this.lineStringAdder=new os(this),this.graph=null,this.dangles=new w,this.cutEdges=new w,this.invalidRingLines=new w,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,arguments.length===0)ve.call(this,!1);else if(arguments.length===1){var t=arguments[0];this.extractOnlyPolygonal=t}}function os(){this.p=null;var t=arguments[0];this.p=t}function as(){}function ui(){if(this.edgeEnds=new w,arguments.length===1){var t=arguments[0];ui.call(this,null,t)}else if(arguments.length===2){var e=arguments[1];Ye.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new zt(e.getLabel())),this.insert(e)}}function us(){Kn.apply(this)}function ls(){var t=arguments[0],e=arguments[1];ln.call(this,t,e)}function li(){Jn.apply(this)}function hs(){this.li=new Wt,this.ptLocator=new Hn,this.arg=null,this.nodes=new pr(new li),this.im=null,this.isolatedEdges=new w,this.invalidPoint=null;var t=arguments[0];this.arg=t}function hi(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal()}function vo(){this.li=new Wt,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new v(t.getMinX(),t.getMinY()),this.diagUp1=new v(t.getMaxX(),t.getMaxY()),this.diagDown0=new v(t.getMinX(),t.getMaxY()),this.diagDown1=new v(t.getMaxX(),t.getMinY())}function An(){this._isDone=!1}function Ir(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()}function cs(){An.apply(this),this.rectEnv=null,this._intersects=!1;var t=arguments[0];this.rectEnv=t}function gs(){An.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()}function fs(){An.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new v,this.p1=new v;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new vo(this.rectEnv)}function Et(){if(this._relate=null,arguments.length===2){var t=arguments[0],e=arguments[1];Tn.call(this,t,e),this._relate=new hs(this.arg)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];Tn.call(this,n,r,s),this._relate=new hs(this.arg)}}function Se(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=Se.extractFactory(t),this.inputGeoms=t}function ci(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()}function Fn(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e}function Me(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,this.inputPolys===null&&(this.inputPolys=new w)}function Gn(){if(this.polygons=new w,this.lines=new w,this.points=new w,this.geomFact=null,arguments.length===1){if(K(arguments[0],b)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof Z){var e=arguments[0];this.extract(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.geomFact=r,this.extract(n)}}function gi(){this.geometryFactory=new ft,this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t}function Ke(){this.items=new w,this.subnode=[null,null]}function fn(){if(this.min=null,this.max=null,arguments.length===0)this.min=0,this.max=0;else if(arguments.length===1){var t=arguments[0];this.init(t.min,t.max)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.init(e,n)}}function fi(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t)}function Nn(){Ke.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2}function Nr(){Ke.apply(this)}function Cr(){this.root=null,this.minExtent=1,this.root=new Nr}function yo(){}function ds(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new fn;var t=arguments[0];this.ring=t,this.buildIndex()}function di(){Dn.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function xo(){this.nodes=new pr(new li)}function Eo(){this.li=new Wt,this.geomGraph=null,this.nodeGraph=new xo,this.invalidPoint=null;var t=arguments[0];this.geomGraph=t}function Io(){this.graph=null,this.rings=new w,this.totalEnv=new D,this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t}function mt(){if(this.errorType=null,this.pt=null,arguments.length===1){var t=arguments[0];mt.call(this,t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.errorType=e,n!==null&&(this.pt=n.copy())}}function _e(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t}function ps(){Ee.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var t=arguments[0],e=arguments[1];this.targetPM=t,this.removeCollapsed=e}function nr(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var t=arguments[0];this.targetPM=t}function pi(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new lt;var t=arguments[0];this.pts=t}function wr(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var t=arguments[0];this.inputGeom=t}function mi(){ae.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var t=arguments[0],e=arguments[1];this.isEnsureValidTopology=t,this.distanceTolerance=e}function vi(){if(this.parent=null,this.index=null,arguments.length===2){var t=arguments[0],e=arguments[1];vi.call(this,t,e,null,-1)}else if(arguments.length===4){var n=arguments[0],r=arguments[1],s=arguments[2],o=arguments[3];lt.call(this,n,r),this.parent=s,this.index=o}}function Cn(){if(this.parentLine=null,this.segs=null,this.resultSegs=new w,this.minimumSize=null,arguments.length===1){var t=arguments[0];Cn.call(this,t,2)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.parentLine=e,this.minimumSize=n,this.init()}}function Sr(){this.index=new _n}function No(){this.querySeg=null,this.items=new w;var t=arguments[0];this.querySeg=t}function yi(){this.li=new Wt,this.inputIndex=new Sr,this.outputIndex=new Sr,this.line=null,this.linePts=null,this.distanceTolerance=0;var t=arguments[0],e=arguments[1];this.inputIndex=t,this.outputIndex=e}function Co(){this.inputIndex=new Sr,this.outputIndex=new Sr,this.distanceTolerance=0}function rr(){this.inputGeom=null,this.lineSimplifier=new Co,this.linestringMap=null;var t=arguments[0];this.inputGeom=t}function xi(){ae.apply(this),this.linestringMap=null;var t=arguments[0];this.linestringMap=t}function ms(){this.tps=null;var t=arguments[0];this.tps=t}function Lr(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var t=arguments[0];this.seg=t,this.segLen=t.getLength()}function wo(){}function Ei(){}function Dt(){}function St(){if(this.p=null,arguments.length===1){var t=arguments[0];this.p=new v(t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p=new v(e,n)}else if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2];this.p=new v(r,s,o)}}function qn(){this._isOnConstraint=null,this.constraint=null;var t=arguments[0];St.call(this,t)}function Gt(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function Ii(){this.subdiv=null,this.isUsingTolerance=!1;var t=arguments[0];this.subdiv=t,this.isUsingTolerance=t.getTolerance()>0}function So(){}function vs(){this.subdiv=null,this.lastEdge=null;var t=arguments[0];this.subdiv=t,this.init()}function Rr(){if(this.seg=null,arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];L.call(this,t)}else if(arguments[0]instanceof lt){var e=arguments[0];L.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new lt(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];L.call(this,Rr.msgWithSpatial(n,r)),this.seg=new lt(r)}}function Tr(){}function Le(){this.visitedKey=0,this.quadEdges=new w,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new lt,this.triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this.tolerance=e,this.edgeCoincidenceTolerance=e/Le.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new vs(this)}function ys(){}function xs(){this.triList=new w}function Es(){this.triList=new w}function Is(){this.coordList=new A,this.triCoords=new w}function ir(){if(this.ls=null,this.data=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.ls=new lt(t,e)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.ls=new lt(n,r),this.data=s}else if(arguments.length===6){var o=arguments[0],u=arguments[1],l=arguments[2],x=arguments[3],P=arguments[4],z=arguments[5];ir.call(this,new v(o,u,l),new v(x,P,z))}else if(arguments.length===7){var k=arguments[0],j=arguments[1],nt=arguments[2],at=arguments[3],ut=arguments[4],bt=arguments[5],kt=arguments[6];ir.call(this,new v(k,j,nt),new v(at,ut,bt),kt)}}function Ni(){}function Ns(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.p=new v(t),this.left=null,this.right=null,this.count=1,this.data=e}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.p=new v(n,r),this.left=null,this.right=null,this.count=1,this.data=s}}function sr(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,arguments.length===0)sr.call(this,0);else if(arguments.length===1){var t=arguments[0];this.tolerance=t}}function Cs(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var t=arguments[0],e=arguments[1];this.p=t,this.tolerance=e}function Bn(){this.initialVertices=null,this.segVertices=null,this.segments=new w,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new Ei,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var t=arguments[0],e=arguments[1];this.initialVertices=new w(t),this.tolerance=e,this.kdt=new sr(e)}function ne(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function Pr(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new Xt}function Ci(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function ws(){}Array.prototype.fill||(Array.prototype.fill=function(t){for(var e=Object(this),n=parseInt(e.length,10),r=arguments[1],s=parseInt(r,10)||0,o=0>s?Math.max(n+s,0):Math.min(s,n),u=arguments[2],l=u===void 0?n:parseInt(u,10)||0,x=0>l?Math.max(n+l,0):Math.min(l,n);x>o;o++)e[o]=t;return e}),Number.isFinite=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!==t},Math.trunc=Math.trunc||function(t){return 0>t?Math.ceil(t):Math.floor(t)},a(d.prototype,{interfaces_:function(){return[]},getClass:function(){return d}}),d.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n},c.isNaN=function(t){return Number.isNaN(t)},c.doubleToLongBits=function(t){return t},c.longBitsToDouble=function(t){return t},c.isInfinite=function(t){return!Number.isFinite(t)},c.MAX_VALUE=Number.MAX_VALUE,C(_,L),a(_.prototype,{interfaces_:function(){return[]},getClass:function(){return _}}),a(T.prototype,{interfaces_:function(){return[]},getClass:function(){return T}}),T.shouldNeverReachHere=function(){if(arguments.length===0)T.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new _("Should never reach here"+(t!==null?": "+t:""))}},T.isTrue=function(){if(arguments.length===1){var t=arguments[0];T.isTrue(t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(!e)throw n===null?new _:new _(n)}},T.equals=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];T.equals(t,e,null)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];if(!r.equals(n))throw new _("Expected "+n+" but encountered "+r+(s!==null?": "+s:""))}},a(v.prototype,{setOrdinate:function(t,e){switch(t){case v.X:this.x=e;break;case v.Y:this.y=e;break;case v.Z:this.z=e;break;default:throw new h}},equals2D:function(){if(arguments.length===1){var t=arguments[0];return this.x!==t.x?!1:this.y===t.y}if(arguments.length===2){var e=arguments[0],n=arguments[1];return d.equalsWithTolerance(this.x,e.x,n)?!!d.equalsWithTolerance(this.y,e.y,n):!1}},getOrdinate:function(t){switch(t){case v.X:return this.x;case v.Y:return this.y;case v.Z:return this.z}throw new h},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||c.isNaN(this.z)&&c.isNaN(t.z))},equals:function(t){return t instanceof v?this.equals2D(t):!1},equalInZ:function(t,e){return d.equalsWithTolerance(this.z,t.z,e)},compareTo:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},clone:function(){try{var t=null;return t}catch(e){if(e instanceof CloneNotSupportedException)return T.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw e}finally{}},copy:function(){return new v(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+v.hashCode(this.x),t=37*t+v.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[g,m,y]},getClass:function(){return v}}),v.hashCode=function(){if(arguments.length===1){var t=arguments[0],e=c.doubleToLongBits(t);return Math.trunc(e^e>>>32)}},a(H.prototype,{compare:function(t,e){var n=t,r=e,s=H.compare(n.x,r.x);if(s!==0)return s;var o=H.compare(n.y,r.y);if(o!==0)return o;if(this.dimensionsToTest<=2)return 0;var u=H.compare(n.z,r.z);return u},interfaces_:function(){return[S]},getClass:function(){return H}}),H.compare=function(t,e){return e>t?-1:t>e?1:c.isNaN(t)?c.isNaN(e)?0:-1:c.isNaN(e)?1:0},v.DimensionalComparator=H,v.serialVersionUID=6683108902428367e3,v.NULL_ORDINATE=c.NaN,v.X=0,v.Y=1,v.Z=2,X.prototype.hasNext=function(){},X.prototype.next=function(){},X.prototype.remove=function(){},b.prototype.add=function(){},b.prototype.addAll=function(){},b.prototype.isEmpty=function(){},b.prototype.iterator=function(){},b.prototype.size=function(){},b.prototype.toArray=function(){},b.prototype.remove=function(){},E.prototype=new Error,E.prototype.name="IndexOutOfBoundsException",N.prototype=Object.create(b.prototype),N.prototype.constructor=N,N.prototype.get=function(){},N.prototype.set=function(){},N.prototype.isEmpty=function(){},R.prototype=new Error,R.prototype.name="NoSuchElementException",B.prototype=new Error,B.prototype.name="OperationNotSupported",w.prototype=Object.create(N.prototype),w.prototype.constructor=w,w.prototype.ensureCapacity=function(){},w.prototype.interfaces_=function(){return[N,b]},w.prototype.add=function(t){return this.array_.push(t),!0},w.prototype.clear=function(){this.array_=[]},w.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},w.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},w.prototype.iterator=function(){return new wi(this)},w.prototype.get=function(t){if(0>t||t>=this.size())throw new E;return this.array_[t]},w.prototype.isEmpty=function(){return this.array_.length===0},w.prototype.size=function(){return this.array_.length},w.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},w.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;r>n;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e};var wi=function(t){this.arrayList_=t,this.position_=0};wi.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new R;return this.arrayList_.get(this.position_++)},wi.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},wi.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},wi.prototype.remove=function(){throw new B},C(A,w),a(A.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(arguments.length===2){for(var t=arguments[0],e=arguments[1],n=!1,r=t.iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return w.prototype.addAll.apply(this,arguments)},clone:function(){for(var e=w.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},toCoordinateArray:function(){return this.toArray(A.coordArrayType)},add:function(){if(arguments.length===1){var t=arguments[0];w.prototype.add.call(this,t)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof v&&typeof arguments[1]=="boolean"){var r=arguments[0],s=arguments[1];if(!s&&this.size()>=1){var o=this.get(this.size()-1);if(o.equals2D(r))return null}w.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var u=arguments[0],l=arguments[1];return this.add(u,l),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var x=arguments[0],P=arguments[1],z=arguments[2];if(z)for(var k=0;k<x.length;k++)this.add(x[k],P);else for(var k=x.length-1;k>=0;k--)this.add(x[k],P);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof v){var j=arguments[0],nt=arguments[1],at=arguments[2];if(!at){var ut=this.size();if(ut>0){if(j>0){var bt=this.get(j-1);if(bt.equals2D(nt))return null}if(ut>j){var kt=this.get(j);if(kt.equals2D(nt))return null}}}w.prototype.add.call(this,j,nt)}}else if(arguments.length===4){var Ve=arguments[0],or=arguments[1],Rs=arguments[2],Ts=arguments[3],Ps=1;Rs>Ts&&(Ps=-1);for(var k=Rs;k!==Ts;k+=Ps)this.add(Ve[k],or);return!0}},closeRing:function(){this.size()>0&&this.add(new v(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return A}}),A.coordArrayType=new Array(0).fill(null),a(D.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof D))return!1;var e=t;return this.isNull()?e.isNull():this.maxx===e.getMaxX()&&this.maxy===e.getMaxY()&&this.minx===e.getMinX()&&this.miny===e.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new D;var e=this.minx>t.minx?this.minx:t.minx,n=this.miny>t.miny?this.miny:t.miny,r=this.maxx<t.maxx?this.maxx:t.maxx,s=this.maxy<t.maxy?this.maxy:t.maxy;return new D(e,r,n,s)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(arguments.length===1){if(arguments[0]instanceof v){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof D){var e=arguments[0];return this.isNull()||e.isNull()?!1:e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:n>=this.minx&&n<=this.maxx&&r>=this.miny&&r<=this.maxy}},intersects:function(){if(arguments.length===1){if(arguments[0]instanceof D){var t=arguments[0];return this.isNull()||t.isNull()?!1:!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)}if(arguments[0]instanceof v){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:!(n>this.maxx||n<this.minx||r>this.maxy||r<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(arguments.length===1){if(arguments[0]instanceof v){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof D){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.isNull()?(this.minx=n,this.maxx=n,this.miny=r,this.maxy=r):(n<this.minx&&(this.minx=n),n>this.maxx&&(this.maxx=n),r<this.miny&&(this.miny=r),r>this.maxy&&(this.maxy=r))}},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e>t?t:e},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this.minx<e.minx?-1:this.minx>e.minx?1:this.miny<e.miny?-1:this.miny>e.miny?1:this.maxx<e.maxx?-1:this.maxx>e.maxx?1:this.maxy<e.maxy?-1:this.maxy>e.maxy?1:0},translate:function(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},expandBy:function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=n,this.maxy+=n,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(arguments.length===1){if(arguments[0]instanceof D){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof v){var e=arguments[0];return this.covers(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},centre:function(){return this.isNull()?null:new v((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof v){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof D){var e=arguments[0];this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var s=arguments[0],o=arguments[1],u=arguments[2],l=arguments[3];o>s?(this.minx=s,this.maxx=o):(this.minx=o,this.maxx=s),l>u?(this.miny=u,this.maxy=l):(this.miny=l,this.maxy=u)}},getMaxY:function(){return this.maxy},distance:function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny?n=t.miny-this.maxy:this.miny>t.maxy&&(n=this.miny-t.maxy),e===0?n:n===0?e:Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+v.hashCode(this.minx),t=37*t+v.hashCode(this.maxx),t=37*t+v.hashCode(this.miny),t=37*t+v.hashCode(this.maxy)},interfaces_:function(){return[g,y]},getClass:function(){return D}}),D.intersects=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(arguments.length===4){var r=arguments[0],s=arguments[1],o=arguments[2],u=arguments[3],l=Math.min(o.x,u.x),x=Math.max(o.x,u.x),P=Math.min(r.x,s.x),z=Math.max(r.x,s.x);return P>x||l>z?!1:(l=Math.min(o.y,u.y),x=Math.max(o.y,u.y),P=Math.min(r.y,s.y),z=Math.max(r.y,s.y),P>x?!1:!(l>z))}},D.serialVersionUID=5873921885273102e3,C(G,V),a(G.prototype,{interfaces_:function(){return[]},getClass:function(){return G}}),a(f.prototype,{interfaces_:function(){return[]},getClass:function(){return f}}),f.toLocationSymbol=function(t){switch(t){case f.EXTERIOR:return"e";case f.BOUNDARY:return"b";case f.INTERIOR:return"i";case f.NONE:return"-"}throw new h},f.INTERIOR=0,f.BOUNDARY=1,f.EXTERIOR=2,f.NONE=-1,a(st.prototype,{interfaces_:function(){return[]},getClass:function(){return st}}),st.log10=function(t){var e=Math.log(t);return c.isInfinite(e)||c.isNaN(e)?e:e/st.LOG_10},st.min=function(t,e,n,r){var s=t;return s>e&&(s=e),s>n&&(s=n),s>r&&(s=r),s},st.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],n=arguments[2];return e>t?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],s=arguments[1],o=arguments[2];return s>r?s:r>o?o:r}},st.wrap=function(t,e){return 0>t?e- -t%e:t%e},st.max=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(arguments.length===4){var s=arguments[0],o=arguments[1],u=arguments[2],l=arguments[3],r=s;return o>r&&(r=o),u>r&&(r=u),l>r&&(r=l),r}},st.average=function(t,e){return(t+e)/2},st.LOG_10=Math.log(10),dt.prototype.append=function(t){this.str+=t},dt.prototype.setCharAt=function(t,e){return this.str.substr(0,t)+e+this.str.substr(t+1)},dt.prototype.toString=function(t){return this.str},O.prototype.intValue=function(){return this.value},O.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},O.isNaN=function(t){return Number.isNaN(t)},q.isWhitespace=function(t){return 32>=t&&t>=0||t==127},q.toUpperCase=function(t){return t.toUpperCase()},a(I.prototype,{le:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo},extractSignificantDigits:function(t,e){var n=this.abs(),r=I.magnitude(n.hi),s=I.TEN.pow(r);n=n.divide(s),n.gt(I.TEN)?(n=n.divide(I.TEN),r+=1):n.lt(I.ONE)&&(n=n.multiply(I.TEN),r-=1);for(var o=r+1,u=new dt,l=I.MAX_PRINT_DIGITS-1,x=0;l>=x;x++){t&&x===o&&u.append(".");var P=Math.trunc(n.hi);if(0>P)break;var z=!1,k=0;P>9?(z=!0,k="9"):k="0"+P,u.append(k),n=n.subtract(I.valueOf(P)).multiply(I.TEN),z&&n.selfAdd(I.TEN);var j=!0,nt=I.magnitude(n.hi);if(0>nt&&Math.abs(nt)>=l-x&&(j=!1),!j)break}return e[0]=r,u.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof I){var t=arguments[0];return this.add(t.negate())}if(typeof arguments[0]=="number"){var e=arguments[0];return this.add(-e)}},equals:function(){if(arguments.length===1){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo}},isZero:function(){return this.hi===0&&this.lo===0},selfSubtract:function(){if(arguments[0]instanceof I){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(arguments.length===1){if(arguments[0]instanceof I){var t=arguments[0];return this.selfDivide(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfDivide(e,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],s=null,o=null,u=null,l=null,x=null,P=null,z=null,k=null;return x=this.hi/n,P=I.SPLIT*x,s=P-x,k=I.SPLIT*n,s=P-s,o=x-s,u=k-n,z=x*n,u=k-u,l=n-u,k=s*u-z+s*l+o*u+o*l,P=(this.hi-z-k+this.lo-x*r)/n,k=x+P,this.hi=k,this.lo=x-k+P,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof I){var t=arguments[0],e=null,n=null,r=null,s=null,o=null,u=null,l=null,x=null;o=this.hi/t.hi,u=I.SPLIT*o,e=u-o,x=I.SPLIT*t.hi,e=u-e,n=o-e,r=x-t.hi,l=o*t.hi,r=x-r,s=t.hi-r,x=e*r-l+e*s+n*r+n*s,u=(this.hi-l-x+this.lo-o*t.lo)/t.hi,x=o+u;var P=x,z=o-x+u;return new I(P,z)}if(typeof arguments[0]=="number"){var k=arguments[0];return c.isNaN(k)?I.createNaN():I.copy(this).selfDivide(k,0)}},ge:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo},pow:function(t){if(t===0)return I.valueOf(1);var e=new I(this),n=I.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2===1&&n.selfMultiply(e),r/=2,r>0&&(e=e.sqr());else n=e;return 0>t?n.reciprocal():n},ceil:function(){if(this.isNaN())return I.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new I(t,e)},compareTo:function(t){var e=t;return this.hi<e.hi?-1:this.hi>e.hi?1:this.lo<e.lo?-1:this.lo>e.lo?1:0},rint:function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()},setValue:function(){if(arguments[0]instanceof I){var t=arguments[0];return this.init(t),this}if(typeof arguments[0]=="number"){var e=arguments[0];return this.init(e),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return I.valueOf(0);if(this.isNegative())return I.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,n=I.valueOf(e),r=this.subtract(n.sqr()),s=r.hi*(.5*t);return n.add(s)},selfAdd:function(){if(arguments.length===1){if(arguments[0]instanceof I){var t=arguments[0];return this.selfAdd(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0],n=null,r=null,s=null,o=null,u=null,l=null;return s=this.hi+e,u=s-this.hi,o=s-u,o=e-u+(this.hi-o),l=o+this.lo,n=s+l,r=l+(s-n),this.hi=n+r,this.lo=r+(n-this.hi),this}}else if(arguments.length===2){var x=arguments[0],P=arguments[1],n=null,r=null,z=null,k=null,s=null,o=null,u=null,l=null;s=this.hi+x,z=this.lo+P,u=s-this.hi,l=z-this.lo,o=s-u,k=z-l,o=x-u+(this.hi-o),k=P-l+(this.lo-k),u=o+z,n=s+u,r=u+(s-n),u=k+r;var j=n+u,nt=u+(n-j);return this.hi=j,this.lo=nt,this}},selfMultiply:function(){if(arguments.length===1){if(arguments[0]instanceof I){var t=arguments[0];return this.selfMultiply(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfMultiply(e,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],s=null,o=null,u=null,l=null,x=null,P=null;x=I.SPLIT*this.hi,s=x-this.hi,P=I.SPLIT*n,s=x-s,o=this.hi-s,u=P-n,x=this.hi*n,u=P-u,l=n-u,P=s*u-x+s*l+o*u+o*l+(this.hi*r+this.lo*n);var z=x+P;s=x-z;var k=P+s;return this.hi=z,this.lo=k,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return I.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new I(t,e)},negate:function(){return this.isNaN()?this:new I(-this.hi,-this.lo)},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}finally{}},multiply:function(){if(arguments[0]instanceof I){var t=arguments[0];return t.isNaN()?I.createNaN():I.copy(this).selfMultiply(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return c.isNaN(e)?I.createNaN():I.copy(this).selfMultiply(e,0)}},isNaN:function(){return c.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var t=I.magnitude(this.hi);return t>=-3&&20>=t?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,s=n;if(n.charAt(0)===".")s="0"+n;else if(0>r)s="0."+I.stringOfChar("0",-r)+n;else if(n.indexOf(".")===-1){var o=r-n.length,u=I.stringOfChar("0",o);s=n+u+".0"}return this.isNegative()?"-"+s:s},reciprocal:function(){var t=null,e=null,n=null,r=null,s=null,o=null,u=null,l=null;s=1/this.hi,o=I.SPLIT*s,t=o-s,l=I.SPLIT*this.hi,t=o-t,e=s-t,n=l-this.hi,u=s*this.hi,n=l-n,r=this.hi-n,l=t*n-u+t*r+e*n+e*r,o=(1-u-l-s*this.lo)/this.hi;var x=s+o,P=s-x+o;return new I(x,P)},toSciNotation:function(){if(this.isZero())return I.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=I.SCI_NOT_EXPONENT_CHAR+e[0];if(n.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+n);var s="";n.length>1&&(s=n.substring(1));var o=n.charAt(0)+"."+s;return this.isNegative()?"-"+o+r:o+r},abs:function(){return this.isNaN()?I.NaN:this.isNegative()?this.negate():new I(this)},isPositive:function(){return this.hi>0||this.hi===0&&this.lo>0},lt:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo},add:function(){if(arguments[0]instanceof I){var t=arguments[0];return I.copy(this).selfAdd(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return I.copy(this).selfAdd(e)}},init:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.hi=t,this.lo=0}else if(arguments[0]instanceof I){var e=arguments[0];this.hi=e.hi,this.lo=e.lo}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.hi=n,this.lo=r}},gt:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo},isNegative:function(){return this.hi<0||this.hi===0&&this.lo<0},trunc:function(){return this.isNaN()?I.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0},interfaces_:function(){return[y,g,m]},getClass:function(){return I}}),I.sqr=function(t){return I.valueOf(t).selfMultiply(t)},I.valueOf=function(){if(typeof arguments[0]=="string"){var t=arguments[0];return I.parse(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return new I(e)}},I.sqrt=function(t){return I.valueOf(t).sqrt()},I.parse=function(t){for(var e=0,n=t.length;q.isWhitespace(t.charAt(e));)e++;var r=!1;if(n>e){var s=t.charAt(e);s!=="-"&&s!=="+"||(e++,s==="-"&&(r=!0))}for(var o=new I,u=0,l=0,x=0;!(e>=n);){var P=t.charAt(e);if(e++,q.isDigit(P)){var z=P-"0";o.selfMultiply(I.TEN),o.selfAdd(z),u++}else{if(P!=="."){if(P==="e"||P==="E"){var k=t.substring(e);try{x=O.parseInt(k)}catch(ut){throw ut instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+k+" in string "+t):ut}finally{}break}throw new NumberFormatException("Unexpected character '"+P+"' at position "+e+" in string "+t)}l=u}}var j=o,nt=u-l-x;if(nt===0)j=o;else if(nt>0){var at=I.TEN.pow(nt);j=o.divide(at)}else if(0>nt){var at=I.TEN.pow(-nt);j=o.multiply(at)}return r?j.negate():j},I.createNaN=function(){return new I(c.NaN,c.NaN)},I.copy=function(t){return new I(t)},I.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n)),s=Math.pow(10,r);return e>=10*s&&(r+=1),r},I.stringOfChar=function(t,e){for(var n=new dt,r=0;e>r;r++)n.append(t);return n.toString()},I.PI=new I(3.141592653589793,12246467991473532e-32),I.TWO_PI=new I(6.283185307179586,24492935982947064e-32),I.PI_2=new I(1.5707963267948966,6123233995736766e-32),I.E=new I(2.718281828459045,14456468917292502e-32),I.NaN=new I(c.NaN,c.NaN),I.EPS=123259516440783e-46,I.SPLIT=134217729,I.MAX_PRINT_DIGITS=32,I.TEN=I.valueOf(10),I.ONE=I.valueOf(1),I.SCI_NOT_EXPONENT_CHAR="E",I.SCI_NOT_ZERO="0.0E0",a(Y.prototype,{interfaces_:function(){return[]},getClass:function(){return Y}}),Y.orientationIndex=function(t,e,n){var r=Y.orientationIndexFilter(t,e,n);if(1>=r)return r;var s=I.valueOf(e.x).selfAdd(-t.x),o=I.valueOf(e.y).selfAdd(-t.y),u=I.valueOf(n.x).selfAdd(-e.x),l=I.valueOf(n.y).selfAdd(-e.y);return s.selfMultiply(l).selfSubtract(o.selfMultiply(u)).signum()},Y.signOfDet2x2=function(t,e,n,r){var s=t.multiply(r).selfSubtract(e.multiply(n));return s.signum()},Y.intersection=function(t,e,n,r){var s=I.valueOf(r.y).selfSubtract(n.y).selfMultiply(I.valueOf(e.x).selfSubtract(t.x)),o=I.valueOf(r.x).selfSubtract(n.x).selfMultiply(I.valueOf(e.y).selfSubtract(t.y)),u=s.subtract(o),l=I.valueOf(r.x).selfSubtract(n.x).selfMultiply(I.valueOf(t.y).selfSubtract(n.y)),x=I.valueOf(r.y).selfSubtract(n.y).selfMultiply(I.valueOf(t.x).selfSubtract(n.x)),P=l.subtract(x),z=P.selfDivide(u).doubleValue(),k=I.valueOf(t.x).selfAdd(I.valueOf(e.x).selfSubtract(t.x).selfMultiply(z)).doubleValue(),j=I.valueOf(e.x).selfSubtract(t.x).selfMultiply(I.valueOf(t.y).selfSubtract(n.y)),nt=I.valueOf(e.y).selfSubtract(t.y).selfMultiply(I.valueOf(t.x).selfSubtract(n.x)),at=j.subtract(nt),ut=at.selfDivide(u).doubleValue(),bt=I.valueOf(n.y).selfAdd(I.valueOf(r.y).selfSubtract(n.y).selfMultiply(ut)).doubleValue();return new v(k,bt)},Y.orientationIndexFilter=function(t,e,n){var r=null,s=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),u=s-o;if(s>0){if(0>=o)return Y.signum(u);r=s+o}else{if(!(0>s)||o>=0)return Y.signum(u);r=-s-o}var l=Y.DP_SAFE_EPSILON*r;return u>=l||-u>=l?Y.signum(u):2},Y.signum=function(t){return t>0?1:0>t?-1:0},Y.DP_SAFE_EPSILON=1e-15,a(U.prototype,{setOrdinate:function(t,e,n){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},clone:function(){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[m]},getClass:function(){return U}}),U.X=0,U.Y=1,U.Z=2,U.M=3,W.arraycopy=function(t,e,n,r,s){for(var o=0,u=e;e+s>u;u++)n[r+o]=t[u],o++},W.getProperty=function(t){return{"line.separator":`
`}[t]},a(J.prototype,{getY:function(){var t=this.y/this.w;if(c.isNaN(t)||c.isInfinite(t))throw new G;return t},getX:function(){var t=this.x/this.w;if(c.isNaN(t)||c.isInfinite(t))throw new G;return t},getCoordinate:function(){var t=new v;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return J}}),J.intersection=function(t,e,n,r){var s=t.y-e.y,o=e.x-t.x,u=t.x*e.y-e.x*t.y,l=n.y-r.y,x=r.x-n.x,P=n.x*r.y-r.x*n.y,z=o*P-x*u,k=l*u-s*P,j=s*x-l*o,nt=z/j,at=k/j;if(c.isNaN(nt)||c.isInfinite(nt)||c.isNaN(at)||c.isInfinite(at))throw new G;return new v(nt,at)},a(tt.prototype,{create:function(){arguments.length===1&&(arguments[0]instanceof Array||K(arguments[0],U))},interfaces_:function(){return[]},getClass:function(){return tt}}),a(rt.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return rt}}),a(Z.prototype,{isGeometryCollection:function(){return this.getSortIndex()===Z.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(arguments.length===1){if(arguments[0]instanceof Z){var t=arguments[0];return t===null?!1:this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof Z))return!1;var n=e;return this.equalsExact(n)}}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply(Z.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(t){return t===null?!1:this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(arguments.length===1){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=n;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,r)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getSortIndex()===Z.SORTINDEX_GEOMETRYCOLLECTION)throw new h},equal:function(t,e,n){return n===0?t.equals(e):t.distance(e)<=n},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return this.envelope===null&&(this.envelope=this.computeEnvelopeInternal()),new D(this.envelope)},setSRID:function(t){this.SRID=t},setUserData:function(t){this.userData=t},compare:function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var s=n.next(),o=r.next(),u=s.compareTo(o);if(u!==0)return u}return n.hasNext()?1:r.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===Z.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===Z.SORTINDEX_MULTIPOINT||this.getSortIndex()===Z.SORTINDEX_MULTILINESTRING||this.getSortIndex()===Z.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[m,g,y]},getClass:function(){return Z}}),Z.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},Z.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(t[e]===null)return!0;return!1},Z.serialVersionUID=8763622679187377e3,Z.SORTINDEX_POINT=0,Z.SORTINDEX_MULTIPOINT=1,Z.SORTINDEX_LINESTRING=2,Z.SORTINDEX_LINEARRING=3,Z.SORTINDEX_MULTILINESTRING=4,Z.SORTINDEX_POLYGON=5,Z.SORTINDEX_MULTIPOLYGON=6,Z.SORTINDEX_GEOMETRYCOLLECTION=7,Z.geometryChangedFilter={interfaces_:function(){return[rt]},filter:function(t){t.geometryChangedAction()}},a(Nt.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return Nt}}),a(ct.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return ct}}),a(It.prototype,{isInBoundary:function(t){return t%2===1},interfaces_:function(){return[ct]},getClass:function(){return It}}),a(Ht.prototype,{isInBoundary:function(t){return t>0},interfaces_:function(){return[ct]},getClass:function(){return Ht}}),a(Ot.prototype,{isInBoundary:function(t){return t>1},interfaces_:function(){return[ct]},getClass:function(){return Ot}}),a($e.prototype,{isInBoundary:function(t){return t===1},interfaces_:function(){return[ct]},getClass:function(){return $e}}),ct.Mod2BoundaryNodeRule=It,ct.EndPointBoundaryNodeRule=Ht,ct.MultiValentEndPointBoundaryNodeRule=Ot,ct.MonoValentEndPointBoundaryNodeRule=$e,ct.MOD2_BOUNDARY_RULE=new It,ct.ENDPOINT_BOUNDARY_RULE=new Ht,ct.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new Ot,ct.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new $e,ct.OGC_SFS_BOUNDARY_RULE=ct.MOD2_BOUNDARY_RULE,a(ot.prototype,{interfaces_:function(){return[]},getClass:function(){return ot}}),ot.isRing=function(t){return t.length<4?!1:!!t[0].equals2D(t[t.length-1])},ot.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(ot.indexOf(r,e)<0)return r}return null},ot.scroll=function(t,e){var n=ot.indexOf(e,t);if(0>n)return null;var r=new Array(t.length).fill(null);W.arraycopy(t,n,r,0,t.length-n),W.arraycopy(t,0,r,t.length-n,n),W.arraycopy(r,0,t,0,t.length)},ot.equals=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(t===null||e===null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2];if(r===s)return!0;if(r===null||s===null||r.length!==s.length)return!1;for(var n=0;n<r.length;n++)if(o.compare(r[n],s[n])!==0)return!1;return!0}},ot.intersection=function(t,e){for(var n=new A,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},ot.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},ot.removeRepeatedPoints=function(t){if(!ot.hasRepeatedPoints(t))return t;var e=new A(t,!1);return e.toCoordinateArray()},ot.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;n>=r;r++){var s=t[r];t[r]=t[e-r],t[e-r]=s}},ot.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)t[n]!==null&&e++;var r=new Array(e).fill(null);if(e===0)return r;for(var s=0,n=0;n<t.length;n++)t[n]!==null&&(r[s++]=t[n]);return r},ot.copyDeep=function(){if(arguments.length===1){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new v(t[n]);return e}if(arguments.length===5)for(var r=arguments[0],s=arguments[1],o=arguments[2],u=arguments[3],l=arguments[4],n=0;l>n;n++)o[u+n]=new v(r[s+n])},ot.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],s=e[t.length-n-1];if(r.compareTo(s)!==0)return!1}return!0},ot.envelope=function(t){for(var e=new D,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},ot.toCoordinateArray=function(t){return t.toArray(ot.coordArrayType)},ot.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},ot.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},ot.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(r!==0)return r}return 1},ot.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(r!==0)return r;n++}return n<e.length?-1:n<t.length?1:0},ot.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(e===null||e.compareTo(t[n])>0)&&(e=t[n]);return e},ot.extract=function(t,e,n){e=st.clamp(e,0,t.length),n=st.clamp(n,-1,t.length);var r=n-e+1;0>n&&(r=0),e>=t.length&&(r=0),e>n&&(r=0);var s=new Array(r).fill(null);if(r===0)return s;for(var o=0,u=e;n>=u;u++)s[o++]=t[u];return s},a(ar.prototype,{compare:function(t,e){var n=t,r=e;return ot.compare(n,r)},interfaces_:function(){return[S]},getClass:function(){return ar}}),a(ur.prototype,{compare:function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;var s=ot.compare(n,r),o=ot.isEqualReversed(n,r);return o?0:s},OLDcompare:function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;for(var s=ot.increasingDirection(n),o=ot.increasingDirection(r),u=s>0?0:n.length-1,l=o>0?0:n.length-1,x=0;x<n.length;x++){var P=n[u].compareTo(r[l]);if(P!==0)return P;u+=s,l+=o}return 0},interfaces_:function(){return[S]},getClass:function(){return ur}}),ot.ForwardComparator=ar,ot.BidirectionalComparator=ur,ot.coordArrayType=new Array(0).fill(null),vt.prototype.get=function(){},vt.prototype.put=function(){},vt.prototype.size=function(){},vt.prototype.values=function(){},vt.prototype.entrySet=function(){},Rt.prototype=new vt,Li.prototype=new b,Li.prototype.contains=function(){},Jt.prototype=new Li,Jt.prototype.contains=function(t){for(var e=0,n=this.array_.length;n>e;e++){var r=this.array_[e];if(r===t)return!0}return!1},Jt.prototype.add=function(t){return this.contains(t)?!1:(this.array_.push(t),!0)},Jt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Jt.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},Jt.prototype.size=function(){return this.array_.length},Jt.prototype.isEmpty=function(){return this.array_.length===0},Jt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},Jt.prototype.iterator=function(){return new Ss(this)};var Ss=function(t){this.hashSet_=t,this.position_=0};Ss.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new R;return this.hashSet_.array_[this.position_++]},Ss.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},Ss.prototype.remove=function(){throw new B};var dn=0,zn=1;Xt.prototype=new Rt,Xt.prototype.get=function(t){for(var e=this.root_;e!==null;){var n=t.compareTo(e.key);if(0>n)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},Xt.prototype.put=function(t,e){if(this.root_===null)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:dn,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,s=this.root_;do if(n=s,r=t.compareTo(s.key),0>r)s=s.left;else{if(!(r>0)){var o=s.value;return s.value=e,o}s=s.right}while(s!==null);var u={key:t,left:null,right:null,value:e,parent:n,color:dn,getValue:function(){return this.value},getKey:function(){return this.key}};return 0>r?n.left=u:n.right=u,this.fixAfterInsertion(u),this.size_++,null},Xt.prototype.fixAfterInsertion=function(t){for(t.color=zn;t!=null&&t!=this.root_&&t.parent.color==zn;)if(Mt(t)==qs(Mt(Mt(t)))){var e=qa(Mt(Mt(t)));Ga(e)==zn?(tn(Mt(t),dn),tn(e,dn),tn(Mt(Mt(t)),zn),t=Mt(Mt(t))):(t==qa(Mt(t))&&(t=Mt(t),this.rotateLeft(t)),tn(Mt(t),dn),tn(Mt(Mt(t)),zn),this.rotateRight(Mt(Mt(t))))}else{var e=qs(Mt(Mt(t)));Ga(e)==zn?(tn(Mt(t),dn),tn(e,dn),tn(Mt(Mt(t)),zn),t=Mt(Mt(t))):(t==qs(Mt(t))&&(t=Mt(t),this.rotateRight(t)),tn(Mt(t),dn),tn(Mt(Mt(t)),zn),this.rotateLeft(Mt(Mt(t))))}this.root_.color=dn},Xt.prototype.values=function(){var t=new w,e=this.getFirstEntry();if(e!==null)for(t.add(e.value);(e=Xt.successor(e))!==null;)t.add(e.value);return t},Xt.prototype.entrySet=function(){var t=new Jt,e=this.getFirstEntry();if(e!==null)for(t.add(e);(e=Xt.successor(e))!==null;)t.add(e);return t},Xt.prototype.rotateLeft=function(t){if(t!=null){var e=t.right;t.right=e.left,e.left!=null&&(e.left.parent=t),e.parent=t.parent,t.parent==null?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},Xt.prototype.rotateRight=function(t){if(t!=null){var e=t.left;t.left=e.right,e.right!=null&&(e.right.parent=t),e.parent=t.parent,t.parent==null?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},Xt.prototype.getFirstEntry=function(){var t=this.root_;if(t!=null)for(;t.left!=null;)t=t.left;return t},Xt.successor=function(t){if(t===null)return null;if(t.right!==null){for(var e=t.right;e.left!==null;)e=e.left;return e}for(var e=t.parent,n=t;e!==null&&n===e.right;)n=e,e=e.parent;return e},Xt.prototype.size=function(){return this.size_},a(Ri.prototype,{interfaces_:function(){return[]},getClass:function(){return Ri}}),Ba.prototype=new Li,re.prototype=new Ba,re.prototype.contains=function(t){for(var e=0,n=this.array_.length;n>e;e++){var r=this.array_[e];if(r.compareTo(t)===0)return!0}return!1},re.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;n>e;e++){var r=this.array_[e];if(r.compareTo(t)===1)return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},re.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},re.prototype.remove=function(t){throw new B},re.prototype.size=function(){return this.array_.length},re.prototype.isEmpty=function(){return this.array_.length===0},re.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},re.prototype.iterator=function(){return new Ls(this)};var Ls=function(t){this.treeSet_=t,this.position_=0};Ls.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new R;return this.treeSet_.array_[this.position_++]},Ls.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},Ls.prototype.remove=function(){throw new B},en.sort=function(){var t,e,n,r,s=arguments[0];if(arguments.length===1)return r=function(u,l){return u.compareTo(l)},void s.sort(r);if(arguments.length===2)n=arguments[1],r=function(u,l){return n.compare(u,l)},s.sort(r);else{if(arguments.length===3){e=s.slice(arguments[1],arguments[2]),e.sort();var o=s.slice(0,arguments[1]).concat(e,s.slice(arguments[2],s.length));for(s.splice(0,s.length),t=0;t<o.length;t++)s.push(o[t]);return}if(arguments.length===4){for(e=s.slice(arguments[1],arguments[2]),n=arguments[3],r=function(u,l){return n.compare(u,l)},e.sort(r),o=s.slice(0,arguments[1]).concat(e,s.slice(arguments[2],s.length)),s.splice(0,s.length),t=0;t<o.length;t++)s.push(o[t]);return}}},en.asList=function(t){for(var e=new w,n=0,r=t.length;r>n;n++)e.add(t[n]);return e},a(Q.prototype,{interfaces_:function(){return[]},getClass:function(){return Q}}),Q.toDimensionSymbol=function(t){switch(t){case Q.FALSE:return Q.SYM_FALSE;case Q.TRUE:return Q.SYM_TRUE;case Q.DONTCARE:return Q.SYM_DONTCARE;case Q.P:return Q.SYM_P;case Q.L:return Q.SYM_L;case Q.A:return Q.SYM_A}throw new h},Q.toDimensionValue=function(t){switch(q.toUpperCase(t)){case Q.SYM_FALSE:return Q.FALSE;case Q.SYM_TRUE:return Q.TRUE;case Q.SYM_DONTCARE:return Q.DONTCARE;case Q.SYM_P:return Q.P;case Q.SYM_L:return Q.L;case Q.SYM_A:return Q.A}throw new h},Q.P=0,Q.L=1,Q.A=2,Q.FALSE=-1,Q.TRUE=-2,Q.DONTCARE=-3,Q.SYM_FALSE="F",Q.SYM_TRUE="T",Q.SYM_DONTCARE="*",Q.SYM_P="0",Q.SYM_L="1",Q.SYM_A="2",a(nn.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return nn}}),a(kn.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return kn}}),C(pt,Z),a(pt.prototype,{computeEnvelopeInternal:function(){for(var t=new D,e=0;e<this.geometries.length;e++)t.expandToInclude(this.geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this.geometries[t]},getSortIndex:function(){return Z.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this.geometries.length;n++)for(var r=this.geometries[n].getCoordinates(),s=0;s<r.length;s++)e++,t[e]=r[s];return t},getArea:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getArea();return t},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.geometries.length!==n.geometries.length)return!1;for(var r=0;r<this.geometries.length;r++)if(!this.geometries[r].equalsExact(n.geometries[r],e))return!1;return!0}return Z.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<this.geometries.length;t++)this.geometries[t].normalize();en.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=Q.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getBoundaryDimension());return t},getDimension:function(){for(var t=Q.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=new re(en.asList(this.geometries)),n=new re(en.asList(t.geometries));return this.compare(e,n)}if(arguments.length===2){for(var r=arguments[0],s=arguments[1],o=r,u=this.getNumGeometries(),l=o.getNumGeometries(),x=0;u>x&&l>x;){var P=this.getGeometryN(x),z=o.getGeometryN(x),k=P.compareToSameClass(z,s);if(k!==0)return k;x++}return u>x?1:l>x?-1:0}},apply:function(){if(K(arguments[0],Nt))for(var t=arguments[0],e=0;e<this.geometries.length;e++)this.geometries[e].apply(t);else if(K(arguments[0],kn)){var n=arguments[0];if(this.geometries.length===0)return null;for(var e=0;e<this.geometries.length&&(this.geometries[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(K(arguments[0],nn)){var r=arguments[0];r.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(r)}else if(K(arguments[0],rt)){var s=arguments[0];s.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(s)}},getBoundary:function(){return this.checkNotGeometryCollection(this),T.shouldNeverReachHere(),null},clone:function(){var t=Z.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++)t.geometries[e]=this.geometries[e].clone();return t},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new pt(t,this.factory)},isEmpty:function(){for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return pt}}),pt.serialVersionUID=-5694727726395021e3,C(he,pt),a(he.prototype,{getSortIndex:function(){return Z.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?pt.prototype.equalsExact.call(this,t,e):!1}return pt.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?Q.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[t-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new vn(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new he(t,this.factory)},interfaces_:function(){return[Ri]},getClass:function(){return he}}),he.serialVersionUID=8166665132445434e3,a(vn.prototype,{boundaryMultiLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return e.length===1?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPointFromCoords(e)},getBoundary:function(){return this.geom instanceof gt?this.boundaryLineString(this.geom):this.geom instanceof he?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var e=this.bnRule.isInBoundary(2);return e?t.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new w;this.endpointMap=new Xt;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);r.getNumPoints()!==0&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var s=this.endpointMap.entrySet().iterator();s.hasNext();){var o=s.next(),u=o.getValue(),l=u.count;this.bnRule.isInBoundary(l)&&e.add(o.getKey())}return ot.toCoordinateArray(e)},addEndpoint:function(t){var e=this.endpointMap.get(t);e===null&&(e=new Bs,this.endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return vn}}),vn.getBoundary=function(){if(arguments.length===1){var t=arguments[0],e=new vn(t);return e.getBoundary()}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=new vn(n,r);return e.getBoundary()}},a(Bs.prototype,{interfaces_:function(){return[]},getClass:function(){return Bs}}),a(xe.prototype,{interfaces_:function(){return[]},getClass:function(){return xe}}),xe.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;e>r;r++)n[r]=t;return new String(n)},xe.getStackTrace=function(){if(arguments.length===1){var t=arguments[0],e=new Cl,n=new El;return t.printStackTrace(n),e.toString()}if(arguments.length===2){for(var r=arguments[0],s=arguments[1],o="",u=new Il(xe.getStackTrace(r)),l=new Sl,x=0;s>x;x++)try{o+=l.readLine()+xe.NEWLINE}catch(P){if(!(P instanceof wl))throw P;T.shouldNeverReachHere()}finally{}return o}},xe.split=function(t,e){for(var n=e.length,r=new w,s=""+t,o=s.indexOf(e);o>=0;){var u=s.substring(0,o);r.add(u),s=s.substring(o+n),o=s.indexOf(e)}s.length>0&&r.add(s);for(var l=new Array(r.size()).fill(null),x=0;x<l.length;x++)l[x]=r.get(x);return l},xe.toString=function(){if(arguments.length===1){var t=arguments[0];return xe.SIMPLE_ORDINATE_FORMAT.format(t)}},xe.spaces=function(t){return xe.chars(" ",t)},xe.NEWLINE=W.getProperty("line.separator"),xe.SIMPLE_ORDINATE_FORMAT=new Nl,a(Vt.prototype,{interfaces_:function(){return[]},getClass:function(){return Vt}}),Vt.copyCoord=function(t,e,n,r){for(var s=Math.min(t.getDimension(),n.getDimension()),o=0;s>o;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},Vt.isRing=function(t){var e=t.size();return e===0?!0:3>=e?!1:t.getOrdinate(0,U.X)===t.getOrdinate(e-1,U.X)&&t.getOrdinate(0,U.Y)===t.getOrdinate(e-1,U.Y)},Vt.isEqual=function(t,e){var n=t.size(),r=e.size();if(n!==r)return!1;for(var s=Math.min(t.getDimension(),e.getDimension()),o=0;n>o;o++)for(var u=0;s>u;u++){var l=t.getOrdinate(o,u),x=e.getOrdinate(o,u);if(!(t.getOrdinate(o,u)===e.getOrdinate(o,u)||c.isNaN(l)&&c.isNaN(x)))return!1}return!0},Vt.extend=function(t,e,n){var r=t.create(n,e.getDimension()),s=e.size();if(Vt.copy(e,0,r,0,s),s>0)for(var o=s;n>o;o++)Vt.copy(e,s-1,r,o,1);return r},Vt.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;n>=r;r++)Vt.swap(t,r,e-r)},Vt.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var s=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,s)}},Vt.copy=function(t,e,n,r,s){for(var o=0;s>o;o++)Vt.copyCoord(t,e+o,n,r+o)},Vt.toString=function(){if(arguments.length===1){var t=arguments[0],e=t.size();if(e===0)return"()";var n=t.getDimension(),r=new dt;r.append("(");for(var s=0;e>s;s++){s>0&&r.append(" ");for(var o=0;n>o;o++)o>0&&r.append(","),r.append(xe.toString(t.getOrdinate(s,o)))}return r.append(")"),r.toString()}},Vt.ensureValidRing=function(t,e){var n=e.size();if(n===0)return e;if(3>=n)return Vt.createClosedRing(t,e,4);var r=e.getOrdinate(0,U.X)===e.getOrdinate(n-1,U.X)&&e.getOrdinate(0,U.Y)===e.getOrdinate(n-1,U.Y);return r?e:Vt.createClosedRing(t,e,n+1)},Vt.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),s=e.size();Vt.copy(e,0,r,0,s);for(var o=s;n>o;o++)Vt.copy(e,0,r,o,1);return r},C(gt,Z),a(gt.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new D:this.points.expandEnvelope(new D)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return Z.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.points.size()!==n.points.size())return!1;for(var r=0;r<this.points.size();r++)if(!this.equal(this.points.getCoordinate(r),n.points.getCoordinate(r),e))return!1;return!0}return Z.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))>0&&Vt.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?Q.FALSE:0},isClosed:function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return et.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var t=this.points.copy();Vt.reverse(t);var e=this.getFactory().createLineString(t);return e},compareToSameClass:function(){if(arguments.length===1){for(var t=arguments[0],e=t,n=0,r=0;n<this.points.size()&&r<e.points.size();){var s=this.points.getCoordinate(n).compareTo(e.points.getCoordinate(r));if(s!==0)return s;n++,r++}return n<this.points.size()?1:r<e.points.size()?-1:0}if(arguments.length===2){var o=arguments[0],u=arguments[1],e=o;return u.compare(this.points,e.points)}},apply:function(){if(K(arguments[0],Nt))for(var t=arguments[0],e=0;e<this.points.size();e++)t.filter(this.points.getCoordinate(e));else if(K(arguments[0],kn)){var n=arguments[0];if(this.points.size()===0)return null;for(var e=0;e<this.points.size()&&(n.filter(this.points,e),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(K(arguments[0],nn)){var r=arguments[0];r.filter(this)}else if(K(arguments[0],rt)){var s=arguments[0];s.filter(this)}},getBoundary:function(){return new vn(this).getBoundary()},isEquivalentClass:function(t){return t instanceof gt},clone:function(){var t=Z.prototype.clone.call(this);return t.points=this.points.clone(),t},getCoordinateN:function(t){return this.points.getCoordinate(t)},getGeometryType:function(){return"LineString"},copy:function(){return new gt(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return this.points.size()===0},init:function(t){if(t===null&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),t.size()===1)throw new h("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.points=t},isCoordinate:function(t){for(var e=0;e<this.points.size();e++)if(this.points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this.points.getCoordinate(t))},interfaces_:function(){return[Ri]},getClass:function(){return gt}}),gt.serialVersionUID=0x2b2b51ba435c8e00,a(Ti.prototype,{interfaces_:function(){return[]},getClass:function(){return Ti}}),C(At,Z),a(At.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new D;var t=new D;return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t},getSortIndex:function(){return Z.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?this.isEmpty()&&t.isEmpty()?!0:this.isEmpty()!==t.isEmpty()?!1:this.equal(t.getCoordinate(),this.getCoordinate(),e):!1}return Z.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return this.coordinates.size()!==0?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return Q.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=n;return r.compare(this.coordinates,e.coordinates)}},apply:function(){if(K(arguments[0],Nt)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(K(arguments[0],kn)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(K(arguments[0],nn)){var n=arguments[0];n.filter(this)}else if(K(arguments[0],rt)){var r=arguments[0];r.filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var t=Z.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t},getGeometryType:function(){return"Point"},copy:function(){return new At(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return this.coordinates.size()===0},init:function(t){t===null&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),T.isTrue(t.size()<=1),this.coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[Ti]},getClass:function(){return At}}),At.serialVersionUID=4902022702746615e3,a(rn.prototype,{interfaces_:function(){return[]},getClass:function(){return rn}}),C(Tt,Z),a(Tt.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return Z.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this.shell.getCoordinates(),r=0;r<n.length;r++)e++,t[e]=n[r];for(var s=0;s<this.holes.length;s++)for(var o=this.holes[s].getCoordinates(),u=0;u<o.length;u++)e++,t[e]=o[u];return t},getArea:function(){var t=0;t+=Math.abs(et.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(et.signedArea(this.holes[e].getCoordinateSequence()));return t},isRectangle:function(){if(this.getNumInteriorRing()!==0||this.shell===null||this.shell.getNumPoints()!==5)return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;5>n;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var s=t.getY(n);if(s!==e.getMinY()&&s!==e.getMaxY())return!1}for(var o=t.getX(0),u=t.getY(0),n=1;4>=n;n++){var r=t.getX(n),s=t.getY(n),l=r!==o,x=s!==u;if(l===x)return!1;o=r,u=s}return!0},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,r=this.shell,s=n.shell;if(!r.equalsExact(s,e)||this.holes.length!==n.holes.length)return!1;for(var o=0;o<this.holes.length;o++)if(!this.holes[o].equalsExact(n.holes[o],e))return!1;return!0}return Z.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(arguments.length===0){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++)this.normalize(this.holes[t],!1);en.sort(this.holes)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);W.arraycopy(e.getCoordinates(),0,r,0,r.length);var s=ot.minCoordinate(e.getCoordinates());ot.scroll(r,s),W.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],et.isCCW(e.getCoordinates())===n&&ot.reverse(e.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},getNumPoints:function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=this.shell,n=t.shell;return e.compareToSameClass(n)}if(arguments.length===2){var r=arguments[0],s=arguments[1],o=r,e=this.shell,n=o.shell,u=e.compareToSameClass(n,s);if(u!==0)return u;for(var l=this.getNumInteriorRing(),x=o.getNumInteriorRing(),P=0;l>P&&x>P;){var z=this.getInteriorRingN(P),k=o.getInteriorRingN(P),j=z.compareToSameClass(k,s);if(j!==0)return j;P++}return l>P?1:x>P?-1:0}},apply:function(){if(K(arguments[0],Nt)){var t=arguments[0];this.shell.apply(t);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(t)}else if(K(arguments[0],kn)){var n=arguments[0];if(this.shell.apply(n),!n.isDone())for(var e=0;e<this.holes.length&&(this.holes[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(K(arguments[0],nn)){var r=arguments[0];r.filter(this)}else if(K(arguments[0],rt)){var s=arguments[0];s.filter(this),this.shell.apply(s);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(s)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++)t[e+1]=this.holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},clone:function(){var t=Z.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].clone();return t},getGeometryType:function(){return"Polygon"},copy:function(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),n=0;n<e.length;n++)e[n]=this.holes[n].copy();return new Tt(t,e,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(t){return this.holes[t]},interfaces_:function(){return[rn]},getClass:function(){return Tt}}),Tt.serialVersionUID=-0x307ffefd8dc97200,C(ce,pt),a(ce.prototype,{getSortIndex:function(){return Z.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?pt.prototype.equalsExact.call(this,t,e):!1}return pt.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(arguments.length===1){var t=arguments[0];return this.geometries[t].getCoordinate()}return pt.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return Q.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ce(t,this.factory)},interfaces_:function(){return[Ti]},getClass:function(){return ce}}),ce.serialVersionUID=-8048474874175356e3,C(qt,gt),a(qt.prototype,{getSortIndex:function(){return Z.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return Q.FALSE},isClosed:function(){return this.isEmpty()?!0:gt.prototype.isClosed.call(this)},reverse:function(){var t=this.points.copy();Vt.reverse(t);var e=this.getFactory().createLinearRing(t);return e},validateConstruction:function(){if(!this.isEmpty()&&!gt.prototype.isClosed.call(this))throw new h;if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<qt.MINIMUM_VALID_SIZE)throw new h("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new qt(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return qt}}),qt.MINIMUM_VALID_SIZE=4,qt.serialVersionUID=-0x3b229e262367a600,C(Kt,pt),a(Kt.prototype,{getSortIndex:function(){return Z.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?pt.prototype.equalsExact.call(this,t,e):!1}return pt.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new w,e=0;e<this.geometries.length;e++)for(var n=this.geometries[e],r=n.getBoundary(),s=0;s<r.getNumGeometries();s++)t.add(r.getGeometryN(s));var o=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(o))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Kt(t,this.factory)},interfaces_:function(){return[rn]},getClass:function(){return Kt}}),Kt.serialVersionUID=-0x7a5aa1369171980,a(Ee.prototype,{setCopyUserData:function(t){this.isUserDataCopied=t},edit:function(t,e){if(t===null)return null;var n=this.editInternal(t,e);return this.isUserDataCopied&&n.setUserData(t.getUserData()),n},editInternal:function(t,e){return this.factory===null&&(this.factory=t.getFactory()),t instanceof pt?this.editGeometryCollection(t,e):t instanceof Tt?this.editPolygon(t,e):t instanceof At?e.edit(t,this.factory):t instanceof gt?e.edit(t,this.factory):(T.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var n=e.edit(t,this.factory),r=new w,s=0;s<n.getNumGeometries();s++){var o=this.edit(n.getGeometryN(s),e);o===null||o.isEmpty()||r.add(o)}return n.getClass()===ce?this.factory.createMultiPoint(r.toArray([])):n.getClass()===he?this.factory.createMultiLineString(r.toArray([])):n.getClass()===Kt?this.factory.createMultiPolygon(r.toArray([])):this.factory.createGeometryCollection(r.toArray([]))},editPolygon:function(t,e){var n=e.edit(t,this.factory);if(n===null&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(r===null||r.isEmpty())return this.factory.createPolygon();for(var s=new w,o=0;o<n.getNumInteriorRing();o++){var u=this.edit(n.getInteriorRingN(o),e);u===null||u.isEmpty()||s.add(u)}return this.factory.createPolygon(r,s.toArray([]))},interfaces_:function(){return[]},getClass:function(){return Ee}}),Ee.GeometryEditorOperation=Pi,a(zs.prototype,{edit:function(t,e){return t},interfaces_:function(){return[Pi]},getClass:function(){return zs}}),a(Vs.prototype,{edit:function(t,e){if(t instanceof qt)return e.createLinearRing(this.editCoordinates(t.getCoordinates(),t));if(t instanceof gt)return e.createLineString(this.editCoordinates(t.getCoordinates(),t));if(t instanceof At){var n=this.editCoordinates(t.getCoordinates(),t);return n.length>0?e.createPoint(n[0]):e.createPoint()}return t},interfaces_:function(){return[Pi]},getClass:function(){return Vs}}),a(ks.prototype,{edit:function(t,e){return t instanceof qt?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof gt?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof At?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[Pi]},getClass:function(){return ks}}),Ee.NoOpGeometryOperation=zs,Ee.CoordinateOperation=Vs,Ee.CoordinateSequenceOperation=ks,a(Ie.prototype,{setOrdinate:function(t,e,n){switch(e){case U.X:this.coordinates[t].x=n;break;case U.Y:this.coordinates[t].y=n;break;case U.Z:this.coordinates[t].z=n;break;default:throw new h}},size:function(){return this.coordinates.length},getOrdinate:function(t,e){switch(e){case U.X:return this.coordinates[t].x;case U.Y:return this.coordinates[t].y;case U.Z:return this.coordinates[t].z}return c.NaN},getCoordinate:function(){if(arguments.length===1){var t=arguments[0];return this.coordinates[t]}if(arguments.length===2){var e=arguments[0],n=arguments[1];n.x=this.coordinates[e].x,n.y=this.coordinates[e].y,n.z=this.coordinates[e].z}},getCoordinateCopy:function(t){return new v(this.coordinates[t])},getDimension:function(){return this.dimension},getX:function(t){return this.coordinates[t].x},clone:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].clone();return new Ie(t,this.dimension)},expandEnvelope:function(t){for(var e=0;e<this.coordinates.length;e++)t.expandToInclude(this.coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].copy();return new Ie(t,this.dimension)},toString:function(){if(this.coordinates.length>0){var t=new dt(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++)t.append(", "),t.append(this.coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this.coordinates[t].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[U,y]},getClass:function(){return Ie}}),Ie.serialVersionUID=-0xcb44a778db18e00,a(yn.prototype,{readResolve:function(){return yn.instance()},create:function(){if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new Ie(t)}if(K(arguments[0],U)){var e=arguments[0];return new Ie(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return r>3&&(r=3),2>r?new Ie(n):new Ie(n,r)}},interfaces_:function(){return[tt,y]},getClass:function(){return yn}}),yn.instance=function(){return yn.instanceObject},yn.serialVersionUID=-0x38e49fa6cf6f2e00,yn.instanceObject=new yn;var je,kl=Object.defineProperty,Ul=Rl({delete:Pl,has:_l,get:Ol,set:bl,keys:Al,values:Fl,entries:Gl,forEach:Bl,clear:Dl}),Xl=typeof Map<"u"&&Map.prototype.values?Map:Ul;sn.prototype=new vt,sn.prototype.get=function(t){return this.map_.get(t)||null},sn.prototype.put=function(t,e){return this.map_.set(t,e),e},sn.prototype.values=function(){for(var t=new w,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},sn.prototype.entrySet=function(){var t=new Jt;return this.map_.entries().forEach(function(e){return t.add(e)}),t},sn.prototype.size=function(){return this.map_.size()},a(Ct.prototype,{equals:function(t){if(!(t instanceof Ct))return!1;var e=t;return this.modelType===e.modelType&&this.scale===e.scale},compareTo:function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new O(n).compareTo(new O(r))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===Ct.FLOATING||this.modelType===Ct.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var t="UNKNOWN";return this.modelType===Ct.FLOATING?t="Floating":this.modelType===Ct.FLOATING_SINGLE?t="Floating-Single":this.modelType===Ct.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if(typeof arguments[0]=="number"){var t=arguments[0];if(c.isNaN(t))return t;if(this.modelType===Ct.FLOATING_SINGLE){var e=t;return e}return this.modelType===Ct.FIXED?Math.round(t*this.scale)/this.scale:t}if(arguments[0]instanceof v){var n=arguments[0];if(this.modelType===Ct.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}},getMaximumSignificantDigits:function(){var t=16;return this.modelType===Ct.FLOATING?t=16:this.modelType===Ct.FLOATING_SINGLE?t=6:this.modelType===Ct.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this.scale=Math.abs(t)},interfaces_:function(){return[y,g]},getClass:function(){return Ct}}),Ct.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},a(Ue.prototype,{readResolve:function(){return Ue.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[y]},getClass:function(){return Ue}}),Ue.serialVersionUID=-552860263173159e4,Ue.nameToTypeMap=new sn,Ct.Type=Ue,Ct.serialVersionUID=7777263578777804e3,Ct.FIXED=new Ue("FIXED"),Ct.FLOATING=new Ue("FLOATING"),Ct.FLOATING_SINGLE=new Ue("FLOATING SINGLE"),Ct.maximumPreciseValue=9007199254740992,a(ft.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new v(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new v(t.getMinX(),t.getMinY()),new v(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new v(t.getMinX(),t.getMinY()),new v(t.getMinX(),t.getMaxY()),new v(t.getMaxX(),t.getMaxY()),new v(t.getMaxX(),t.getMinY()),new v(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(K(arguments[0],U)){var e=arguments[0];return new gt(e,this)}}},createMultiLineString:function(){if(arguments.length===0)return new he(null,this);if(arguments.length===1){var t=arguments[0];return new he(t,this)}},buildGeometry:function(t){for(var e=null,n=!1,r=!1,s=t.iterator();s.hasNext();){var o=s.next(),u=o.getClass();e===null&&(e=u),u!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(e===null)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(ft.toGeometryArray(t));var l=t.iterator().next(),x=t.size()>1;if(x){if(l instanceof Tt)return this.createMultiPolygon(ft.toPolygonArray(t));if(l instanceof gt)return this.createMultiLineString(ft.toLineStringArray(t));if(l instanceof At)return this.createMultiPoint(ft.toPointArray(t));T.shouldNeverReachHere("Unhandled class: "+l.getClass().getName())}return l},createMultiPointFromCoords:function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof v){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}if(K(arguments[0],U)){var e=arguments[0];return new At(e,this)}}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(arguments.length===0)return new Tt(null,null,this);if(arguments.length===1){if(K(arguments[0],U)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof qt){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var r=arguments[0],s=arguments[1];return new Tt(r,s,this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){if(arguments.length===0)return new pt(null,this);if(arguments.length===1){var t=arguments[0];return new pt(t,this)}},createGeometry:function(t){var e=new Ee(this);return e.edit(t,{edit:function(){if(arguments.length===2){var n=arguments[0];return this.coordinateSequenceFactory.create(n)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(K(arguments[0],U)){var e=arguments[0];return new qt(e,this)}}},createMultiPolygon:function(){if(arguments.length===0)return new Kt(null,this);if(arguments.length===1){var t=arguments[0];return new Kt(t,this)}},createMultiPoint:function(){if(arguments.length===0)return new ce(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new ce(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)}if(K(arguments[0],U)){var n=arguments[0];if(n===null)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),s=0;s<n.size();s++){var o=this.getCoordinateSequenceFactory().create(1,n.getDimension());Vt.copy(n,s,o,0,1),r[s]=this.createPoint(o)}return this.createMultiPoint(r)}}},interfaces_:function(){return[y]},getClass:function(){return ft}}),ft.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ft.toGeometryArray=function(t){if(t===null)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ft.getDefaultCoordinateSequenceFactory=function(){return yn.instance()},ft.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ft.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ft.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ft.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ft.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ft.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ft.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ft.serialVersionUID=-6820524753094096e3;var Be={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};a(Xs.prototype,{read:function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var s=Be.typeStr.exec(t);if(t.search("EMPTY")!==-1&&(s=Be.emptyTypeStr.exec(t),s[2]=void 0),s&&(n=s[1].toLowerCase(),r=s[2],Or[n]&&(e=Or[n].apply(this,[r]))),e===void 0)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!pn[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+pn[e].apply(this,[t])+")"}});var pn={coordinate:function(t){return t.x+" "+t.y},point:function(t){return pn.coordinate.call(this,t.coordinates.coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t.geometries.length;r>n;++n)e.push("("+pn.point.apply(this,[t.geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t.points.coordinates.length;r>n;++n)e.push(pn.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t.points.coordinates.length;r>n;++n)e.push(pn.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t.geometries.length;r>n;++n)e.push("("+pn.linestring.apply(this,[t.geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+pn.linestring.apply(this,[t.shell])+")");for(var n=0,r=t.holes.length;r>n;++n)e.push("("+pn.linestring.apply(this,[t.holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t.geometries.length;r>n;++n)e.push("("+pn.polygon.apply(this,[t.geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t.geometries.length;r>n;++n)e.push(this.extractGeometry(t.geometries[n]));return e.join(",")}},Or={point:function(t){if(t===void 0)return this.geometryFactory.createPoint();var e=t.trim().split(Be.spaces);return this.geometryFactory.createPoint(new v(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(t===void 0)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],s=0,o=n.length;o>s;++s)e=n[s].replace(Be.trimParens,"$1"),r.push(Or.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(t===void 0)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],s=0,o=n.length;o>s;++s)e=n[s].trim().split(Be.spaces),r.push(new v(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(t===void 0)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],s=0,o=n.length;o>s;++s)e=n[s].trim().split(Be.spaces),r.push(new v(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(t===void 0)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Be.parenComma),r=[],s=0,o=n.length;o>s;++s)e=n[s].replace(Be.trimParens,"$1"),r.push(Or.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(t===void 0)return this.geometryFactory.createPolygon();for(var e,n,r,s,o=t.trim().split(Be.parenComma),u=[],l=0,x=o.length;x>l;++l)e=o[l].replace(Be.trimParens,"$1"),n=Or.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n.points),l===0?s=r:u.push(r);return this.geometryFactory.createPolygon(s,u)},multipolygon:function(t){if(t===void 0)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Be.doubleParenComma),r=[],s=0,o=n.length;o>s;++s)e=n[s].replace(Be.trimParens,"$1"),r.push(Or.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(t===void 0)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=t.trim().split("|"),n=[],r=0,s=e.length;s>r;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}};a($t.prototype,{write:function(t){return this.parser.write(t)}}),a($t,{toLineString:function(t,e){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),a(Pt.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},getTopologySummary:function(){var t=new dt;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,n,r){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=r,this.result=this.computeIntersect(t,e,n,r)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(arguments.length===0)this.intLineIndex===null&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this.precisionModel=t},isInteriorIntersection:function(){if(arguments.length===0)return this.isInteriorIntersection(0)?!0:!!this.isInteriorIntersection(1);if(arguments.length===1){for(var t=arguments[0],e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this.intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==Pt.NO_INTERSECTION},getEdgeDistance:function(t,e){var n=Pt.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1]);return n},isCollinear:function(){return this.result===Pt.COLLINEAR_INTERSECTION},toString:function(){return $t.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+$t.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this.inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return Pt}}),Pt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),s=Math.abs(n.y-e.y),o=-1;if(t.equals(e))o=0;else if(t.equals(n))o=r>s?r:s;else{var u=Math.abs(t.x-e.x),l=Math.abs(t.y-e.y);o=r>s?u:l,o!==0||t.equals(e)||(o=Math.max(u,l))}return T.isTrue(!(o===0&&!t.equals(e)),"Bad distance calculation"),o},Pt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,s=t.y-e.y,o=Math.sqrt(r*r+s*s);return T.isTrue(!(o===0&&!t.equals(e)),"Invalid distance calculation"),o},Pt.DONT_INTERSECT=0,Pt.DO_INTERSECT=1,Pt.COLLINEAR=2,Pt.NO_INTERSECTION=0,Pt.POINT_INTERSECTION=1,Pt.COLLINEAR_INTERSECTION=2,C(Wt,Pt),a(Wt.prototype,{isInSegmentEnvelopes:function(t){var e=new D(this.inputLines[0][0],this.inputLines[0][1]),n=new D(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t)},computeIntersection:function(){if(arguments.length!==3)return Pt.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];return this._isProper=!1,D.intersects(e,n,t)&&et.orientationIndex(e,n,t)===0&&et.orientationIndex(n,e,t)===0?(this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this.result=Pt.POINT_INTERSECTION,null):void(this.result=Pt.NO_INTERSECTION)},normalizeToMinimum:function(t,e,n,r,s){s.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),s.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=s.x,t.y-=s.y,e.x-=s.x,e.y-=s.y,n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y},safeHCoordinateIntersection:function(t,e,n,r){var s=null;try{s=J.intersection(t,e,n,r)}catch(o){if(!(o instanceof G))throw o;s=Wt.nearestEndpoint(t,e,n,r)}finally{}return s},intersection:function(t,e,n,r){var s=this.intersectionWithNormalization(t,e,n,r);return this.isInSegmentEnvelopes(s)||(s=new v(Wt.nearestEndpoint(t,e,n,r))),this.precisionModel!==null&&this.precisionModel.makePrecise(s),s},smallestInAbsValue:function(t,e,n,r){var s=t,o=Math.abs(s);return Math.abs(e)<o&&(s=e,o=Math.abs(e)),Math.abs(n)<o&&(s=n,o=Math.abs(n)),Math.abs(r)<o&&(s=r),s},checkDD:function(t,e,n,r,s){var o=Y.intersection(t,e,n,r),u=this.isInSegmentEnvelopes(o);W.out.println("DD in env = "+u+"  --------------------- "+o),s.distance(o)>1e-4&&W.out.println("Distance = "+s.distance(o))},intersectionWithNormalization:function(t,e,n,r){var s=new v(t),o=new v(e),u=new v(n),l=new v(r),x=new v;this.normalizeToEnvCentre(s,o,u,l,x);var P=this.safeHCoordinateIntersection(s,o,u,l);return P.x+=x.x,P.y+=x.y,P},computeCollinearIntersection:function(t,e,n,r){var s=D.intersects(t,e,n),o=D.intersects(t,e,r),u=D.intersects(n,r,t),l=D.intersects(n,r,e);return s&&o?(this.intPt[0]=n,this.intPt[1]=r,Pt.COLLINEAR_INTERSECTION):u&&l?(this.intPt[0]=t,this.intPt[1]=e,Pt.COLLINEAR_INTERSECTION):s&&u?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||o||l?Pt.COLLINEAR_INTERSECTION:Pt.POINT_INTERSECTION):s&&l?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||o||u?Pt.COLLINEAR_INTERSECTION:Pt.POINT_INTERSECTION):o&&u?(this.intPt[0]=r,this.intPt[1]=t,!r.equals(t)||s||l?Pt.COLLINEAR_INTERSECTION:Pt.POINT_INTERSECTION):o&&l?(this.intPt[0]=r,this.intPt[1]=e,!r.equals(e)||s||u?Pt.COLLINEAR_INTERSECTION:Pt.POINT_INTERSECTION):Pt.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,n,r,s){var o=t.x<e.x?t.x:e.x,u=t.y<e.y?t.y:e.y,l=t.x>e.x?t.x:e.x,x=t.y>e.y?t.y:e.y,P=n.x<r.x?n.x:r.x,z=n.y<r.y?n.y:r.y,k=n.x>r.x?n.x:r.x,j=n.y>r.y?n.y:r.y,nt=o>P?o:P,at=k>l?l:k,ut=u>z?u:z,bt=j>x?x:j,kt=(nt+at)/2,Ve=(ut+bt)/2;s.x=kt,s.y=Ve,t.x-=s.x,t.y-=s.y,e.x-=s.x,e.y-=s.y,n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y},computeIntersect:function(t,e,n,r){if(this._isProper=!1,!D.intersects(t,e,n,r))return Pt.NO_INTERSECTION;var s=et.orientationIndex(t,e,n),o=et.orientationIndex(t,e,r);if(s>0&&o>0||0>s&&0>o)return Pt.NO_INTERSECTION;var u=et.orientationIndex(n,r,t),l=et.orientationIndex(n,r,e);if(u>0&&l>0||0>u&&0>l)return Pt.NO_INTERSECTION;var x=s===0&&o===0&&u===0&&l===0;return x?this.computeCollinearIntersection(t,e,n,r):(s===0||o===0||u===0||l===0?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(r)?this.intPt[0]=e:s===0?this.intPt[0]=new v(n):o===0?this.intPt[0]=new v(r):u===0?this.intPt[0]=new v(t):l===0&&(this.intPt[0]=new v(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,r)),Pt.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return Wt}}),Wt.nearestEndpoint=function(t,e,n,r){var s=t,o=et.distancePointLine(t,n,r),u=et.distancePointLine(e,n,r);return o>u&&(o=u,s=e),u=et.distancePointLine(n,t,e),o>u&&(o=u,s=n),u=et.distancePointLine(r,t,e),o>u&&(o=u,s=r),s},a(Un.prototype,{interfaces_:function(){return[]},getClass:function(){return Un}}),Un.orientationIndex=function(t,e,n){var r=e.x-t.x,s=e.y-t.y,o=n.x-e.x,u=n.y-e.y;return Un.signOfDet2x2(r,s,o,u)},Un.signOfDet2x2=function(t,e,n,r){var s=null,o=null,u=null;if(s=1,t===0||r===0)return e===0||n===0?0:e>0?n>0?-s:s:n>0?s:-s;if(e===0||n===0)return r>0?t>0?s:-s:t>0?-s:s;if(e>0?r>0?r>=e||(s=-s,o=t,t=n,n=o,o=e,e=r,r=o):-r>=e?(s=-s,n=-n,r=-r):(o=t,t=-n,n=o,o=e,e=-r,r=o):r>0?r>=-e?(s=-s,t=-t,e=-e):(o=-t,t=n,n=o,o=-e,e=r,r=o):e>=r?(t=-t,e=-e,n=-n,r=-r):(s=-s,o=-t,t=-n,n=o,o=-e,e=-r,r=o),t>0){if(!(n>0)||!(n>=t))return s}else{if(n>0||!(t>=n))return-s;s=-s,t=-t,n=-n}for(;;){if(u=Math.floor(n/t),n-=u*t,r-=u*e,0>r)return-s;if(r>e)return s;if(t>n+n){if(r+r>e)return s}else{if(e>r+r)return-s;n=t-n,r=e-r,s=-s}if(r===0)return n===0?0:-s;if(n===0||(u=Math.floor(t/n),t-=u*n,e-=u*r,0>e))return s;if(e>r)return-s;if(n>t+t){if(e+e>r)return-s}else{if(r>e+e)return s;t=n-t,e=r-e,s=-s}if(e===0)return t===0?0:s;if(t===0)return-s}},a(Xn.prototype,{countSegment:function(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this.p.x>=n&&this.p.x<=r&&(this.isPointOnSegment=!0),null}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var s=t.x-this.p.x,o=t.y-this.p.y,u=e.x-this.p.x,l=e.y-this.p.y,x=Un.signOfDet2x2(s,o,u,l);if(x===0)return this.isPointOnSegment=!0,null;o>l&&(x=-x),x>0&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==f.EXTERIOR},getLocation:function(){return this.isPointOnSegment?f.BOUNDARY:this.crossingCount%2===1?f.INTERIOR:f.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return Xn}}),Xn.locatePointInRing=function(){if(arguments[0]instanceof v&&K(arguments[1],U)){for(var t=arguments[0],e=arguments[1],n=new Xn(t),r=new v,s=new v,o=1;o<e.size();o++)if(e.getCoordinate(o,r),e.getCoordinate(o-1,s),n.countSegment(r,s),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof v&&arguments[1]instanceof Array){for(var u=arguments[0],l=arguments[1],n=new Xn(u),o=1;o<l.length;o++){var r=l[o],s=l[o-1];if(n.countSegment(r,s),n.isOnSegment())return n.getLocation()}return n.getLocation()}},a(et.prototype,{interfaces_:function(){return[]},getClass:function(){return et}}),et.orientationIndex=function(t,e,n){return Y.orientationIndex(t,e,n)},et.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var s=t[r].x-n,o=t[r+1].y,u=t[r-1].y;e+=s*(u-o)}return e/2}if(K(arguments[0],U)){var l=arguments[0],x=l.size();if(3>x)return 0;var P=new v,z=new v,k=new v;l.getCoordinate(0,z),l.getCoordinate(1,k);var n=z.x;k.x-=n;for(var e=0,r=1;x-1>r;r++)P.y=z.y,z.x=k.x,z.y=k.y,l.getCoordinate(r+1,k),k.x-=n,e+=z.x*(P.y-k.y);return e/2}},et.distanceLineLine=function(t,e,n,r){if(t.equals(e))return et.distancePointLine(t,n,r);if(n.equals(r))return et.distancePointLine(r,t,e);var s=!1;if(D.intersects(t,e,n,r)){var o=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(o===0)s=!0;else{var u=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),l=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y),x=l/o,P=u/o;(0>P||P>1||0>x||x>1)&&(s=!0)}}else s=!0;return s?st.min(et.distancePointLine(t,n,r),et.distancePointLine(e,n,r),et.distancePointLine(n,t,e),et.distancePointLine(r,t,e)):0},et.isPointInRing=function(t,e){return et.locatePointInRing(t,e)!==f.EXTERIOR},et.computeLength=function(t){var e=t.size();if(1>=e)return 0;var n=0,r=new v;t.getCoordinate(0,r);for(var s=r.x,o=r.y,u=1;e>u;u++){t.getCoordinate(u,r);var l=r.x,x=r.y,P=l-s,z=x-o;n+=Math.sqrt(P*P+z*z),s=l,o=x}return n},et.isCCW=function(t){var e=t.length-1;if(3>e)throw new h;for(var n=t[0],r=0,s=1;e>=s;s++){var o=t[s];o.y>n.y&&(n=o,r=s)}var u=r;do u-=1,0>u&&(u=e);while(t[u].equals2D(n)&&u!==r);var l=r;do l=(l+1)%e;while(t[l].equals2D(n)&&l!==r);var x=t[u],P=t[l];if(x.equals2D(n)||P.equals2D(n)||x.equals2D(P))return!1;var z=et.computeOrientation(x,n,P);return z===0?x.x>P.x:z>0},et.locatePointInRing=function(t,e){return Xn.locatePointInRing(t,e)},et.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),s=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(s)*Math.sqrt(r)},et.computeOrientation=function(t,e,n){return et.orientationIndex(t,e,n)},et.distancePointLine=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(e.length===0)throw new h;for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var s=et.distancePointLine(t,e[r],e[r+1]);n>s&&(n=s)}return n}if(arguments.length===3){var o=arguments[0],u=arguments[1],l=arguments[2];if(u.x===l.x&&u.y===l.y)return o.distance(u);var x=(l.x-u.x)*(l.x-u.x)+(l.y-u.y)*(l.y-u.y),P=((o.x-u.x)*(l.x-u.x)+(o.y-u.y)*(l.y-u.y))/x;if(0>=P)return o.distance(u);if(P>=1)return o.distance(l);var z=((u.y-o.y)*(l.x-u.x)-(u.x-o.x)*(l.y-u.y))/x;return Math.abs(z)*Math.sqrt(x)}},et.isOnLine=function(t,e){for(var n=new Wt,r=1;r<e.length;r++){var s=e[r-1],o=e[r];if(n.computeIntersection(t,s,o),n.hasIntersection())return!0}return!1},et.CLOCKWISE=-1,et.RIGHT=et.CLOCKWISE,et.COUNTERCLOCKWISE=1,et.LEFT=et.COUNTERCLOCKWISE,et.COLLINEAR=0,et.STRAIGHT=et.COLLINEAR,a(lt.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof lt){var t=arguments[0],e=et.orientationIndex(this.p0,this.p1,t.p0),n=et.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||0>=e&&0>=n?Math.max(e,n):0}if(arguments[0]instanceof v){var r=arguments[0];return et.orientationIndex(this.p0,this.p1,r)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof lt))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},intersection:function(t){var e=new Wt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof v){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new v(t);var e=this.projectionFactor(t),n=new v;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof lt){var r=arguments[0],s=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(s>=1&&o>=1||0>=s&&0>=o)return null;var u=this.project(r.p0);0>s&&(u=this.p0),s>1&&(u=this.p1);var l=this.project(r.p1);return 0>o&&(l=this.p0),o>1&&(l=this.p1),new lt(u,l)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return t===0?this.p0:this.p1},distancePerpendicular:function(t){return et.distancePointLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return lt.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;if(0>=r)return c.NaN;var s=((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r;return s},closestPoints:function(t){var e=this.intersection(t);if(e!==null)return[e,e];var n=new Array(2).fill(null),r=c.MAX_VALUE,s=null,o=this.closestPoint(t.p0);r=o.distance(t.p0),n[0]=o,n[1]=t.p0;var u=this.closestPoint(t.p1);s=u.distance(t.p1),r>s&&(r=s,n[0]=u,n[1]=t.p1);var l=t.closestPoint(this.p0);s=l.distance(this.p0),r>s&&(r=s,n[0]=this.p0,n[1]=l);var x=t.closestPoint(this.p1);return s=x.distance(this.p1),r>s&&(r=s,n[0]=this.p1,n[1]=x),n},closestPoint:function(t){var e=this.projectionFactor(t);if(e>0&&1>e)return this.project(t);var n=this.p0.distance(t),r=this.p1.distance(t);return r>n?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,n=this.p0.compareTo(e.p0);return n!==0?n:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{var e=J.intersection(this.p0,this.p1,t.p0,t.p1);return e}catch(n){if(!(n instanceof G))throw n}finally{}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),s=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,u=Math.sqrt(s*s+o*o),l=0,x=0;if(e!==0){if(0>=u)throw new IllegalStateException("Cannot compute offset from zero-length line segment");l=e*s/u,x=e*o/u}var P=n-x,z=r+l,k=new v(P,z);return k},setCoordinates:function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},segmentFraction:function(t){var e=this.projectionFactor(t);return 0>e?e=0:(e>1||c.isNaN(e))&&(e=1),e},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof lt){var t=arguments[0];return et.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof v){var e=arguments[0];return et.distancePointLine(e,this.p0,this.p1)}},pointAlong:function(t){var e=new v;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);n^=31*java.lang.Double.doubleToLongBits(this.p1.y);var r=Math.trunc(n)^Math.trunc(n>>32);return e^r},interfaces_:function(){return[g,y]},getClass:function(){return lt}}),lt.midPoint=function(t,e){return new v((t.x+e.x)/2,(t.y+e.y)/2)},lt.serialVersionUID=0x2d2172135f411c00,a(wt.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){var t=wt.isTrue(this.matrix[f.INTERIOR][f.INTERIOR])||wt.isTrue(this.matrix[f.INTERIOR][f.BOUNDARY])||wt.isTrue(this.matrix[f.BOUNDARY][f.INTERIOR])||wt.isTrue(this.matrix[f.BOUNDARY][f.BOUNDARY]);return t&&this.matrix[f.EXTERIOR][f.INTERIOR]===Q.FALSE&&this.matrix[f.EXTERIOR][f.BOUNDARY]===Q.FALSE},isCoveredBy:function(){var t=wt.isTrue(this.matrix[f.INTERIOR][f.INTERIOR])||wt.isTrue(this.matrix[f.INTERIOR][f.BOUNDARY])||wt.isTrue(this.matrix[f.BOUNDARY][f.INTERIOR])||wt.isTrue(this.matrix[f.BOUNDARY][f.BOUNDARY]);return t&&this.matrix[f.INTERIOR][f.EXTERIOR]===Q.FALSE&&this.matrix[f.BOUNDARY][f.EXTERIOR]===Q.FALSE},set:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this.matrix[n][r]=Q.toDimensionValue(t.charAt(e))}else if(arguments.length===3){var s=arguments[0],o=arguments[1],u=arguments[2];this.matrix[s][o]=u}},isContains:function(){return wt.isTrue(this.matrix[f.INTERIOR][f.INTERIOR])&&this.matrix[f.EXTERIOR][f.INTERIOR]===Q.FALSE&&this.matrix[f.EXTERIOR][f.BOUNDARY]===Q.FALSE},setAtLeast:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this.setAtLeast(n,r,Q.toDimensionValue(t.charAt(e)))}else if(arguments.length===3){var s=arguments[0],o=arguments[1],u=arguments[2];this.matrix[s][o]<u&&(this.matrix[s][o]=u)}},setAtLeastIfValid:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)},isWithin:function(){return wt.isTrue(this.matrix[f.INTERIOR][f.INTERIOR])&&this.matrix[f.INTERIOR][f.EXTERIOR]===Q.FALSE&&this.matrix[f.BOUNDARY][f.EXTERIOR]===Q.FALSE},isTouches:function(t,e){return t>e?this.isTouches(e,t):t===Q.A&&e===Q.A||t===Q.L&&e===Q.L||t===Q.L&&e===Q.A||t===Q.P&&e===Q.A||t===Q.P&&e===Q.L?this.matrix[f.INTERIOR][f.INTERIOR]===Q.FALSE&&(wt.isTrue(this.matrix[f.INTERIOR][f.BOUNDARY])||wt.isTrue(this.matrix[f.BOUNDARY][f.INTERIOR])||wt.isTrue(this.matrix[f.BOUNDARY][f.BOUNDARY])):!1},isOverlaps:function(t,e){return t===Q.P&&e===Q.P||t===Q.A&&e===Q.A?wt.isTrue(this.matrix[f.INTERIOR][f.INTERIOR])&&wt.isTrue(this.matrix[f.INTERIOR][f.EXTERIOR])&&wt.isTrue(this.matrix[f.EXTERIOR][f.INTERIOR]):t===Q.L&&e===Q.L?this.matrix[f.INTERIOR][f.INTERIOR]===1&&wt.isTrue(this.matrix[f.INTERIOR][f.EXTERIOR])&&wt.isTrue(this.matrix[f.EXTERIOR][f.INTERIOR]):!1},isEquals:function(t,e){return t!==e?!1:wt.isTrue(this.matrix[f.INTERIOR][f.INTERIOR])&&this.matrix[f.INTERIOR][f.EXTERIOR]===Q.FALSE&&this.matrix[f.BOUNDARY][f.EXTERIOR]===Q.FALSE&&this.matrix[f.EXTERIOR][f.INTERIOR]===Q.FALSE&&this.matrix[f.EXTERIOR][f.BOUNDARY]===Q.FALSE},toString:function(){for(var t=new dt("123456789"),e=0;3>e;e++)for(var n=0;3>n;n++)t.setCharAt(3*e+n,Q.toDimensionSymbol(this.matrix[e][n]));return t.toString()},setAll:function(t){for(var e=0;3>e;e++)for(var n=0;3>n;n++)this.matrix[e][n]=t},get:function(t,e){return this.matrix[t][e]},transpose:function(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},matches:function(t){if(t.length!==9)throw new h;for(var e=0;3>e;e++)for(var n=0;3>n;n++)if(!wt.matches(this.matrix[e][n],t.charAt(3*e+n)))return!1;return!0},add:function(t){for(var e=0;3>e;e++)for(var n=0;3>n;n++)this.setAtLeast(e,n,t.get(e,n))},isDisjoint:function(){return this.matrix[f.INTERIOR][f.INTERIOR]===Q.FALSE&&this.matrix[f.INTERIOR][f.BOUNDARY]===Q.FALSE&&this.matrix[f.BOUNDARY][f.INTERIOR]===Q.FALSE&&this.matrix[f.BOUNDARY][f.BOUNDARY]===Q.FALSE},isCrosses:function(t,e){return t===Q.P&&e===Q.L||t===Q.P&&e===Q.A||t===Q.L&&e===Q.A?wt.isTrue(this.matrix[f.INTERIOR][f.INTERIOR])&&wt.isTrue(this.matrix[f.INTERIOR][f.EXTERIOR]):t===Q.L&&e===Q.P||t===Q.A&&e===Q.P||t===Q.A&&e===Q.L?wt.isTrue(this.matrix[f.INTERIOR][f.INTERIOR])&&wt.isTrue(this.matrix[f.EXTERIOR][f.INTERIOR]):t===Q.L&&e===Q.L?this.matrix[f.INTERIOR][f.INTERIOR]===0:!1},interfaces_:function(){return[m]},getClass:function(){return wt}}),wt.matches=function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var t=arguments[0],e=arguments[1];return e===Q.SYM_DONTCARE||e===Q.SYM_TRUE&&(t>=0||t===Q.TRUE)||e===Q.SYM_FALSE&&t===Q.FALSE||e===Q.SYM_P&&t===Q.P||e===Q.SYM_L&&t===Q.L?!0:e===Q.SYM_A&&t===Q.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var n=arguments[0],r=arguments[1],s=new wt(n);return s.matches(r)}},wt.isTrue=function(t){return t>=0||t===Q.TRUE};var Yl=Object.freeze({Coordinate:v,CoordinateList:A,Envelope:D,LineSegment:lt,GeometryFactory:ft,Geometry:Z,Point:At,LineString:gt,LinearRing:qt,Polygon:Tt,GeometryCollection:pt,MultiPoint:ce,MultiLineString:he,MultiPolygon:Kt,Dimension:Q,IntersectionMatrix:wt});a(on.prototype,{addPoint:function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},setBasePoint:function(t){this.areaBasePt===null&&(this.areaBasePt=t)},addLineSegments:function(t){for(var e=0,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);if(r!==0){e+=r;var s=(t[n].x+t[n+1].x)/2;this.lineCentSum.x+=r*s;var o=(t[n].y+t[n+1].y)/2;this.lineCentSum.y+=r*o}}this.totalLength+=e,e===0&&t.length>0&&this.addPoint(t[0])},addHole:function(t){for(var e=et.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new v;if(Math.abs(this.areasum2)>0)t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},addShell:function(t){t.length>0&&this.setBasePoint(t[0]);for(var e=!et.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},addTriangle:function(t,e,n,r){var s=r?1:-1;on.centroid3(t,e,n,this.triangleCent3);var o=on.area2(t,e,n);this.cg3.x+=s*o*this.triangleCent3.x,this.cg3.y+=s*o*this.triangleCent3.y,this.areasum2+=s*o},add:function(){if(arguments[0]instanceof Tt){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof Z){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof At)this.addPoint(n.getCoordinate());else if(n instanceof gt)this.addLineSegments(n.getCoordinates());else if(n instanceof Tt){var r=n;this.add(r)}else if(n instanceof pt)for(var s=n,e=0;e<s.getNumGeometries();e++)this.add(s.getGeometryN(e))}},interfaces_:function(){return[]},getClass:function(){return on}}),on.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},on.centroid3=function(t,e,n,r){return r.x=t.x+e.x+n.x,r.y=t.y+e.y+n.y,null},on.getCentroid=function(t){var e=new on(t);return e.getCentroid()},Oi.prototype=new Error,Oi.prototype.name="EmptyStackException",ie.prototype=new N,ie.prototype.add=function(t){return this.array_.push(t),!0},ie.prototype.get=function(t){if(0>t||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},ie.prototype.push=function(t){return this.array_.push(t),t},ie.prototype.pop=function(t){if(this.array_.length===0)throw new Oi;return this.array_.pop()},ie.prototype.peek=function(){if(this.array_.length===0)throw new Oi;return this.array_[this.array_.length-1]},ie.prototype.empty=function(){return this.array_.length===0},ie.prototype.isEmpty=function(){return this.empty()},ie.prototype.search=function(t){return this.array_.indexOf(t)},ie.prototype.size=function(){return this.array_.length},ie.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},a(lr.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[Nt]},getClass:function(){return lr}}),lr.filterCoordinates=function(t){for(var e=new lr,n=0;n<t.length;n++)e.filter(t[n]);return e.getCoordinates()},a(an.prototype,{preSort:function(t){for(var e=null,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return en.sort(t,1,t.length,new hr(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),n=new A;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},lineOrPolygon:function(t){if(t=this.cleanRing(t),t.length===3)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},cleanRing:function(t){T.equals(t[0],t[t.length-1]);for(var e=new w,n=null,r=0;r<=t.length-2;r++){var s=t[r],o=t[r+1];s.equals(o)||n!==null&&this.isBetween(n,s,o)||(e.add(s),n=s)}e.add(t[t.length-1]);var u=new Array(e.size()).fill(null);return e.toArray(u)},isBetween:function(t,e,n){return et.computeOrientation(t,e,n)!==0?!1:t.x!==n.x&&(t.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=t.x)||t.y!==n.y&&(t.y<=e.y&&e.y<=n.y||n.y<=e.y&&e.y<=t.y)},reduce:function(t){var e=this.computeOctRing(t);if(e===null)return t;for(var n=new re,r=0;r<e.length;r++)n.add(e[r]);for(var r=0;r<t.length;r++)et.isPointInRing(t[r],e)||n.add(t[r]);var s=ot.toCoordinateArray(n);return s.length<3?this.padArray3(s):s},getConvexHull:function(){if(this.inputPts.length===0)return this.geomFactory.createGeometryCollection(null);if(this.inputPts.length===1)return this.geomFactory.createPoint(this.inputPts[0]);if(this.inputPts.length===2)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),n=this.grahamScan(e),r=this.toCoordinateArray(n);return this.lineOrPolygon(r)},padArray3:function(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++)n<t.length?e[n]=t[n]:e[n]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++)e[n]=t[0];for(var r=1;r<t.length;r++)t[r].x<e[0].x&&(e[0]=t[r]),t[r].x-t[r].y<e[1].x-e[1].y&&(e[1]=t[r]),t[r].y>e[2].y&&(e[2]=t[r]),t[r].x+t[r].y>e[3].x+e[3].y&&(e[3]=t[r]),t[r].x>e[4].x&&(e[4]=t[r]),t[r].x-t[r].y>e[5].x-e[5].y&&(e[5]=t[r]),t[r].y<e[6].y&&(e[6]=t[r]),t[r].x+t[r].y<e[7].x+e[7].y&&(e[7]=t[r]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var r=t.get(n);e[n]=r}return e},grahamScan:function(t){var e=null,n=new ie;e=n.push(t[0]),e=n.push(t[1]),e=n.push(t[2]);for(var r=3;r<t.length;r++){for(e=n.pop();!n.empty()&&et.computeOrientation(n.peek(),e,t[r])>0;)e=n.pop();e=n.push(e),e=n.push(t[r])}return e=n.push(t[0]),n},interfaces_:function(){return[]},getClass:function(){return an}}),an.extractCoordinates=function(t){var e=new lr;return t.apply(e),e.getCoordinates()},a(hr.prototype,{compare:function(t,e){var n=t,r=e;return hr.polarCompare(this.origin,n,r)},interfaces_:function(){return[S]},getClass:function(){return hr}}),hr.polarCompare=function(t,e,n){var r=e.x-t.x,s=e.y-t.y,o=n.x-t.x,u=n.y-t.y,l=et.computeOrientation(t,e,n);if(l===et.COUNTERCLOCKWISE)return 1;if(l===et.CLOCKWISE)return-1;var x=r*r+s*s,P=o*o+u*u;return P>x?-1:x>P?1:0},an.RadialComparator=hr,a(ae.prototype,{transformPoint:function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);r!==null&&r instanceof qt&&!r.isEmpty()||(n=!1);for(var s=new w,o=0;o<t.getNumInteriorRing();o++){var u=this.transformLinearRing(t.getInteriorRingN(o),t);u===null||u.isEmpty()||(u instanceof qt||(n=!1),s.add(u))}if(n)return this.factory.createPolygon(r,s.toArray([]));var l=new w;return r!==null&&l.add(r),l.addAll(s),this.factory.buildGeometry(l)},createCoordinateSequence:function(t){return this.factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(t,e){for(var n=new w,r=0;r<t.getNumGeometries();r++){var s=this.transformLineString(t.getGeometryN(r),t);s!==null&&(s.isEmpty()||n.add(s))}return this.factory.buildGeometry(n)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var n=new w,r=0;r<t.getNumGeometries();r++){var s=this.transformPoint(t.getGeometryN(r),t);s!==null&&(s.isEmpty()||n.add(s))}return this.factory.buildGeometry(n)},transformMultiPolygon:function(t,e){for(var n=new w,r=0;r<t.getNumGeometries();r++){var s=this.transformPolygon(t.getGeometryN(r),t);s!==null&&(s.isEmpty()||n.add(s))}return this.factory.buildGeometry(n)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var n=new w,r=0;r<t.getNumGeometries();r++){var s=this.transform(t.getGeometryN(r));s!==null&&(this.pruneEmptyGeometry&&s.isEmpty()||n.add(s))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(ft.toGeometryArray(n)):this.factory.buildGeometry(n)},transform:function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof At)return this.transformPoint(t,null);if(t instanceof ce)return this.transformMultiPoint(t,null);if(t instanceof qt)return this.transformLinearRing(t,null);if(t instanceof gt)return this.transformLineString(t,null);if(t instanceof he)return this.transformMultiLineString(t,null);if(t instanceof Tt)return this.transformPolygon(t,null);if(t instanceof Kt)return this.transformMultiPolygon(t,null);if(t instanceof pt)return this.transformGeometryCollection(t,null);throw new h("Unknown Geometry subtype: "+t.getClass().getName())},transformLinearRing:function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(n===null)return this.factory.createLinearRing(null);var r=n.size();return r>0&&4>r&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)},interfaces_:function(){return[]},getClass:function(){return ae}}),a(cr.prototype,{snapVertices:function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;n>r;r++){var s=t.get(r),o=this.findSnapForVertex(s,e);o!==null&&(t.set(r,new v(o)),r===0&&this._isClosed&&t.set(t.size()-1,new v(o)))}},findSnapForVertex:function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n]}return null},snapTo:function(t){var e=new A(this.srcPts);this.snapVertices(e,t),this.snapSegments(e,t);var n=e.toCoordinateArray();return n},snapSegments:function(t,e){if(e.length===0)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;n>r;r++){var s=e[r],o=this.findSegmentIndexToSnap(s,t);o>=0&&t.add(o+1,new v(s),!1)}},findSegmentIndexToSnap:function(t,e){for(var n=c.MAX_VALUE,r=-1,s=0;s<e.size()-1;s++){if(this.seg.p0=e.get(s),this.seg.p1=e.get(s+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1}var o=this.seg.distance(t);o<this.snapTolerance&&n>o&&(n=o,r=s)}return r},setAllowSnappingToSourceVertices:function(t){this.allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return cr}}),cr.isClosed=function(t){return t.length<=1?!1:t[0].equals2D(t[t.length-1])},a(se.prototype,{snapTo:function(t,e){var n=this.extractTargetCoordinates(t),r=new Ar(e,n);return r.transform(this.srcGeom)},snapToSelf:function(t,e){var n=this.extractTargetCoordinates(this.srcGeom),r=new Ar(t,n,!0),s=r.transform(this.srcGeom),o=s;return e&&K(o,rn)&&(o=s.buffer(0)),o},computeSnapTolerance:function(t){var e=this.computeMinimumSegmentLength(t),n=e/10;return n},extractTargetCoordinates:function(t){for(var e=new re,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=c.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);e>r&&(e=r)}return e},interfaces_:function(){return[]},getClass:function(){return se}}),se.snap=function(t,e,n){var r=new Array(2).fill(null),s=new se(t);r[0]=s.snapTo(e,n);var o=new se(e);return r[1]=o.snapTo(r[0],n),r},se.computeOverlaySnapTolerance=function(){if(arguments.length===1){var t=arguments[0],e=se.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===Ct.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(arguments.length===2){var s=arguments[0],o=arguments[1];return Math.min(se.computeOverlaySnapTolerance(s),se.computeOverlaySnapTolerance(o))}},se.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal(),n=Math.min(e.getHeight(),e.getWidth()),r=n*se.SNAP_PRECISION_FACTOR;return r},se.snapToSelf=function(t,e,n){var r=new se(t);return r.snapToSelf(e,n)},se.SNAP_PRECISION_FACTOR=1e-9,C(Ar,ae),a(Ar.prototype,{snapLine:function(t,e){var n=new cr(t,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(e)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(r)},interfaces_:function(){return[]},getClass:function(){return Ar}}),a(Ne.prototype,{getCommon:function(){return c.longBitsToDouble(this.commonBits)},add:function(t){var e=c.doubleToLongBits(t);if(this.isFirst)return this.commonBits=e,this.commonSignExp=Ne.signExpBits(this.commonBits),this.isFirst=!1,null;var n=Ne.signExpBits(e);return n!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=Ne.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=Ne.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(arguments.length===1){var t=arguments[0],e=c.longBitsToDouble(t),n=Long.toBinaryString(t),r="0000000000000000000000000000000000000000000000000000000000000000"+n,s=r.substring(r.length-64),o=s.substring(0,1)+"  "+s.substring(1,12)+"(exp) "+s.substring(12)+" [ "+e+" ]";return o}},interfaces_:function(){return[]},getClass:function(){return Ne}}),Ne.getBit=function(t,e){var n=1<<e;return(t&n)!==0?1:0},Ne.signExpBits=function(t){return t>>52},Ne.zeroLowerBits=function(t,e){var n=(1<<e)-1,r=~n,s=t&r;return s},Ne.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(Ne.getBit(t,r)!==Ne.getBit(e,r))return n;n++}return 52},a(Fr.prototype,{addCommonBits:function(t){var e=new Gr(this.commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(this.commonCoord.x===0&&this.commonCoord.y===0)return t;var e=new v(this.commonCoord);e.x=-e.x,e.y=-e.y;var n=new Gr(e);return t.apply(n),t.geometryChanged(),t},getCommonCoordinate:function(){return this.commonCoord},add:function(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return Fr}}),a(Mi.prototype,{filter:function(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y)},getCommonCoordinate:function(){return new v(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[Nt]},getClass:function(){return Mi}}),a(Gr.prototype,{filter:function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[kn]},getClass:function(){return Gr}}),Fr.CommonCoordinateFilter=Mi,Fr.Translater=Gr,a(Yn.prototype,{next:function(){if(this.atStart)return this.atStart=!1,Yn.isAtomic(this.parent)&&this.index++,this.parent;if(this.subcollectionIterator!==null){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new R;var t=this.parent.getGeometryN(this.index++);return t instanceof pt?(this.subcollectionIterator=new Yn(t),this.subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(this.subcollectionIterator!==null){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[X]},getClass:function(){return Yn}}),Yn.isAtomic=function(t){return!(t instanceof pt)},a(Hn.prototype,{locateInternal:function(){if(arguments[0]instanceof v&&arguments[1]instanceof Tt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return f.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===f.EXTERIOR)return f.EXTERIOR;if(r===f.BOUNDARY)return f.BOUNDARY;for(var s=0;s<e.getNumInteriorRing();s++){var o=e.getInteriorRingN(s),u=this.locateInPolygonRing(t,o);if(u===f.INTERIOR)return f.EXTERIOR;if(u===f.BOUNDARY)return f.BOUNDARY}return f.INTERIOR}if(arguments[0]instanceof v&&arguments[1]instanceof gt){var l=arguments[0],x=arguments[1];if(!x.getEnvelopeInternal().intersects(l))return f.EXTERIOR;var P=x.getCoordinates();return x.isClosed()||!l.equals(P[0])&&!l.equals(P[P.length-1])?et.isOnLine(l,P)?f.INTERIOR:f.EXTERIOR:f.BOUNDARY}if(arguments[0]instanceof v&&arguments[1]instanceof At){var z=arguments[0],k=arguments[1],j=k.getCoordinate();return j.equals2D(z)?f.INTERIOR:f.EXTERIOR}},locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?et.locatePointInRing(t,e.getCoordinates()):f.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==f.EXTERIOR},updateLocationInfo:function(t){t===f.INTERIOR&&(this.isIn=!0),t===f.BOUNDARY&&this.numBoundaries++},computeLocation:function(t,e){if(e instanceof At&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof gt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof Tt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof he)for(var n=e,r=0;r<n.getNumGeometries();r++){var s=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof Kt)for(var o=e,r=0;r<o.getNumGeometries();r++){var u=o.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,u))}else if(e instanceof pt)for(var l=new Yn(e);l.hasNext();){var x=l.next();x!==e&&this.computeLocation(t,x)}},locate:function(t,e){return e.isEmpty()?f.EXTERIOR:e instanceof gt?this.locateInternal(t,e):e instanceof Tt?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?f.BOUNDARY:this.numBoundaries>0||this.isIn?f.INTERIOR:f.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return Hn}}),a(gr.prototype,{interfaces_:function(){return[]},getClass:function(){return gr}}),gr.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new h;var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof v&&arguments[1]instanceof v){var s=arguments[0],o=arguments[1],u=o.x-s.x,l=o.y-s.y;if(u===0&&l===0)throw new h;return gr.octant(u,l)}},a(qr.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return qr}}),a(Ys.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:gr.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},getData:function(){return this.data},toString:function(){return $t.toLineString(new Ie(this.pts))},interfaces_:function(){return[qr]},getClass:function(){return Ys}}),a(_i.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return _i}}),a(un.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[_i,y]},getClass:function(){return un}}),a(Hs.prototype,{poll:function(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,n=this.items.get(t);2*t<=this._size&&(e=2*t,e!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(n)<0);t=e)this.items.set(t,this.items.get(e));this.items.set(t,n)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return this._size===0},add:function(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2)this.items.set(e,this.items.get(Math.trunc(e/2)));this.items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return Hs}}),a(wn.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return wn}}),a(bi.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){},interfaces_:function(){return[]},getClass:function(){return bi}}),a(oe.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(t){T.isTrue(this.bounds===null),this.childBoundables.add(t)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return this.bounds===null&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[_i,y]},getClass:function(){return oe}}),oe.serialVersionUID=6493722185909574e3;var Qe={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return Qe.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?en.sort(n,e):en.sort(n);for(var r=t.iterator(),s=0,o=n.length;o>s;s++)r.next(),r.set(n[s])},singletonList:function(t){var e=new w;return e.add(t),e}};a(ue.prototype,{expandToQueue:function(t,e){var n=ue.isComposite(this.boundable1),r=ue.isComposite(this.boundable2);if(n&&r)return ue.area(this.boundable1)>ue.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,e),null):(this.expand(this.boundable2,this.boundable1,t,e),null);if(n)return this.expand(this.boundable1,this.boundable2,t,e),null;if(r)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new h},isLeaves:function(){return!(ue.isComposite(this.boundable1)||ue.isComposite(this.boundable2))},compareTo:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},expand:function(t,e,n,r){for(var s=t.getChildBoundables(),o=s.iterator();o.hasNext();){var u=o.next(),l=new ue(u,e,this.itemDistance);l.getDistance()<r&&n.add(l)}},getBoundable:function(t){return t===0?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[g]},getClass:function(){return ue}}),ue.area=function(t){return t.getBounds().getArea()},ue.isComposite=function(t){return t instanceof oe},a(Bt.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this.root));if(arguments.length===1){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var s=r.next();s instanceof oe?n+=this.size(s):s instanceof un&&(n+=1)}return n}},removeItem:function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var s=r.next();s instanceof un&&s.getItem()===e&&(n=s)}return n!==null?(t.getChildBoundables().remove(n),!0):!1},itemsTree:function(){if(arguments.length===0){this.build();var t=this.itemsTree(this.root);return t===null?new w:t}if(arguments.length===1){for(var e=arguments[0],n=new w,r=e.getChildBoundables().iterator();r.hasNext();){var s=r.next();if(s instanceof oe){var o=this.itemsTree(s);o!==null&&n.add(o)}else s instanceof un?n.add(s.getItem()):T.shouldNeverReachHere()}return n.size()<=0?null:n}},insert:function(t,e){T.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new un(t,e))},boundablesAtLevel:function(){if(arguments.length===1){var t=arguments[0],e=new w;return this.boundablesAtLevel(t,this.root,e),e}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];if(T.isTrue(n>-2),r.getLevel()===n)return s.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var u=o.next();u instanceof oe?this.boundablesAtLevel(n,u,s):(T.isTrue(u instanceof un),n===-1&&s.add(u))}return null}},query:function(){if(arguments.length===1){var t=arguments[0];this.build();var e=new w;return this.isEmpty()||this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e}if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),n)&&this.query(n,this.root,r)}else if(arguments.length===3){if(K(arguments[2],wn)&&arguments[0]instanceof Object&&arguments[1]instanceof oe)for(var s=arguments[0],o=arguments[1],u=arguments[2],l=o.getChildBoundables(),x=0;x<l.size();x++){var P=l.get(x);this.getIntersectsOp().intersects(P.getBounds(),s)&&(P instanceof oe?this.query(s,P,u):P instanceof un?u.visitItem(P.getItem()):T.shouldNeverReachHere())}else if(K(arguments[2],N)&&arguments[0]instanceof Object&&arguments[1]instanceof oe)for(var z=arguments[0],k=arguments[1],j=arguments[2],l=k.getChildBoundables(),x=0;x<l.size();x++){var P=l.get(x);this.getIntersectsOp().intersects(P.getBounds(),z)&&(P instanceof oe?this.query(z,P,j):P instanceof un?j.add(P.getItem()):T.shouldNeverReachHere())}}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.build(),this.getIntersectsOp().intersects(this.root.getBounds(),t)?this.remove(t,this.root,e):!1}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2],o=this.removeItem(r,s);if(o)return!0;for(var u=null,l=r.getChildBoundables().iterator();l.hasNext();){var x=l.next();if(this.getIntersectsOp().intersects(x.getBounds(),n)&&x instanceof oe&&(o=this.remove(n,x,s))){u=x;break}}return u!==null&&u.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(u),o}},createHigherLevels:function(t,e){T.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return n.size()===1?n.get(0):this.createHigherLevels(n,e+1)},depth:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(arguments.length===1){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var r=n.next();if(r instanceof oe){var s=this.depth(r);s>e&&(e=s)}}return e+1}},createParentBoundables:function(t,e){T.isTrue(!t.isEmpty());var n=new w;n.add(this.createNode(e));var r=new w(t);Qe.sort(r,this.getComparator());for(var s=r.iterator();s.hasNext();){var o=s.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[y]},getClass:function(){return Bt}}),Bt.compareDoubles=function(t,e){return t>e?1:e>t?-1:0},Bt.IntersectsOp=zl,Bt.serialVersionUID=-3886435814360241e3,Bt.DEFAULT_NODE_CAPACITY=10,a(Di.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return Di}}),C(Ft,Bt),a(Ft.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){T.isTrue(t.length>0);for(var n=new w,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},createNode:function(t){return new Br(t)},size:function(){return arguments.length===0?Bt.prototype.size.call(this):Bt.prototype.size.apply(this,arguments)},insert:function(){if(arguments.length!==2)return Bt.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];return t.isNull()?null:void Bt.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return Ft.intersectsOp},verticalSlices:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),s=t.iterator(),o=0;e>o;o++){r[o]=new w;for(var u=0;s.hasNext()&&n>u;){var l=s.next();r[o].add(l),u++}}return r},query:function(){if(arguments.length===1){var t=arguments[0];return Bt.prototype.query.call(this,t)}if(arguments.length===2){var e=arguments[0],n=arguments[1];Bt.prototype.query.call(this,e,n)}else if(arguments.length===3){if(K(arguments[2],wn)&&arguments[0]instanceof Object&&arguments[1]instanceof oe){var r=arguments[0],s=arguments[1],o=arguments[2];Bt.prototype.query.call(this,r,s,o)}else if(K(arguments[2],N)&&arguments[0]instanceof Object&&arguments[1]instanceof oe){var u=arguments[0],l=arguments[1],x=arguments[2];Bt.prototype.query.call(this,u,l,x)}}},getComparator:function(){return Ft.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return Bt.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return Bt.prototype.remove.call(this,t,e)}return Bt.prototype.remove.apply(this,arguments)},depth:function(){return arguments.length===0?Bt.prototype.depth.call(this):Bt.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){T.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new w(t);Qe.sort(r,Ft.xComparator);var s=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(s,e)},nearestNeighbour:function(){if(arguments.length===1){if(K(arguments[0],Di)){var t=arguments[0],e=new ue(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof ue){var n=arguments[0];return this.nearestNeighbour(n,c.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof Ft&&K(arguments[1],Di)){var r=arguments[0],s=arguments[1],e=new ue(this.getRoot(),r.getRoot(),s);return this.nearestNeighbour(e)}if(arguments[0]instanceof ue&&typeof arguments[1]=="number"){var o=arguments[0],u=arguments[1],l=u,x=null,P=new Hs;for(P.add(o);!P.isEmpty()&&l>0;){var z=P.poll(),k=z.getDistance();if(k>=l)break;z.isLeaves()?(l=k,x=z):z.expandToQueue(P,l)}return[x.getBoundable(0).getItem(),x.getBoundable(1).getItem()]}}else if(arguments.length===3){var j=arguments[0],nt=arguments[1],at=arguments[2],ut=new un(j,nt),e=new ue(this.getRoot(),ut,at);return this.nearestNeighbour(e)[0]}},interfaces_:function(){return[bi,y]},getClass:function(){return Ft}}),Ft.centreX=function(t){return Ft.avg(t.getMinX(),t.getMaxX())},Ft.avg=function(t,e){return(t+e)/2},Ft.centreY=function(t){return Ft.avg(t.getMinY(),t.getMaxY())},C(Br,oe),a(Br.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();t===null?t=new D(n.getBounds()):t.expandToInclude(n.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return Br}}),Ft.STRtreeNode=Br,Ft.serialVersionUID=0x39920f7d5f261e0,Ft.xComparator={interfaces_:function(){return[S]},compare:function(t,e){return Bt.compareDoubles(Ft.centreX(t.getBounds()),Ft.centreX(e.getBounds()))}},Ft.yComparator={interfaces_:function(){return[S]},compare:function(t,e){return Bt.compareDoubles(Ft.centreY(t.getBounds()),Ft.centreY(e.getBounds()))}},Ft.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},Ft.DEFAULT_NODE_CAPACITY=10,a(le.prototype,{interfaces_:function(){return[]},getClass:function(){return le}}),le.relativeSign=function(t,e){return e>t?-1:t>e?1:0},le.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=le.relativeSign(e.x,n.x),s=le.relativeSign(e.y,n.y);switch(t){case 0:return le.compareValue(r,s);case 1:return le.compareValue(s,r);case 2:return le.compareValue(s,-r);case 3:return le.compareValue(-r,s);case 4:return le.compareValue(-r,-s);case 5:return le.compareValue(-s,-r);case 6:return le.compareValue(-s,r);case 7:return le.compareValue(r,-s)}return T.shouldNeverReachHere("invalid octant value"),0},le.compareValue=function(t,e){return 0>t?-1:t>0?1:0>e?-1:e>0?1:0},a(Ws.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:le.compare(this.segmentOctant,this.coord,e.coord)},isEndPoint:function(t){return this.segmentIndex!==0||this._isInterior?this.segmentIndex===t:!0},isInterior:function(){return this._isInterior},interfaces_:function(){return[g]},getClass:function(){return Ws}}),a(Zs.prototype,{getSplitCoordinates:function(){var t=new A;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new w;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this.edge.getCoordinate(n),n)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),r=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(r)&&t.add(new O(e+1))}},addEdgeCoordinates:function(t,e,n){e.segmentIndex-t.segmentIndex+2;var r=this.edge.getCoordinate(e.segmentIndex),s=e.isInterior()||!e.coord.equals2D(r);n.add(new v(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this.edge.getCoordinate(o));s&&n.add(new v(e.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),s=this.createSplitEdge(n,r);t.add(s),n=r}},findCollapseIndex:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,r===1?(n[0]=t.segmentIndex+1,!0):!1},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var s=n.next(),o=this.findCollapseIndex(r,s,e);o&&t.add(new O(e[0])),r=s}},getEdge:function(){return this.edge},addEndpoints:function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.getCoordinate(e.segmentIndex),s=e.isInterior()||!e.coord.equals2D(r);s||n--;var o=new Array(n).fill(null),u=0;o[u++]=new v(t.coord);for(var l=t.segmentIndex+1;l<=e.segmentIndex;l++)o[u++]=this.edge.getCoordinate(l);return s&&(o[u]=new v(e.coord)),new Xe(o,this.edge.getData())},add:function(t,e){var n=new Ws(this.edge,t,e,this.edge.getSegmentOctant(e)),r=this.nodeMap.get(n);return r!==null?(T.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this.nodeMap.put(n,n),n)},checkSplitEdgesCorrectness:function(t){var e=this.edge.getCoordinates(),n=t.get(0),r=n.getCoordinate(0);if(!r.equals2D(e[0]))throw new L("bad split edge start point at "+r);var s=t.get(t.size()-1),o=s.getCoordinates(),u=o[o.length-1];if(!u.equals2D(e[e.length-1]))throw new L("bad split edge end point at "+u)},interfaces_:function(){return[]},getClass:function(){return Zs}}),a(za.prototype,{next:function(){return this.currNode===null?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):this.nextNode===null?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex>this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return this.nextNode!==null},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[X]},getClass:function(){return za}}),a(Js.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[qr]},getClass:function(){return Js}}),a(Xe.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},safeOctant:function(t,e){return t.equals2D(e)?0:gr.octant(t,e)},getData:function(){return this.data},addIntersection:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(arguments.length===4){var n=arguments[0],r=arguments[1],s=arguments[3],o=new v(n.getIntersection(s));this.addIntersection(o,r)}},toString:function(){return $t.toLineString(new Ie(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(t,e){var n=e,r=n+1;if(r<this.pts.length){var s=this.pts[r];t.equals2D(s)&&(n=r)}var o=this.nodeList.add(t,n);return o},addIntersections:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},interfaces_:function(){return[Js]},getClass:function(){return Xe}}),Xe.getNodedSubstrings=function(){if(arguments.length===1){var t=arguments[0],e=new w;return Xe.getNodedSubstrings(t,e),e}if(arguments.length===2)for(var n=arguments[0],r=arguments[1],s=n.iterator();s.hasNext();){var o=s.next();o.getNodeList().addSplitEdges(r)}},a(zr.prototype,{overlap:function(){if(arguments.length!==2){if(arguments.length===4){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this.overlapSeg1),n.getLineSegment(r,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}}},interfaces_:function(){return[]},getClass:function(){return zr}}),a(Ks.prototype,{getLineSegment:function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},computeSelect:function(t,e,n,r){var s=this.pts[e],o=this.pts[n];if(r.tempEnv1.init(s,o),n-e===1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var u=Math.trunc((e+n)/2);u>e&&this.computeSelect(t,e,u,r),n>u&&this.computeSelect(t,u,n,r)},getCoordinates:function(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,n=this.start;n<=this.end;n++)t[e++]=this.pts[n];return t},computeOverlaps:function(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e)},setId:function(t){this.id=t},select:function(t,e){this.computeSelect(t,this.start,this.end,e)},getEnvelope:function(){if(this.env===null){var t=this.pts[this.start],e=this.pts[this.end];this.env=new D(t,e)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(t,e,n,r,s,o){var u=this.pts[t],l=this.pts[e],x=n.pts[r],P=n.pts[s];if(e-t===1&&s-r===1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(u,l),o.tempEnv2.init(x,P),!o.tempEnv1.intersects(o.tempEnv2))return null;var z=Math.trunc((t+e)/2),k=Math.trunc((r+s)/2);z>t&&(k>r&&this.computeOverlapsInternal(t,z,n,r,k,o),s>k&&this.computeOverlapsInternal(t,z,n,k,s,o)),e>z&&(k>r&&this.computeOverlapsInternal(z,e,n,r,k,o),s>k&&this.computeOverlapsInternal(z,e,n,k,s,o))},interfaces_:function(){return[]},getClass:function(){return Ks}}),a(yt.prototype,{interfaces_:function(){return[]},getClass:function(){return yt}}),yt.isNorthern=function(t){return t===yt.NE||t===yt.NW},yt.isOpposite=function(t,e){if(t===e)return!1;var n=(t-e+4)%4;return n===2},yt.commonHalfPlane=function(t,e){if(t===e)return t;var n=(t-e+4)%4;if(n===2)return-1;var r=e>t?t:e,s=t>e?t:e;return r===0&&s===3?3:r},yt.isInHalfPlane=function(t,e){return e===yt.SE?t===yt.SE||t===yt.SW:t===e||t===e+1},yt.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new h;return t>=0?e>=0?yt.NE:yt.SE:e>=0?yt.NW:yt.SW}if(arguments[0]instanceof v&&arguments[1]instanceof v){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new h;return r.x>=n.x?r.y>=n.y?yt.NE:yt.SE:r.y>=n.y?yt.NW:yt.SW}},yt.NE=0,yt.NW=1,yt.SW=2,yt.SE=3,a(De.prototype,{interfaces_:function(){return[]},getClass:function(){return De}}),De.getChainStartIndices=function(t){var e=0,n=new w;n.add(new O(e));do{var r=De.findChainEnd(t,e);n.add(new O(r)),e=r}while(e<t.length-1);var s=De.toIntArray(n);return s},De.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=yt.quadrant(t[n],t[n+1]),s=e+1;s<t.length;){if(!t[s-1].equals2D(t[s])){var o=yt.quadrant(t[s-1],t[s]);if(o!==r)break}s++}return s-1},De.getChains=function(){if(arguments.length===1){var t=arguments[0];return De.getChains(t,null)}if(arguments.length===2){for(var e=arguments[0],n=arguments[1],r=new w,s=De.getChainStartIndices(e),o=0;o<s.length-1;o++){var u=new Ks(e,s[o],s[o+1],n);r.add(u)}return r}},De.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},a(Vr.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return Vr}}),a(Ai.prototype,{setSegmentIntersector:function(t){this.segInt=t},interfaces_:function(){return[Vr]},getClass:function(){return Ai}}),C(Sn,Ai),a(Sn.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return Xe.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(t){for(var e=De.getChains(t.getCoordinates(),t),n=e.iterator();n.hasNext();){var r=n.next();r.setId(this.idCounter++),this.index.insert(r.getEnvelope(),r),this.monoChains.add(r)}},computeNodes:function(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new kr(this.segInt),e=this.monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this.index.query(n.getEnvelope()),s=r.iterator();s.hasNext();){var o=s.next();if(o.getId()>n.getId()&&(n.computeOverlaps(o,t),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return Sn}}),C(kr,zr),a(kr.prototype,{overlap:function(){if(arguments.length!==4)return zr.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3],s=t.getContext(),o=n.getContext();this.si.processIntersections(s,e,o,r)},interfaces_:function(){return[]},getClass:function(){return kr}}),Sn.SegmentOverlapAction=kr,C(ge,L),a(ge.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return ge}}),ge.msgWithCoord=function(t,e){return e!==null?t+" [ "+e+" ]":t},a(Ur.prototype,{processIntersections:function(t,e,n,r){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return Ur}}),a(xn.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(t){this.isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(t){this.findAllIntersections=t},setKeepIntersections:function(t){this.keepIntersections=t},processIntersections:function(t,e,n,r){if(!this.findAllIntersections&&this.hasIntersection()||t===n&&e===r)return null;if(this.isCheckEndSegmentsOnly){var s=this.isEndSegment(t,e)||this.isEndSegment(n,r);if(!s)return null}var o=t.getCoordinates()[e],u=t.getCoordinates()[e+1],l=n.getCoordinates()[r],x=n.getCoordinates()[r+1];this.li.computeIntersection(o,u,l,x),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=o,this.intSegments[1]=u,this.intSegments[2]=l,this.intSegments[3]=x,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(t,e){return e===0?!0:e>=t.size()-2},hasIntersection:function(){return this.interiorIntersection!==null},isDone:function(){return this.findAllIntersections?!1:this.interiorIntersection!==null},interfaces_:function(){return[Ur]},getClass:function(){return xn}}),xn.createAllIntersectionsFinder=function(t){var e=new xn(t);return e.setFindAllIntersections(!0),e},xn.createAnyIntersectionFinder=function(t){return new xn(t)},xn.createIntersectionCounter=function(t){var e=new xn(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},a(Xr.prototype,{execute:function(){return this.segInt!==null?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this.findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new xn(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new Sn;return t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection()?(this._isValid=!1,null):void 0},checkValid:function(){if(this.execute(),!this._isValid)throw new ge(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+$t.toLineString(t[0],t[1])+" and "+$t.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return Xr}}),Xr.computeIntersections=function(t){var e=new Xr(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},a(Wn.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return Wn}}),Wn.toSegmentStrings=function(t){for(var e=new w,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Ys(r.getCoordinates(),r))}return e},Wn.checkValid=function(t){var e=new Wn(t);e.checkValid()},a(fr.prototype,{map:function(t){for(var e=new w,n=0;n<t.getNumGeometries();n++){var r=this.mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(ft.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return fr}}),fr.map=function(t,e){var n=new fr(e);return n.map(t)},a($.prototype,{interfaces_:function(){return[]},getClass:function(){return $}}),$.opposite=function(t){return t===$.LEFT?$.RIGHT:t===$.RIGHT?$.LEFT:t},$.ON=0,$.LEFT=1,$.RIGHT=2,a(fe.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==f.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===f.NONE&&(this.location[e]=t)},isLine:function(){return this.location.length===1},merge:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[$.ON]=this.location[$.ON],e[$.LEFT]=f.NONE,e[$.RIGHT]=f.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===f.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[$.LEFT];this.location[$.LEFT]=this.location[$.RIGHT],this.location[$.RIGHT]=t},toString:function(){var t=new dt;return this.location.length>1&&t.append(f.toLocationSymbol(this.location[$.LEFT])),t.append(f.toLocationSymbol(this.location[$.ON])),this.location.length>1&&t.append(f.toLocationSymbol(this.location[$.RIGHT])),t.toString()},setLocations:function(t,e,n){this.location[$.ON]=t,this.location[$.LEFT]=e,this.location[$.RIGHT]=n},get:function(t){return t<this.location.length?this.location[t]:f.NONE},isArea:function(){return this.location.length>1},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===f.NONE)return!0;return!1},setLocation:function(){if(arguments.length===1){var t=arguments[0];this.setLocation($.ON,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.location[e]=n}},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(f.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return fe}}),a(zt.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;2>e;e++)this.elt[e]===null&&t.elt[e]!==null?this.elt[e]=new fe(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get($.ON)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},toString:function(){var t=new dt;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.elt[t].setLocation($.ON,e)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.elt[n].setLocation(r,s)}},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new fe(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return zt}}),zt.toLineLabel=function(t){for(var e=new zt(f.NONE),n=0;2>n;n++)e.setLocation(n,t.getLocation(n));return e},a(dr.prototype,{computeRing:function(){if(this.ring!==null)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++)t[e]=this.pts.get(e);this.ring=this.geometryFactory.createLinearRing(t),this._isHole=et.isCCW(this.ring.getCoordinates())},isIsolated:function(){return this.label.getGeometryCount()===1},computePoints:function(t){this.startDe=t;var e=t,n=!0;do{if(e===null)throw new ge("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new ge("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var r=e.getLabel();T.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(t){return this.pts.get(t)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode(),n=e.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},addPoints:function(t,e,n){var r=t.getCoordinates();if(e){var s=1;n&&(s=0);for(var o=s;o<r.length;o++)this.pts.add(r[o])}else{var s=r.length-2;n&&(s=r.length-1);for(var o=s;o>=0;o--)this.pts.add(r[o])}},isHole:function(){return this._isHole},setInResult:function(){var t=this.startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this.startDe)},containsPoint:function(t){var e=this.getLinearRing(),n=e.getEnvelopeInternal();if(!n.contains(t)||!et.isPointInRing(t,e.getCoordinates()))return!1;for(var r=this.holes.iterator();r.hasNext();){var s=r.next();if(s.containsPoint(t))return!1}return!0},addHole:function(t){this.holes.add(t)},isShell:function(){return this.shell===null},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(arguments.length===1){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],r=e.getLocation(n,$.RIGHT);if(r===f.NONE)return null;if(this.label.getLocation(n)===f.NONE)return this.label.setLocation(n,r),null}},setShell:function(t){this.shell=t,t!==null&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this.holes.size()).fill(null),n=0;n<this.holes.size();n++)e[n]=this.holes.get(n).getLinearRing();var r=t.createPolygon(this.getLinearRing(),e);return r},interfaces_:function(){return[]},getClass:function(){return dr}}),C(Fi,dr),a(Fi.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return Fi}}),C(Yr,dr),a(Yr.prototype,{buildMinimalRings:function(){var t=new w,e=this.startDe;do{if(e.getMinEdgeRing()===null){var n=new Fi(e,this.geometryFactory);t.add(n)}e=e.getNext()}while(e!==this.startDe);return t},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this.startDe;do{var e=t.getNode();e.getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this.startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return Yr}}),a(Ln.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){T.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return Ln}}),C(ln,Ln),a(ln.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){var e=t.next();if(e.getEdge().isInResult())return!0}return!1},isIsolated:function(){return this.label.getGeometryCount()===1},getCoordinate:function(){return this.coord},print:function(t){t.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(t){},computeMergedLocation:function(t,e){var n=f.NONE;if(n=this.label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==f.BOUNDARY&&(n=r)}return n},setLabel:function(){if(arguments.length!==2)return Ln.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];this.label===null?this.label=new zt(t,e):this.label.setLocation(t,e)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof ln){var t=arguments[0];this.mergeLabel(t.label)}else if(arguments[0]instanceof zt)for(var e=arguments[0],n=0;2>n;n++){var r=this.computeMergedLocation(e,n),s=this.label.getLocation(n);s===f.NONE&&this.label.setLocation(n,r)}},add:function(t){this.edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(this.label===null)return null;var e=f.NONE;this.label!==null&&(e=this.label.getLocation(t));var n=null;switch(e){case f.BOUNDARY:n=f.INTERIOR;break;case f.INTERIOR:n=f.BOUNDARY;break;default:n=f.BOUNDARY}this.label.setLocation(t,n)},interfaces_:function(){return[]},getClass:function(){return ln}}),a(pr.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof v){var t=arguments[0],e=this.nodeMap.get(t);return e===null&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof ln){var n=arguments[0],e=this.nodeMap.get(n.getCoordinate());return e===null?(this.nodeMap.put(n.getCoordinate(),n),n):(e.mergeLabel(n),e)}},print:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new w,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===f.BOUNDARY&&e.add(r)}return e},add:function(t){var e=t.getCoordinate(),n=this.addNode(e);n.add(t)},interfaces_:function(){return[]},getClass:function(){return pr}}),a(Ye.prototype,{compareDirection:function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:et.computeOrientation(t.p0,t.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(t){this.node=t},print:function(t){var e=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),r=n.lastIndexOf("."),s=n.substring(r+1);t.print("  "+s+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label)},compareTo:function(t){var e=t;return this.compareDirection(e)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),n=e.lastIndexOf("."),r=e.substring(n+1);return"  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label},computeLabel:function(t){},init:function(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=yt.quadrant(this.dx,this.dy),T.isTrue(!(this.dx===0&&this.dy===0),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[g]},getClass:function(){return Ye}}),C(Zn,Ye),a(Zn.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(t){return this.depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this.label=new zt(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(t,e){if(this.depth[t]!==-999&&this.depth[t]!==e)throw new ge("assigned depths do not match",this.getCoordinate());this.depth[t]=e},isInteriorAreaEdge:function(){for(var e=!0,n=0;2>n;n++)this.label.isArea(n)&&this.label.getLocation(n,$.LEFT)===f.INTERIOR&&this.label.getLocation(n,$.RIGHT)===f.INTERIOR||(e=!1);return e},setNextMin:function(t){this.nextMin=t},print:function(t){Ye.prototype.print.call(this,t),t.print(" "+this.depth[$.LEFT]+"/"+this.depth[$.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this.minEdgeRing=t},isLineEdge:function(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,f.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,f.EXTERIOR);return t&&e&&n},setEdgeRing:function(t){this.edgeRing=t},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t)},setSym:function(t){this.sym=t},setVisitedEdge:function(t){this.setVisited(t),this.sym.setVisited(t)},setEdgeDepths:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===$.LEFT&&(r=-1);var s=$.opposite(t),o=n*r,u=e+o;this.setDepth(t,e),this.setDepth(s,u)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this.next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return Zn}}),Zn.depthFactor=function(t,e){return t===f.EXTERIOR&&e===f.INTERIOR?1:t===f.INTERIOR&&e===f.EXTERIOR?-1:0},a(Jn.prototype,{createNode:function(t){return new ln(t,null)},interfaces_:function(){return[]},getClass:function(){return Jn}}),a(He.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var n=this.edges.get(e);n.print(t),n.eiList.print(t)}},find:function(t){return this.nodes.find(t)},addNode:function(){if(arguments[0]instanceof ln){var t=arguments[0];return this.nodes.addNode(t)}if(arguments[0]instanceof v){var e=arguments[0];return this.nodes.addNode(e)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkResultDirectedEdges()}},debugPrintln:function(t){W.out.println(t)},isBoundaryNode:function(t,e){var n=this.nodes.find(e);if(n===null)return!1;var r=n.getLabel();return r!==null&&r.getLocation(t)===f.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(t,e,n,r){return t.equals(n)?et.computeOrientation(t,e,r)===et.COLLINEAR&&yt.quadrant(t,e)===yt.quadrant(n,r):!1},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(t){W.out.print(t)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(t,e){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),s=r.getCoordinates();if(this.matchInSameDirection(t,e,s[0],s[1])||this.matchInSameDirection(t,e,s[s.length-1],s[s.length-2]))return r}return null},insertEdge:function(t){this.edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var r=new Zn(n,!0),s=new Zn(n,!1);r.setSym(s),s.setSym(r),this.add(r),this.add(s)}},add:function(t){this.nodes.add(t),this.edgeEndList.add(t)},getNodes:function(){return this.nodes.values()},findEdge:function(t,e){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),s=r.getCoordinates();if(t.equals(s[0])&&e.equals(s[1]))return r}return null},interfaces_:function(){return[]},getClass:function(){return He}}),He.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.getEdges().linkResultDirectedEdges()}},a(Gi.prototype,{sortShellsAndHoles:function(t,e,n){for(var r=t.iterator();r.hasNext();){var s=r.next();s.isHole()?n.add(s):e.add(s)}},computePolygons:function(t){for(var e=new w,n=t.iterator();n.hasNext();){var r=n.next(),s=r.toPolygon(this.geometryFactory);e.add(s)}return e},placeFreeHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(r.getShell()===null){var s=this.findEdgeRingContaining(r,t);if(s===null)throw new ge("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(s)}}},buildMinimalEdgeRings:function(t,e,n){for(var r=new w,s=t.iterator();s.hasNext();){var o=s.next();if(o.getMaxNodeDegree()>2){o.linkDirectedEdgesForMinimalEdgeRings();var u=o.buildMinimalRings(),l=this.findShell(u);l!==null?(this.placePolygonHoles(l,u),e.add(l)):n.addAll(u)}else r.add(o)}return r},containsPoint:function(t){for(var e=this.shellList.iterator();e.hasNext();){var n=e.next();if(n.containsPoint(t))return!0}return!1},buildMaximalEdgeRings:function(t){for(var e=new w,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&r.getEdgeRing()===null){var s=new Yr(r,this.geometryFactory);e.add(s),s.setInResult()}}return e},placePolygonHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},getPolygons:function(){var t=this.computePolygons(this.shellList);return t},findEdgeRingContaining:function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),s=n.getCoordinateN(0),o=null,u=null,l=e.iterator();l.hasNext();){var x=l.next(),P=x.getLinearRing(),z=P.getEnvelopeInternal();o!==null&&(u=o.getLinearRing().getEnvelopeInternal());var k=!1;z.contains(r)&&et.isPointInRing(s,P.getCoordinates())&&(k=!0),k&&(o===null||u.contains(z))&&(o=x)}return o},findShell:function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var s=r.next();s.isHole()||(n=s,e++)}return T.isTrue(1>=e,"found two shells in MinimalEdgeRing list"),n},add:function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];He.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),s=new w,o=this.buildMinimalEdgeRings(r,this.shellList,s);this.sortShellsAndHoles(o,this.shellList,s),this.placeFreeHoles(this.shellList,s)}},interfaces_:function(){return[]},getClass:function(){return Gi}}),a(js.prototype,{collectLines:function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList)}},labelIsolatedLine:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,n)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},collectLineEdge:function(t,e,n){var r=t.getLabel(),s=t.getEdge();t.isLineEdge()&&(t.isVisited()||!it.isResultOfOp(r,e)||s.isCovered()||(n.add(s),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next(),s=r.getEdge();if(r.isLineEdge()&&!s.isCoveredSet()){var o=this.op.isCoveredByA(r.getCoordinate());s.setCovered(o)}}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},buildLines:function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(r),n.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(T.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(it.isResultOfOp(r,e)&&e===it.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return js}}),a(Qs.prototype,{filterCoveredNodeToPoint:function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var n=this.geometryFactory.createPoint(e);this.resultPointList.add(n)}},extractNonCoveredResultNodes:function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||n.getEdges().getDegree()!==0&&t!==it.INTERSECTION)){var r=n.getLabel();it.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},build:function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return Qs}}),a(qi.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return qi}}),a(Ce.prototype,{locate:function(t){return Ce.locate(t,this.geom)},interfaces_:function(){return[qi]},getClass:function(){return Ce}}),Ce.isPointInRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?et.isPointInRing(t,e.getCoordinates()):!1},Ce.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Ce.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var s=e.getInteriorRingN(r);if(Ce.isPointInRing(t,s))return!1}return!0},Ce.containsPoint=function(t,e){if(e instanceof Tt)return Ce.containsPointInPolygon(t,e);if(e instanceof pt)for(var n=new Yn(e);n.hasNext();){var r=n.next();if(r!==e&&Ce.containsPoint(t,r))return!0}return!1},Ce.locate=function(t,e){return e.isEmpty()?f.EXTERIOR:Ce.containsPoint(t,e)?f.INTERIOR:f.EXTERIOR},a(Kn.prototype,{getNextCW:function(t){this.getEdges();var e=this.edgeList.indexOf(t),n=e-1;return e===0&&(n=this.edgeList.size()-1),this.edgeList.get(n)},propagateSideLabels:function(t){for(var e=f.NONE,n=this.iterator();n.hasNext();){var r=n.next(),s=r.getLabel();s.isArea(t)&&s.getLocation(t,$.LEFT)!==f.NONE&&(e=s.getLocation(t,$.LEFT))}if(e===f.NONE)return null;for(var o=e,n=this.iterator();n.hasNext();){var r=n.next(),s=r.getLabel();if(s.getLocation(t,$.ON)===f.NONE&&s.setLocation(t,$.ON,o),s.isArea(t)){var u=s.getLocation(t,$.LEFT),l=s.getLocation(t,$.RIGHT);if(l!==f.NONE){if(l!==o)throw new ge("side location conflict",r.getCoordinate());u===f.NONE&&T.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")"),o=u}else T.isTrue(s.getLocation(t,$.LEFT)===f.NONE,"found single null side"),s.setLocation(t,$.RIGHT,o),s.setLocation(t,$.LEFT,o)}}},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},print:function(t){W.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel(),s=r.getLocation(t,$.LEFT);T.isTrue(s!==f.NONE,"Found unlabelled area edge");for(var o=s,u=this.iterator();u.hasNext();){var l=u.next(),x=l.getLabel();T.isTrue(x.isArea(t),"Found non-area edge");var P=x.getLocation(t,$.LEFT),z=x.getLocation(t,$.RIGHT);if(P===z||z!==o)return!1;o=P}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){var n=this.edgeList.get(e);if(n===t)return e}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return this.edgeList===null&&(this.edgeList=new w(this.edgeMap.values())),this.edgeList},getLocation:function(t,e,n){return this.ptInAreaLocation[t]===f.NONE&&(this.ptInAreaLocation[t]=Ce.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t]},toString:function(){var t=new dt;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append(`
`);for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append(`
`)}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.computeLabel(t)}},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next(),s=r.getLabel(),o=0;2>o;o++)s.isLine(o)&&s.getLocation(o)===f.BOUNDARY&&(e[o]=!0);for(var n=this.iterator();n.hasNext();)for(var r=n.next(),s=r.getLabel(),o=0;2>o;o++)if(s.isAnyNull(o)){var u=f.NONE;if(e[o])u=f.EXTERIOR;else{var l=r.getCoordinate();u=this.getLocation(o,l,t)}s.setAllLocationsIfNull(o,u)}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(t,e){this.edgeMap.put(t,e),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return Kn}}),C(Bi,Kn),a(Bi.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,r=0;r<this.resultAreaEdgeList.size();r++){var s=this.resultAreaEdgeList.get(r),o=s.getSym();if(s.getLabel().isArea())switch(t===null&&s.isInResult()&&(t=s),n){case this.SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!s.isInResult())continue;e.setNext(s),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(t===null)throw new ge("no outgoing dirEdge found",this.getCoordinate());T.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){var e=t;this.insertEdgeEnd(e,e)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(1>e)return null;var n=t.get(0);if(e===1)return n;var r=t.get(e-1),s=n.getQuadrant(),o=r.getQuadrant();return yt.isNorthern(s)&&yt.isNorthern(o)?n:!yt.isNorthern(s)&&!yt.isNorthern(o)?r:n.getDy()!==0?n:r.getDy()!==0?r:(T.shouldNeverReachHere("found two horizontal edges incident on node"),null)},print:function(t){W.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(this.resultAreaEdgeList!==null)return this.resultAreaEdgeList;this.resultAreaEdgeList=new w;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.setAllLocationsIfNull(0,t.getLocation(0)),r.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;n>=0;n--){var r=this.edgeList.get(n),s=r.getSym();e===null&&(e=s),t!==null&&s.setNext(t),t=r}e.setNext(t)},computeDepths:function(){if(arguments.length===1){var t=arguments[0],e=this.findIndex(t),n=(t.getLabel(),t.getDepth($.LEFT)),r=t.getDepth($.RIGHT),s=this.computeDepths(e+1,this.edgeList.size(),n),o=this.computeDepths(0,e,s);if(o!==r)throw new ge("depth mismatch at "+t.getCoordinate())}else if(arguments.length===3){for(var u=arguments[0],l=arguments[1],x=arguments[2],P=x,z=u;l>z;z++){var k=this.edgeList.get(z);k.getLabel(),k.setEdgeDepths($.RIGHT,P),P=k.getDepth($.LEFT)}return P}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();n.merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,n=null,r=this.SCANNING_FOR_INCOMING,s=this.resultAreaEdgeList.size()-1;s>=0;s--){var o=this.resultAreaEdgeList.get(s),u=o.getSym();switch(e===null&&o.getEdgeRing()===t&&(e=o),r){case this.SCANNING_FOR_INCOMING:if(u.getEdgeRing()!==t)continue;n=u,r=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this.SCANNING_FOR_INCOMING}}r===this.LINKING_TO_OUTGOING&&(T.isTrue(e!==null,"found null for first outgoing dirEdge"),T.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},getOutgoingDegree:function(){if(arguments.length===0){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(arguments.length===1){for(var r=arguments[0],t=0,e=this.iterator();e.hasNext();){var n=e.next();n.getEdgeRing()===r&&t++}return t}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var t=f.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=f.INTERIOR;break}if(r.isInResult()){t=f.EXTERIOR;break}}}if(t===f.NONE)return null;for(var s=t,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();n.isLineEdge()?n.getEdge().setCovered(s===f.INTERIOR):(n.isInResult()&&(s=f.EXTERIOR),r.isInResult()&&(s=f.INTERIOR))}},computeLabelling:function(t){Kn.prototype.computeLabelling.call(this,t),this.label=new zt(f.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next(),r=n.getEdge(),s=r.getLabel(),o=0;2>o;o++){var u=s.getLocation(o);u!==f.INTERIOR&&u!==f.BOUNDARY||this.label.setLocation(o,f.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Bi}}),C(mr,Jn),a(mr.prototype,{createNode:function(t){return new ln(t,new Bi)},interfaces_:function(){return[]},getClass:function(){return mr}}),a($s.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return $s}}),a(hn.prototype,{isDelete:function(){return this.eventType===hn.DELETE},setDeleteEventIndex:function(t){this.deleteEventIndex=t},getObject:function(){return this.obj},compareTo:function(t){var e=t;return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===hn.INSERT},isSameLabel:function(t){return this.label===null?!1:this.label===t.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[g]},getClass:function(){return hn}}),hn.INSERT=1,hn.DELETE=2,a(zi.prototype,{interfaces_:function(){return[]},getClass:function(){return zi}}),a(Rn.prototype,{isTrivialIntersection:function(t,e,n,r){if(t===n&&this.li.getIntersectionNum()===1){if(Rn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var s=t.getNumPoints()-1;if(e===0&&r===s||r===0&&e===s)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(t){this.isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next(),s=r.getCoordinate();if(t.isIntersection(s))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return e===null?!1:this.isBoundaryPointInternal(t,e[0])?!0:!!this.isBoundaryPointInternal(t,e[1])},setBoundaryNodes:function(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e},addIntersections:function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var s=t.getCoordinates()[e],o=t.getCoordinates()[e+1],u=n.getCoordinates()[r],l=n.getCoordinates()[r+1];this.li.computeIntersection(s,o,u,l),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return Rn}}),Rn.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1},C(Vi,zi),a(Vi.prototype,{prepareEvents:function(){Qe.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(arguments.length===1){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof Rn&&K(arguments[0],N)&&K(arguments[1],N)){var r=arguments[0],s=arguments[1],o=arguments[2];this.addEdges(r,r),this.addEdges(s,s),this.computeIntersections(o)}else if(typeof arguments[2]=="boolean"&&K(arguments[0],N)&&arguments[1]instanceof Rn){var u=arguments[0],l=arguments[1],x=arguments[2];x?this.addEdges(u,null):this.addEdges(u),this.computeIntersections(l)}}},addEdge:function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),s=0;s<r.length-1;s++){var o=new $s(n,s),u=new hn(e,n.getMinX(s),o);this.events.add(u),this.events.add(new hn(n.getMaxX(s),u))}},processOverlaps:function(t,e,n,r){for(var s=n.getObject(),o=t;e>o;o++){var u=this.events.get(o);if(u.isInsert()){var l=u.getObject();n.isSameLabel(u)||(s.computeIntersections(l,r),this.nOverlaps++)}}},addEdges:function(){if(arguments.length===1)for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.addEdge(n,n)}else if(arguments.length===2)for(var r=arguments[0],s=arguments[1],e=r.iterator();e.hasNext();){var n=e.next();this.addEdge(n,s)}},interfaces_:function(){return[]},getClass:function(){return Vi}}),a(jn.prototype,{getMin:function(){return this.min},intersects:function(t,e){return!(this.min>e||this.max<t)},getMax:function(){return this.max},toString:function(){return $t.toLineString(new v(this.min,0),new v(this.max,0))},interfaces_:function(){return[]},getClass:function(){return jn}}),a(to.prototype,{compare:function(t,e){var n=t,r=e,s=(n.min+n.max)/2,o=(r.min+r.max)/2;return o>s?-1:s>o?1:0},interfaces_:function(){return[S]},getClass:function(){return to}}),jn.NodeComparator=to,C(ki,jn),a(ki.prototype,{query:function(t,e,n){return this.intersects(t,e)?void n.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return ki}}),C(Ui,jn),a(Ui.prototype,{buildExtent:function(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max)},query:function(t,e,n){return this.intersects(t,e)?(this.node1!==null&&this.node1.query(t,e,n),void(this.node2!==null&&this.node2.query(t,e,n))):null},interfaces_:function(){return[]},getClass:function(){return Ui}}),a(eo.prototype,{buildTree:function(){Qe.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var t=this.leaves,e=null,n=new w;;){if(this.buildLevel(t,n),n.size()===1)return n.get(0);e=t,t=n,n=e}},insert:function(t,e,n){if(this.root!==null)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new ki(t,e,n))},query:function(t,e,n){this.init(),this.root.query(t,e,n)},buildRoot:function(){return this.root!==null?null:void(this.root=this.buildTree())},printNode:function(t){W.out.println($t.toLineString(new v(t.min,this.level),new v(t.max,this.level)))},init:function(){return this.root!==null?null:void this.buildRoot()},buildLevel:function(t,e){this.level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n),s=n+1<t.size()?t.get(n):null;if(s===null)e.add(r);else{var o=new Ui(t.get(n),t.get(n+1));e.add(o)}}},interfaces_:function(){return[]},getClass:function(){return eo}}),a(te.prototype,{filter:function(t){if(this.isForcedToLineString&&t instanceof qt){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null}t instanceof gt&&this.lines.add(t)},setForceToLineString:function(t){this.isForcedToLineString=t},interfaces_:function(){return[rt]},getClass:function(){return te}}),te.getGeometry=function(){if(arguments.length===1){var t=arguments[0];return t.getFactory().buildGeometry(te.getLines(t))}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(te.getLines(e,n))}},te.getLines=function(){if(arguments.length===1){var t=arguments[0];return te.getLines(t,!1)}if(arguments.length===2){if(K(arguments[0],b)&&K(arguments[1],b)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var s=r.next();te.getLines(s,n)}return n}if(arguments[0]instanceof Z&&typeof arguments[1]=="boolean"){var o=arguments[0],u=arguments[1],l=new w;return o.apply(new te(l,u)),l}if(arguments[0]instanceof Z&&K(arguments[1],b)){var x=arguments[0],P=arguments[1];return x instanceof gt?P.add(x):x.apply(new te(P)),P}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&K(arguments[0],b)&&K(arguments[1],b)){for(var z=arguments[0],k=arguments[1],j=arguments[2],r=z.iterator();r.hasNext();){var s=r.next();te.getLines(s,k,j)}return k}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Z&&K(arguments[1],b)){var nt=arguments[0],at=arguments[1],ut=arguments[2];return nt.apply(new te(at,ut)),at}}},a(Xi.prototype,{visitItem:function(t){this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[wn]},getClass:function(){return Xi}}),a(Hr.prototype,{locate:function(t){var e=new Xn(t),n=new Yi(e);return this.index.query(t.y,t.y,n),e.getLocation()},interfaces_:function(){return[qi]},getClass:function(){return Hr}}),a(Yi.prototype,{visitItem:function(t){var e=t;this.counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},interfaces_:function(){return[wn]},getClass:function(){return Yi}}),a(Hi.prototype,{init:function(t){for(var e=te.getLines(t),n=e.iterator();n.hasNext();){var r=n.next(),s=r.getCoordinates();this.addLine(s)}},addLine:function(t){for(var e=1;e<t.length;e++){var n=new lt(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),s=Math.max(n.p0.y,n.p1.y);this.index.insert(r,s,n)}},query:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new Xi;return this.index.query(t,e,n),n.getItems()}if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2];this.index.query(r,s,o)}},interfaces_:function(){return[]},getClass:function(){return Hi}}),Hr.SegmentVisitor=Yi,Hr.IntervalIndexedGeometry=Hi,a(no.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},isEndPoint:function(t){return this.segmentIndex===0&&this.dist===0?!0:this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[g]},getClass:function(){return no}}),a(ro.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),s=this.createSplitEdge(n,r);t.add(s),n=r}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],s=e.dist>0||!e.coord.equals2D(r);s||n--;var o=new Array(n).fill(null),u=0;o[u++]=new v(t.coord);for(var l=t.segmentIndex+1;l<=e.segmentIndex;l++)o[u++]=this.edge.pts[l];return s&&(o[u]=e.coord),new Te(o,new zt(this.edge.label))},add:function(t,e,n){var r=new no(t,e,n),s=this.nodeMap.get(r);return s!==null?s:(this.nodeMap.put(r,r),r)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();if(n.coord.equals(t))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return ro}}),a(Wr.prototype,{getChainStartIndices:function(t){var e=0,n=new w;n.add(new O(e));do{var r=this.findChainEnd(t,e);n.add(new O(r)),e=r}while(e<t.length-1);var s=Wr.toIntArray(n);return s},findChainEnd:function(t,e){for(var n=yt.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){var s=yt.quadrant(t[r-1],t[r]);if(s!==n)break;r++}return r-1},interfaces_:function(){return[]},getClass:function(){return Wr}}),Wr.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},a(io.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return n>e?e:n},computeIntersectsForChain:function(){if(arguments.length===4){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(arguments.length===6){var s=arguments[0],o=arguments[1],u=arguments[2],l=arguments[3],x=arguments[4],P=arguments[5],z=this.pts[s],k=this.pts[o],j=u.pts[l],nt=u.pts[x];if(o-s===1&&x-l===1)return P.addIntersections(this.e,s,u.e,l),null;if(this.env1.init(z,k),this.env2.init(j,nt),!this.env1.intersects(this.env2))return null;var at=Math.trunc((s+o)/2),ut=Math.trunc((l+x)/2);at>s&&(ut>l&&this.computeIntersectsForChain(s,at,u,l,ut,P),x>ut&&this.computeIntersectsForChain(s,at,u,ut,x,P)),o>at&&(ut>l&&this.computeIntersectsForChain(at,o,u,l,ut,P),x>ut&&this.computeIntersectsForChain(at,o,u,ut,x,P))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},interfaces_:function(){return[]},getClass:function(){return io}}),a(Ae.prototype,{getDepth:function(t,e){return this.depth[t][e]},setDepth:function(t,e,n){this.depth[t][e]=n},isNull:function(){if(arguments.length===0){for(var t=0;2>t;t++)for(var e=0;3>e;e++)if(this.depth[t][e]!==Ae.NULL_VALUE)return!1;return!0}if(arguments.length===1){var n=arguments[0];return this.depth[n][1]===Ae.NULL_VALUE}if(arguments.length===2){var r=arguments[0],s=arguments[1];return this.depth[r][s]===Ae.NULL_VALUE}},normalize:function(){for(var t=0;2>t;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),0>e&&(e=0);for(var n=1;3>n;n++){var r=0;this.depth[t][n]>e&&(r=1),this.depth[t][n]=r}}},getDelta:function(t){return this.depth[t][$.RIGHT]-this.depth[t][$.LEFT]},getLocation:function(t,e){return this.depth[t][e]<=0?f.EXTERIOR:f.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(arguments.length===1)for(var t=arguments[0],e=0;2>e;e++)for(var n=1;3>n;n++){var r=t.getLocation(e,n);r!==f.EXTERIOR&&r!==f.INTERIOR||(this.isNull(e,n)?this.depth[e][n]=Ae.depthAtLocation(r):this.depth[e][n]+=Ae.depthAtLocation(r))}else if(arguments.length===3){var s=arguments[0],o=arguments[1],u=arguments[2];u===f.INTERIOR&&this.depth[s][o]++}},interfaces_:function(){return[]},getClass:function(){return Ae}}),Ae.depthAtLocation=function(t){return t===f.EXTERIOR?0:t===f.INTERIOR?1:Ae.NULL_VALUE},Ae.NULL_VALUE=-1,C(Te,Ln),a(Te.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];var e=new Te(t,zt.toLineLabel(this.label));return e},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this.name=t},equals:function(t){if(!(t instanceof Te))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,r=!0,s=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--s])||(r=!1),!n&&!r)return!1;return!0},getCoordinate:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(t){Te.updateIM(this.label,t)},isCollapsed:function(){return this.label.isArea()?this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2]):!1},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return this.mce===null&&(this.mce=new io(this)),this.mce},getEnvelope:function(){if(this.env===null){this.env=new D;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(this.pts[t])}return this.env},addIntersection:function(t,e,n,r){var s=new v(t.getIntersection(r)),o=e,u=t.getEdgeDistance(n,r),l=o+1;if(l<this.pts.length){var x=this.pts[l];s.equals2D(x)&&(o=l,u=0)}this.eiList.add(s,o,u)},toString:function(){var t=new dt;t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this.label+" "+this.depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this.depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},interfaces_:function(){return[]},getClass:function(){return Te}}),Te.updateIM=function(){if(arguments.length!==2)return Ln.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,$.ON),t.getLocation(1,$.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,$.LEFT),t.getLocation(1,$.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,$.RIGHT),t.getLocation(1,$.RIGHT),2))},C(de,He),a(de.prototype,{insertBoundaryPoint:function(t,e){var n=this.nodes.addNode(e),r=n.getLabel(),s=1,o=f.NONE;o=r.getLocation(t,$.ON),o===f.BOUNDARY&&s++;var u=de.determineBoundary(this.boundaryNodeRule,s);r.setLocation(t,u)},computeSelfNodes:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2],o=new Rn(n,!0,!1);o.setIsDoneIfProperInt(s);var u=this.createEdgeSetIntersector(),l=this.parentGeom instanceof qt||this.parentGeom instanceof Tt||this.parentGeom instanceof Kt,x=r||!l;return u.computeIntersections(this.edges,o,x),this.addSelfIntersectionNodes(this.argIndex),o}},computeSplitEdges:function(t){for(var e=this.edges.iterator();e.hasNext();){var n=e.next();n.eiList.addSplitEdges(t)}},computeEdgeIntersections:function(t,e,n){var r=new Rn(e,n,!0);r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());var s=this.createEdgeSetIntersector();return s.computeIntersections(this.edges,t.edges,r),r},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof At){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this.argIndex,e,f.INTERIOR)}else if(arguments[0]instanceof v){var n=arguments[0];this.insertPoint(this.argIndex,n,f.INTERIOR)}},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),f.EXTERIOR,f.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,f.INTERIOR,f.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this.argIndex,e[0],f.BOUNDARY),this.insertPoint(this.argIndex,e[e.length-1],f.BOUNDARY)},addLineString:function(t){var e=ot.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var n=new Te(e,new zt(this.argIndex,f.INTERIOR));this.lineEdgeMap.put(t,n),this.insertEdge(n),T.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var s=r.next();e[n++]=s.getCoordinate().copy()}return e},getBoundaryNodes:function(){return this.boundaryNodes===null&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(t,e,n){return this.isBoundaryNode(t,e)?null:void(n===f.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n))},addPolygonRing:function(t,e,n){if(t.isEmpty())return null;var r=ot.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=r[0],null;var s=e,o=n;et.isCCW(r)&&(s=n,o=e);var u=new Te(r,new zt(this.argIndex,f.BOUNDARY,s,o));this.lineEdgeMap.put(t,u),this.insertEdge(u),this.insertPoint(this.argIndex,r[0],f.BOUNDARY)},insertPoint:function(t,e,n){var r=this.nodes.addNode(e),s=r.getLabel();s===null?r.label=new zt(t,n):s.setLocation(t,n)},createEdgeSetIntersector:function(){return new Vi},addSelfIntersectionNodes:function(t){for(var e=this.edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),s=n.eiList.iterator();s.hasNext();){var o=s.next();this.addSelfIntersectionNode(t,o.coord,r)}},add:function(){if(arguments.length!==1)return He.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof Kt&&(this.useBoundaryDeterminationRule=!1),t instanceof Tt)this.addPolygon(t);else if(t instanceof gt)this.addLineString(t);else if(t instanceof At)this.addPoint(t);else if(t instanceof ce)this.addCollection(t);else if(t instanceof he)this.addCollection(t);else if(t instanceof Kt)this.addCollection(t);else{if(!(t instanceof pt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},locate:function(t){return K(this.parentGeom,rn)&&this.parentGeom.getNumGeometries()>50?(this.areaPtLocator===null&&(this.areaPtLocator=new Hr(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom)},findEdge:function(){if(arguments.length===1){var t=arguments[0];return this.lineEdgeMap.get(t)}return He.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return de}}),de.determineBoundary=function(t,e){return t.isInBoundary(e)?f.BOUNDARY:f.INTERIOR},a(Tn.prototype,{getArgGeometry:function(t){return this.arg[t].getGeometry()},setComputationPrecision:function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return Tn}}),a(Pn.prototype,{compareTo:function(t){var e=t,n=Pn.compareOriented(this.pts,this._orientation,e.pts,e._orientation);return n},interfaces_:function(){return[g]},getClass:function(){return Pn}}),Pn.orientation=function(t){return ot.increasingDirection(t)===1},Pn.compareOriented=function(t,e,n,r){for(var s=e?1:-1,o=r?1:-1,u=e?t.length:-1,l=r?n.length:-1,x=e?0:t.length-1,P=r?0:n.length-1;;){var z=t[x].compareTo(n[P]);if(z!==0)return z;x+=s,P+=o;var k=x===u,j=P===l;if(k&&!j)return-1;if(!k&&j)return 1;if(k&&j)return 0}},a(Wi.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var n=this.edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),s=0;s<r.length;s++)s>0&&t.print(","),t.print(r[s].x+" "+r[s].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(t){return this.edges.get(t)},findEqualEdge:function(t){var e=new Pn(t.getCoordinates()),n=this.ocaMap.get(e);return n},add:function(t){this.edges.add(t);var e=new Pn(t.getCoordinates());this.ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return Wi}}),C(it,Tn),a(it.prototype,{insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(e!==null){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new zt(t.getLabel()),r.flip());var s=e.getDepth();s.isNull()&&s.add(n),s.add(r),n.merge(r)}else this.edgeList.add(t)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},isCoveredByLA:function(t){return this.isCovered(t,this.resultLineList)?!0:!!this.isCovered(t,this.resultPolyList)},computeGeometry:function(t,e,n,r){var s=new w;return s.addAll(t),s.addAll(e),s.addAll(n),s.isEmpty()?it.createEmptyResult(r,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(s)},mergeSymLabels:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().mergeSymLabels()}},isCovered:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next(),s=this.ptLocator.locate(t,r);if(s!==f.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new w,e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this.edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},getResultGeometry:function(t){return this.computeOverlay(t),this.resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new w;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),Wn.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Gi(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var r=new js(this,this.geomFact,this.ptLocator);this.resultLineList=r.build(t);var s=new Qs(this,this.geomFact,this.ptLocator);this.resultPointList=s.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},labelIncompleteNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n)},copyPoints:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),r=this.graph.addNode(n.getCoordinate());r.setLabel(t,n.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&it.isResultOfOp(r.getLocation(0,$.RIGHT),r.getLocation(1,$.RIGHT),t)&&n.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var s=0;2>s;s++)n.isNull(s)||!n.isArea()||r.isNull(s)||(r.getDelta(s)===0?n.toLine(s):(T.isTrue(!r.isNull(s,$.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(s,$.LEFT,r.getLocation(s,$.LEFT)),T.isTrue(!r.isNull(s,$.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(s,$.RIGHT,r.getLocation(s,$.RIGHT))))}}},computeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=0,e=this.graph.getNodes().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(t++,r.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(r)}},isCoveredByA:function(t){return!!this.isCovered(t,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return it}}),it.overlayOp=function(t,e,n){var r=new it(t,e),s=r.getResultGeometry(n);return s},it.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return it.createEmptyResult(it.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return fr.map(t,{interfaces_:function(){return[MapOp]},map:function(r){return r.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Zt.overlayOp(t,e,it.INTERSECTION)},it.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return it.createEmptyResult(it.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Zt.overlayOp(t,e,it.SYMDIFFERENCE)},it.resultDimension=function(t,e,n){var r=e.getDimension(),s=n.getDimension(),o=-1;switch(t){case it.INTERSECTION:o=Math.min(r,s);break;case it.UNION:o=Math.max(r,s);break;case it.DIFFERENCE:o=r;break;case it.SYMDIFFERENCE:o=Math.max(r,s)}return o},it.createEmptyResult=function(t,e,n,r){var s=null;switch(it.resultDimension(t,e,n)){case-1:s=r.createGeometryCollection(new Array(0).fill(null));break;case 0:s=r.createPoint();break;case 1:s=r.createLineString();break;case 2:s=r.createPolygon()}return s},it.difference=function(t,e){return t.isEmpty()?it.createEmptyResult(it.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Zt.overlayOp(t,e,it.DIFFERENCE))},it.isResultOfOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return it.isResultOfOp(n,r,e)}if(arguments.length===3){var s=arguments[0],o=arguments[1],u=arguments[2];switch(s===f.BOUNDARY&&(s=f.INTERIOR),o===f.BOUNDARY&&(o=f.INTERIOR),u){case it.INTERSECTION:return s===f.INTERIOR&&o===f.INTERIOR;case it.UNION:return s===f.INTERIOR||o===f.INTERIOR;case it.DIFFERENCE:return s===f.INTERIOR&&o!==f.INTERIOR;case it.SYMDIFFERENCE:return s===f.INTERIOR&&o!==f.INTERIOR||s!==f.INTERIOR&&o===f.INTERIOR}return!1}},it.INTERSECTION=1,it.UNION=2,it.DIFFERENCE=3,it.SYMDIFFERENCE=4,a(Pe.prototype,{selfSnap:function(t){var e=new se(t),n=e.snapTo(t,this.snapTolerance);return n},removeCommonBits:function(t){this.cbr=new Fr,this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this.cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this.geom),n=it.overlayOp(e[0],e[1],t);return this.prepareResult(n)},checkValid:function(t){t.isValid()||W.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=se.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(t){var e=this.removeCommonBits(t),n=se.snap(e[0],e[1],this.snapTolerance);return n},interfaces_:function(){return[]},getClass:function(){return Pe}}),Pe.overlayOp=function(t,e,n){var r=new Pe(t,e);return r.getResultGeometry(n)},Pe.union=function(t,e){return Pe.overlayOp(t,e,it.UNION)},Pe.intersection=function(t,e){return Pe.overlayOp(t,e,it.INTERSECTION)},Pe.symDifference=function(t,e){return Pe.overlayOp(t,e,it.SYMDIFFERENCE)},Pe.difference=function(t,e){return Pe.overlayOp(t,e,it.DIFFERENCE)},a(Zt.prototype,{getResultGeometry:function(t){var e=null,n=!1,r=null;try{e=it.overlayOp(this.geom[0],this.geom[1],t);var s=!0;s&&(n=!0)}catch(o){if(!(o instanceof L))throw o;r=o}finally{}if(!n)try{e=Pe.overlayOp(this.geom[0],this.geom[1],t)}catch(o){throw o instanceof L?r:o}finally{}return e},interfaces_:function(){return[]},getClass:function(){return Zt}}),Zt.overlayOp=function(t,e,n){var r=new Zt(t,e);return r.getResultGeometry(n)},Zt.union=function(t,e){return Zt.overlayOp(t,e,it.UNION)},Zt.intersection=function(t,e){return Zt.overlayOp(t,e,it.INTERSECTION)},Zt.symDifference=function(t,e){return Zt.overlayOp(t,e,it.SYMDIFFERENCE)},Zt.difference=function(t,e){return Zt.overlayOp(t,e,it.DIFFERENCE)},a(Fe.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,n=0,r=this.horizontalBisector(t);if(r.getLength()===0)n=0,e=r.getCoordinate();else{var s=Zt.overlayOp(r,t,it.INTERSECTION),o=this.widestGeometry(s);n=o.getEnvelopeInternal().getWidth(),e=Fe.centre(o.getEnvelopeInternal())}(this.interiorPoint===null||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function(){if(arguments[0]instanceof pt){var e=arguments[0];if(e.isEmpty())return e;for(var n=e.getGeometryN(0),r=1;r<e.getNumGeometries();r++)e.getGeometryN(r).getEnvelopeInternal().getWidth()>n.getEnvelopeInternal().getWidth()&&(n=e.getGeometryN(r));return n}if(arguments[0]instanceof Z){var s=arguments[0];return s instanceof pt?this.widestGeometry(s):s}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),n=vr.getBisectorY(t);return this.factory.createLineString([new v(e.getMinX(),n),new v(e.getMaxX(),n)])},add:function(t){if(t instanceof Tt)this.addPolygon(t);else if(t instanceof pt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},interfaces_:function(){return[]},getClass:function(){return Fe}}),Fe.centre=function(t){return new v(Fe.avg(t.getMinX(),t.getMaxX()),Fe.avg(t.getMinY(),t.getMaxY()))},Fe.avg=function(t,e){return(t+e)/2},a(vr.prototype,{updateInterval:function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));var e=Fe.avg(this.hiY,this.loY);return e},process:function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var r=e.getY(n);this.updateInterval(r)}},interfaces_:function(){return[]},getClass:function(){return vr}}),vr.getBisectorY=function(t){var e=new vr(t);return e.getBisectorY()},Fe.SafeBisectorFinder=vr,a(Zi.prototype,{addEndpoints:function(){if(arguments[0]instanceof Z){var t=arguments[0];if(t instanceof gt)this.addEndpoints(t.getCoordinates());else if(t instanceof pt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addEndpoints(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var r=arguments[0];this.add(r[0]),this.add(r[r.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof Z){var t=arguments[0];if(t instanceof gt)this.addInterior(t.getCoordinates());else if(t instanceof pt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addInterior(e.getGeometryN(n))}else if(arguments[0]instanceof Array)for(var r=arguments[0],n=1;n<r.length-1;n++)this.add(r[n])},add:function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new v(t),this.minDistance=e)},interfaces_:function(){return[]},getClass:function(){return Zi}}),a(Ji.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof Z){var t=arguments[0];if(t instanceof At)this.add(t.getCoordinate());else if(t instanceof pt)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}else if(arguments[0]instanceof v){var r=arguments[0],s=r.distance(this.centroid);s<this.minDistance&&(this.interiorPoint=new v(r),this.minDistance=s)}},interfaces_:function(){return[]},getClass:function(){return Ji}}),a(ht.prototype,{interfaces_:function(){return[]},getClass:function(){return ht}}),ht.toDegrees=function(t){return 180*t/Math.PI},ht.normalize=function(t){for(;t>Math.PI;)t-=ht.PI_TIMES_2;for(;t<=-Math.PI;)t+=ht.PI_TIMES_2;return t},ht.angle=function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}if(arguments.length===2){var e=arguments[0],n=arguments[1],r=n.x-e.x,s=n.y-e.y;return Math.atan2(s,r)}},ht.isAcute=function(t,e,n){var r=t.x-e.x,s=t.y-e.y,o=n.x-e.x,u=n.y-e.y,l=r*o+s*u;return l>0},ht.isObtuse=function(t,e,n){var r=t.x-e.x,s=t.y-e.y,o=n.x-e.x,u=n.y-e.y,l=r*o+s*u;return 0>l},ht.interiorAngle=function(t,e,n){var r=ht.angle(e,t),s=ht.angle(e,n);return Math.abs(s-r)},ht.normalizePositive=function(t){if(0>t){for(;0>t;)t+=ht.PI_TIMES_2;t>=ht.PI_TIMES_2&&(t=0)}else{for(;t>=ht.PI_TIMES_2;)t-=ht.PI_TIMES_2;0>t&&(t=0)}return t},ht.angleBetween=function(t,e,n){var r=ht.angle(e,t),s=ht.angle(e,n);return ht.diff(r,s)},ht.diff=function(t,e){var n=null;return n=e>t?e-t:t-e,n>Math.PI&&(n=2*Math.PI-n),n},ht.toRadians=function(t){return t*Math.PI/180},ht.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?ht.COUNTERCLOCKWISE:0>n?ht.CLOCKWISE:ht.NONE},ht.angleBetweenOriented=function(t,e,n){var r=ht.angle(e,t),s=ht.angle(e,n),o=s-r;return o<=-Math.PI?o+ht.PI_TIMES_2:o>Math.PI?o-ht.PI_TIMES_2:o},ht.PI_TIMES_2=2*Math.PI,ht.PI_OVER_2=Math.PI/2,ht.PI_OVER_4=Math.PI/4,ht.COUNTERCLOCKWISE=et.COUNTERCLOCKWISE,ht.CLOCKWISE=et.CLOCKWISE,ht.NONE=et.COLLINEAR,a(_t.prototype,{area:function(){return _t.area(this.p0,this.p1,this.p2)},signedArea:function(){return _t.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(t===null)throw new h;return _t.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return _t.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return _t.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return _t.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return _t.area3D(this.p0,this.p1,this.p2)},centroid:function(){return _t.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return _t.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return _t}}),_t.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},_t.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},_t.det=function(t,e,n,r){return t*r-e*n},_t.interpolateZ=function(t,e,n,r){var s=e.x,o=e.y,u=n.x-s,l=r.x-s,x=n.y-o,P=r.y-o,z=u*P-l*x,k=t.x-s,j=t.y-o,nt=(P*k-l*j)/z,at=(-x*k+u*j)/z,ut=e.z+nt*(n.z-e.z)+at*(r.z-e.z);return ut},_t.longestSideLength=function(t,e,n){var r=t.distance(e),s=e.distance(n),o=n.distance(t),u=r;return s>u&&(u=s),o>u&&(u=o),u},_t.isAcute=function(t,e,n){return ht.isAcute(t,e,n)&&ht.isAcute(e,n,t)?!!ht.isAcute(n,t,e):!1},_t.circumcentre=function(t,e,n){var r=n.x,s=n.y,o=t.x-r,u=t.y-s,l=e.x-r,x=e.y-s,P=2*_t.det(o,u,l,x),z=_t.det(u,o*o+u*u,x,l*l+x*x),k=_t.det(o,o*o+u*u,l,l*l+x*x),j=r-z/P,nt=s+k/P;return new v(j,nt)},_t.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,s=new J(t.x+n/2,t.y+r/2,1),o=new J(t.x-r+n/2,t.y+n+r/2,1);return new J(s,o)},_t.angleBisector=function(t,e,n){var r=e.distance(t),s=e.distance(n),o=r/(r+s),u=n.x-t.x,l=n.y-t.y,x=new v(t.x+o*u,t.y+o*l);return x},_t.area3D=function(t,e,n){var r=e.x-t.x,s=e.y-t.y,o=e.z-t.z,u=n.x-t.x,l=n.y-t.y,x=n.z-t.z,P=s*x-o*l,z=o*u-r*x,k=r*l-s*u,j=P*P+z*z+k*k,nt=Math.sqrt(j)/2;return nt},_t.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,s=(t.y+e.y+n.y)/3;return new v(r,s)},_t.inCentre=function(t,e,n){var r=e.distance(n),s=t.distance(n),o=t.distance(e),u=r+s+o,l=(r*t.x+s*e.x+o*n.x)/u,x=(r*t.y+s*e.y+o*n.y)/u;return new v(l,x)},a(En.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[1];return this.input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(this.input.getNumPoints()===1){var n=this.input.getCoordinates();return this.extremalPts=[new v(n[0])],null}var t=this.input.convexHull(),e=t.getCoordinates(),n=e;if(e[0].equals2D(e[e.length-1])&&(n=new Array(e.length-1).fill(null),ot.copyDeep(e,0,n,0,e.length-1)),n.length<=2)return this.extremalPts=ot.copyDeep(n),null;for(var r=En.lowestPoint(n),s=En.pointWitMinAngleWithX(n,r),o=0;o<n.length;o++){var u=En.pointWithMinAngleWithSegment(n,r,s);if(ht.isObtuse(r,u,s))return this.extremalPts=[new v(r),new v(s)],null;if(ht.isObtuse(u,r,s))r=u;else{if(!ht.isObtuse(u,s,r))return this.extremalPts=[new v(r),new v(s),new v(u)],null;s=u}}T.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return this.extremalPts!==null?null:(this.computeCirclePoints(),this.computeCentre(),void(this.centre!==null&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),this.centre===null)return this.input.getFactory().createPolygon();var t=this.input.getFactory().createPoint(this.centre);return this.radius===0?t:t.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new v((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=_t.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return En}}),En.pointWitMinAngleWithX=function(t,e){for(var n=c.MAX_VALUE,r=null,s=0;s<t.length;s++){var o=t[s];if(o!==e){var u=o.x-e.x,l=o.y-e.y;0>l&&(l=-l);var x=Math.sqrt(u*u+l*l),P=l/x;n>P&&(n=P,r=o)}}return r},En.lowestPoint=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e},En.pointWithMinAngleWithSegment=function(t,e,n){for(var r=c.MAX_VALUE,s=null,o=0;o<t.length;o++){var u=t[o];if(u!==e&&u!==n){var l=ht.angleBetween(e,u,n);r>l&&(r=l,s=u)}}return s},a(ee.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),this.minWidthPt===null)return this.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([t,this.minWidthPt])},computeWidthConvex:function(t){t instanceof Tt?this.convexHullPts=t.getExteriorRing().getCoordinates():this.convexHullPts=t.getCoordinates(),this.convexHullPts.length===0?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):this.convexHullPts.length===1?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):this.convexHullPts.length===2||this.convexHullPts.length===3?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(t){this.minWidth=c.MAX_VALUE;for(var e=1,n=new lt,r=0;r<t.length-1;r++)n.p0=t[r],n.p1=t[r+1],e=this.findMaxPerpDistance(t,n,e)},computeMinimumDiameter:function(){if(this.minWidthPt!==null)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var t=new an(this.inputGeom).getConvexHull();this.computeWidthConvex(t)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(t,e,n){for(var r=e.distancePerpendicular(t[n]),s=r,o=n,u=o;s>=r;)r=s,o=u,u=ee.nextIndex(t,o),s=e.distancePerpendicular(t[u]);return r<this.minWidth&&(this.minPtIndex=o,this.minWidth=r,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new lt(e)),o},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),this.minWidth===0)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,n=c.MAX_VALUE,r=-c.MAX_VALUE,s=c.MAX_VALUE,o=-c.MAX_VALUE,u=0;u<this.convexHullPts.length;u++){var l=ee.computeC(t,e,this.convexHullPts[u]);l>r&&(r=l),n>l&&(n=l);var x=ee.computeC(-e,t,this.convexHullPts[u]);x>o&&(o=x),s>x&&(s=x)}var P=ee.computeSegmentForLine(-t,-e,o),z=ee.computeSegmentForLine(-t,-e,s),k=ee.computeSegmentForLine(-e,t,r),j=ee.computeSegmentForLine(-e,t,n),nt=k.lineIntersection(P),at=j.lineIntersection(P),ut=j.lineIntersection(z),bt=k.lineIntersection(z),kt=this.inputGeom.getFactory().createLinearRing([nt,at,ut,bt,nt]);return this.inputGeom.getFactory().createPolygon(kt,null)},interfaces_:function(){return[]},getClass:function(){return ee}}),ee.nextIndex=function(t,e){return e++,e>=t.length&&(e=0),e},ee.computeC=function(t,e,n){return t*n.y-e*n.x},ee.getMinimumDiameter=function(t){return new ee(t).getDiameter()},ee.getMinimumRectangle=function(t){return new ee(t).getMinimumRectangle()},ee.computeSegmentForLine=function(t,e,n){var r=null,s=null;return Math.abs(e)>Math.abs(t)?(r=new v(0,n/e),s=new v(1,n/e-t/e)):(r=new v(n/t,0),s=new v(n/t-e/t,1)),new lt(r,s)};var Hl=Object.freeze({Centroid:on,CGAlgorithms:et,ConvexHull:an,InteriorPointArea:Fe,InteriorPointLine:Zi,InteriorPointPoint:Ji,RobustLineIntersector:Wt,MinimumBoundingCircle:En,MinimumDiameter:ee});a(On.prototype,{getResultGeometry:function(){return new Zr(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(0>=t)throw new h;this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return On}}),On.densifyPoints=function(t,e,n){for(var r=new lt,s=new A,o=0;o<t.length-1;o++){r.p0=t[o],r.p1=t[o+1],s.add(r.p0,!1);var u=r.getLength(),l=Math.trunc(u/e)+1;if(l>1)for(var x=u/l,P=1;l>P;P++){var z=P*x/u,k=r.pointAlong(z);n.makePrecise(k),s.add(k,!1)}}return s.add(t[t.length-1],!1),s.toCoordinateArray()},On.densify=function(t,e){var n=new On(t);return n.setDistanceTolerance(e),n.getResultGeometry()},C(Zr,ae),a(Zr.prototype,{transformMultiPolygon:function(t,e){var n=ae.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformPolygon:function(t,e){var n=ae.prototype.transformPolygon.call(this,t,e);return e instanceof Kt?n:this.createValidArea(n)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),r=On.densifyPoints(n,this.distanceTolerance,e.getPrecisionModel());return e instanceof gt&&r.length===1&&(r=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(r)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return Zr}}),On.DensifyTransformer=Zr;var Wl=Object.freeze({Densifier:On});a(cn.prototype,{find:function(t){var e=this;do{if(e===null)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var r=n.oNext(),s=r.compareTo(t);if(s!==e||r===this)return n.insertAfter(t),null;n=r}while(n!==this);T.shouldNeverReachHere()},insertAfter:function(t){T.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function(){var e=0,n=this;do e++,n=n.oNext();while(n!==this);return e},equals:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),n=this.deltaY(),r=t.deltaX(),s=t.deltaY();if(e===r&&n===s)return 0;var o=yt.quadrant(e,n),u=yt.quadrant(r,s);return o>u?1:u>o?-1:et.computeOrientation(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;t.degree()===2;)if(t=t.prev(),t===this)return null;return t},compareTo:function(t){var e=t,n=this.compareAngularDirection(e);return n},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return cn}}),cn.init=function(t,e){if(t._sym!==null||e._sym!==null||t._next!==null||e._next!==null)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},cn.create=function(t,e){var n=new cn(t),r=new cn(e);return n.init(r),n},C(pe,cn),a(pe.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return pe}}),pe.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},pe.isMarked=function(t){return t.isMarked()},pe.setMark=function(t,e){t.setMark(e)},pe.markBoth=function(t){t.mark(),t.sym().mark()},pe.mark=function(t){t.mark()},a(yr.prototype,{insert:function(t,e,n){var r=this.create(t,e);n!==null?n.insert(r):this.vertexMap.put(t,r);var s=this.vertexMap.get(e);return s!==null?s.insert(r.sym()):this.vertexMap.put(e,r.sym()),r},create:function(t,e){var n=this.createEdge(t),r=this.createEdge(e);return cn.init(n,r),n},createEdge:function(t){return new cn(t)},addEdge:function(t,e){if(!yr.isValidEdge(t,e))return null;var n=this.vertexMap.get(t),r=null;if(n!==null&&(r=n.find(e)),r!==null)return r;var s=this.insert(t,e,n);return s},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(t,e){var n=this.vertexMap.get(t);return n===null?null:n.find(e)},interfaces_:function(){return[]},getClass:function(){return yr}}),yr.isValidEdge=function(t,e){var n=e.compareTo(t);return n!==0},C(Ki,pe),a(Ki.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return Ki}}),C(ji,yr),a(ji.prototype,{createEdge:function(t){return new Ki(t)},interfaces_:function(){return[]},getClass:function(){return ji}}),a(Jr.prototype,{addLine:function(t){this.lines.add(this.factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym(),t.isStart())?this.ringStartEdge===null?(this.ringStartEdge=t,null):void(t.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=t)):null},getResult:function(){return this.result===null&&this.computeResult(),this.result},process:function(t){var e=t.prevNode();e===null&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new A,n=t;for(e.add(n.orig().copy(),!1);n.sym().degree()===2;){var r=n.next();if(r===t)break;e.add(r.orig().copy(),!1),n=r}e.add(n.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new A,n=t;for(this.ringStartEdge=null,pe.markBoth(n),e.add(n.orig().copy(),!1);n.sym().degree()===2;){this.updateRingStartEdge(n);var r=n.next();if(r===t)return this.buildRing(this.ringStartEdge),null;e.add(r.orig().copy(),!1),n=r,pe.markBoth(n)}e.add(n.dest().copy(),!1),this.stackEdges(n.sym()),this.addLine(e)},stackEdges:function(t){var e=t;do pe.isMarked(e)||this.nodeEdgeStack.add(e),e=e.oNext();while(e!==t)},computeResult:function(){for(var t=this.graph.getVertexEdges(),e=t.iterator();e.hasNext();){var n=e.next();pe.isMarked(n)||this.process(n)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var t=this.nodeEdgeStack.pop();pe.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof Z){var t=arguments[0];t.apply({interfaces_:function(){return[rt]},filter:function(x){x instanceof gt&&this.add(x)}})}else if(K(arguments[0],b))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();this.add(r)}else if(arguments[0]instanceof gt){var s=arguments[0];this.factory===null&&(this.factory=s.getFactory());for(var o=s.getCoordinateSequence(),u=!1,n=1;n<o.size();n++){var l=this.graph.addEdge(o.getCoordinate(n-1),o.getCoordinate(n));l!==null&&(u||(l.setStart(),u=!0))}}},interfaces_:function(){return[]},getClass:function(){return Jr}}),Jr.dissolve=function(t){var e=new Jr;return e.add(t),e.getResult()};var Zl=Object.freeze({LineDissolver:Jr});a(We.prototype,{hasChildren:function(){for(var t=0;4>t;t++)if(this.subnode[t]!==null)return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;4>e;e++)this.subnode[e]!==null&&this.subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;4>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+1},size:function(){for(var t=0,e=0;4>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var n=0;4>n;n++)this.subnode[n]!==null&&this.subnode[n].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var n=this.items.iterator();n.hasNext();)e.visitItem(n.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,r=0;4>r;r++)if(this.subnode[r]!==null&&(n=this.subnode[r].remove(t,e))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n||(n=this.items.remove(e))},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;4>n;n++)this.subnode[n]!==null&&this.subnode[n].visit(t,e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;4>e;e++)if(this.subnode[e]!==null){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},isEmpty:function(){var e=!0;this.items.isEmpty()||(e=!1);for(var n=0;4>n;n++)this.subnode[n]!==null&&(this.subnode[n].isEmpty()||(e=!1));return e},add:function(t){this.items.add(t)},interfaces_:function(){return[y]},getClass:function(){return We}}),We.getSubnodeIndex=function(t,e,n){var r=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(r=3),t.getMaxY()<=n&&(r=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(r=2),t.getMaxY()<=n&&(r=0)),r},Qn.exponent=function(t){return Vl(64,t)-1023},Qn.powerOf2=function(t){return Math.pow(2,t)},a(Kr.prototype,{getLevel:function(){return this.level},computeKey:function(){if(arguments.length===1){var t=arguments[0];for(this.level=Kr.computeQuadLevel(t),this.env=new D,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],r=Qn.powerOf2(e);this.pt.x=Math.floor(n.getMinX()/r)*r,this.pt.y=Math.floor(n.getMinY()/r)*r,this.env.init(this.pt.x,this.pt.x+r,this.pt.y,this.pt.y+r)}},getEnvelope:function(){return this.env},getCentre:function(){return new v((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Kr}}),Kr.computeQuadLevel=function(t){var e=t.getWidth(),n=t.getHeight(),r=e>n?e:n,s=Qn.exponent(r)+1;return s},C(In,We),a(In.prototype,{find:function(t){var e=We.getSubnodeIndex(t,this.centrex,this.centrey);if(e===-1)return this;if(this.subnode[e]!==null){var n=this.subnode[e];return n.find(t)}return this},isSearchMatch:function(t){return this.env.intersects(t)},getSubnode:function(t){return this.subnode[t]===null&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getEnvelope:function(){return this.env},getNode:function(t){var e=We.getSubnodeIndex(t,this.centrex,this.centrey);if(e!==-1){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0,r=0,s=0;switch(t){case 0:e=this.env.getMinX(),n=this.centrex,r=this.env.getMinY(),s=this.centrey;break;case 1:e=this.centrex,n=this.env.getMaxX(),r=this.env.getMinY(),s=this.centrey;break;case 2:e=this.env.getMinX(),n=this.centrex,r=this.centrey,s=this.env.getMaxY();break;case 3:e=this.centrex,n=this.env.getMaxX(),r=this.centrey,s=this.env.getMaxY()}var o=new D(e,n,r,s),u=new In(o,this.level-1);return u},insertNode:function(t){T.isTrue(this.env===null||this.env.contains(t.env));var e=We.getSubnodeIndex(t.env,this.centrex,this.centrey);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insertNode(t),this.subnode[e]=n}},interfaces_:function(){return[]},getClass:function(){return In}}),In.createNode=function(t){var e=new Kr(t),n=new In(e.getEnvelope(),e.getLevel());return n},In.createExpanded=function(t,e){var n=new D(e);t!==null&&n.expandToInclude(t.env);var r=In.createNode(n);return t!==null&&r.insertNode(t),r},a(Mn.prototype,{interfaces_:function(){return[]},getClass:function(){return Mn}}),Mn.isZeroWidth=function(t,e){var n=e-t;if(n===0)return!0;var r=Math.max(Math.abs(t),Math.abs(e)),s=n/r,o=Qn.exponent(s);return o<=Mn.MIN_BINARY_EXPONENT},Mn.MIN_BINARY_EXPONENT=-50,C($n,We),a($n.prototype,{insert:function(t,e){var n=We.getSubnodeIndex(t,$n.origin.x,$n.origin.y);if(n===-1)return this.add(e),null;var r=this.subnode[n];if(r===null||!r.getEnvelope().contains(t)){var s=In.createExpanded(r,t);this.subnode[n]=s}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){T.isTrue(t.getEnvelope().contains(e));var r=Mn.isZeroWidth(e.getMinX(),e.getMaxX()),s=Mn.isZeroWidth(e.getMinY(),e.getMaxY()),o=null;o=r||s?t.find(e):t.getNode(e),o.add(n)},interfaces_:function(){return[]},getClass:function(){return $n}}),$n.origin=new v(0,0),a(_n.prototype,{size:function(){return this.root!==null?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=_n.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(arguments.length===1){var t=arguments[0],e=new Xi;return this.query(t,e),e.getItems()}if(arguments.length===2){var n=arguments[0],r=arguments[1];this.root.visit(n,r)}},queryAll:function(){var t=new w;return this.root.addAllItems(t),t},remove:function(t,e){var n=_n.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var n=t.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)},depth:function(){return this.root!==null?this.root.depth():0},isEmpty:function(){return this.root===null},interfaces_:function(){return[bi,y]},getClass:function(){return _n}}),_n.ensureExtent=function(t,e){var n=t.getMinX(),r=t.getMaxX(),s=t.getMinY(),o=t.getMaxY();return n!==r&&s!==o?t:(n===r&&(n-=e/2,r=n+e/2),s===o&&(s-=e/2,o=s+e/2),new D(n,r,s,o))},_n.serialVersionUID=-7461163625812743e3;var Jl=Object.freeze({Quadtree:_n}),Kl=Object.freeze({STRtree:Ft}),jl=Object.freeze({quadtree:Jl,strtree:Kl}),Ql=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];a(so.prototype,{read:function(t){var e=void 0;e=typeof t=="string"?JSON.parse(t):t;var n=e.type;if(!ze[n])throw new Error("Unknown GeoJSON type: "+e.type);return Ql.indexOf(n)!==-1?ze[n].apply(this,[e.coordinates]):n==="GeometryCollection"?ze[n].apply(this,[e.geometries]):ze[n].apply(this,[e])},write:function(t){var e=t.getGeometryType();if(!mn[e])throw new Error("Geometry is not supported");return mn[e].apply(this,[t])}});var ze={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!ze[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=ze.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(e){for(var n=[],r=0;r<e.length;++r){var s=e[r];n.push(new v(s[0],s[1]))}return n},bbox:function(t){return this.geometryFactory.createLinearRing([new v(t[0],t[1]),new v(t[2],t[1]),new v(t[2],t[3]),new v(t[0],t[3]),new v(t[0],t[1])])},Point:function(t){var e=new v(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ze.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=ze.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(ze.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=ze.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],s=1;s<t.length;++s){var o=t[s],u=ze.coordinates.apply(this,[o]),l=this.geometryFactory.createLinearRing(u);r.push(l)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(ze.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},mn={coordinate:function(t){return[t.x,t.y]},Point:function(t){var e=mn.coordinate.apply(this,[t.getCoordinate()]);return{type:"Point",coordinates:e}},MultiPoint:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],s=mn.Point.apply(this,[r]);e.push(s.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var s=n[r];e.push(mn.coordinate.apply(this,[s]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],s=mn.LineString.apply(this,[r]);e.push(s.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=mn.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var r=0;r<t.holes.length;++r){var s=t.holes[r],o=mn.LineString.apply(this,[s]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],s=mn.Polygon.apply(this,[r]);e.push(s.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],s=r.getGeometryType();e.push(mn[s].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}};a(Va.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Ct.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;n>e;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;n>e;e++)this.reducePrecision(t.geometries[e])}}),a(ka.prototype,{write:function(t){return this.parser.write(t)}}),a(Ua.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===Ct.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(var e=0,n=t.points.coordinates.length;n>e;e++)this.precisionModel.makePrecise(t.points.coordinates[e]);else if(t.geometries)for(var r=0,s=t.geometries.length;s>r;r++)this.reducePrecision(t.geometries[r])}}),a(Xa.prototype,{read:function(t){return t instanceof ol.geom.Point?this.convertFromPoint(t):t instanceof ol.geom.LineString?this.convertFromLineString(t):t instanceof ol.geom.LinearRing?this.convertFromLinearRing(t):t instanceof ol.geom.Polygon?this.convertFromPolygon(t):t instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof ol.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new v(e[0],e[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(e){return new v(e[0],e[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(e){return new v(e[0],e[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),n=null,r=[],s=0;s<e.length;s++){var o=this.convertFromLinearRing(e[s]);s===0?n=o:r.push(o)}return this.geometryFactory.createPolygon(n,r)},convertFromMultiPoint:function(t){var e=t.getPoints().map(function(n){return this.convertFromPoint(n)},this);return this.geometryFactory.createMultiPoint(e)},convertFromMultiLineString:function(t){var e=t.getLineStrings().map(function(n){return this.convertFromLineString(n)},this);return this.geometryFactory.createMultiLineString(e)},convertFromMultiPolygon:function(t){var e=t.getPolygons().map(function(n){return this.convertFromPolygon(n)},this);return this.geometryFactory.createMultiPolygon(e)},convertFromCollection:function(t){var e=t.getGeometries().map(function(n){return this.read(n)},this);return this.geometryFactory.createGeometryCollection(e)},write:function(t){return t.getGeometryType()==="Point"?this.convertToPoint(t.getCoordinate()):t.getGeometryType()==="LineString"?this.convertToLineString(t):t.getGeometryType()==="LinearRing"?this.convertToLinearRing(t):t.getGeometryType()==="Polygon"?this.convertToPolygon(t):t.getGeometryType()==="MultiPoint"?this.convertToMultiPoint(t):t.getGeometryType()==="MultiLineString"?this.convertToMultiLineString(t):t.getGeometryType()==="MultiPolygon"?this.convertToMultiPolygon(t):t.getGeometryType()==="GeometryCollection"?this.convertToCollection(t):void 0},convertToPoint:function(t){return new ol.geom.Point([t.x,t.y])},convertToLineString:function(t){var e=t.points.coordinates.map(jr);return new ol.geom.LineString(e)},convertToLinearRing:function(t){var e=t.points.coordinates.map(jr);return new ol.geom.LinearRing(e)},convertToPolygon:function(t){for(var e=[t.shell.points.coordinates.map(jr)],n=0;n<t.holes.length;n++)e.push(t.holes[n].points.coordinates.map(jr));return new ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new ol.geom.MultiPoint(t.getCoordinates().map(jr))},convertToMultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToLineString(t.geometries[n]).getCoordinates());return new ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToPolygon(t.geometries[n]).getCoordinates());return new ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],n=0;n<t.geometries.length;n++){var r=t.geometries[n];e.push(this.write(r))}return new ol.geom.GeometryCollection(e)}});var $l=Object.freeze({GeoJSONReader:Va,GeoJSONWriter:ka,OL3Parser:Xa,WKTReader:Ua,WKTWriter:$t});a(Qr.prototype,{rescale:function(){if(K(arguments[0],b))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){var r=arguments[0];r.length===2&&(new v(r[0]),new v(r[1]));for(var e=0;e<r.length;e++)r[e].x=r[e].x/this.scaleFactor+this.offsetX,r[e].y=r[e].y/this.scaleFactor+this.offsetY;r.length===2&&r[0].equals2D(r[1])&&W.out.println(r)}},scale:function(){if(K(arguments[0],b)){for(var t=arguments[0],e=new w,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Xe(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var s=arguments[0],o=new Array(s.length).fill(null),n=0;n<s.length;n++)o[n]=new v(Math.round((s[n].x-this.offsetX)*this.scaleFactor),Math.round((s[n].y-this.offsetY)*this.scaleFactor),s[n].z);var u=ot.removeRepeatedPoints(o);return u}},isIntegerPrecision:function(){return this.scaleFactor===1},getNodedSubstrings:function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},interfaces_:function(){return[Vr]},getClass:function(){return Qr}});var th=Object.freeze({MCIndexNoder:Sn,ScaledNoder:Qr,SegmentString:qr});a($r.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new re,n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n),s=r.getCoordinate();if(e.contains(s))return this.nonSimpleLocation=s,!1;e.add(s)}return!0},isSimplePolygonal:function(t){for(var e=te.getLines(t),n=e.iterator();n.hasNext();){var r=n.next();if(!this.isSimpleLinearGeometry(r))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new Xt,n=t.getEdgeIterator();n.hasNext();){var r=n.next(),s=(r.getMaximumSegmentIndex(),r.isClosed()),o=r.getCoordinate(0);this.addEndpoint(e,o,s);var u=r.getCoordinate(r.getNumPoints()-1);this.addEndpoint(e,u,s)}for(var n=e.values().iterator();n.hasNext();){var l=n.next();if(l.isClosed&&l.degree!==2)return this.nonSimpleLocation=l.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new de(0,t),n=new Wt,r=e.computeSelfNodes(n,!0);return r.hasIntersection()?r.hasProperIntersection()?(this.nonSimpleLocation=r.getProperIntersectionPoint(),!1):this.hasNonEndpointIntersection(e)?!1:!this.isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(e):!0},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getMaximumSegmentIndex(),s=n.getEdgeIntersectionList().iterator();s.hasNext();){var o=s.next();if(!o.isEndPoint(r))return this.nonSimpleLocation=o.getCoordinate(),!0}return!1},addEndpoint:function(t,e,n){var r=t.get(e);r===null&&(r=new Qi(e),t.put(e,r)),r.addEndpoint(n)},computeSimple:function(t){return this.nonSimpleLocation=null,t.isEmpty()?!0:t instanceof gt?this.isSimpleLinearGeometry(t):t instanceof he?this.isSimpleLinearGeometry(t):t instanceof ce?this.isSimpleMultiPoint(t):K(t,rn)?this.isSimplePolygonal(t):t instanceof pt?this.isSimpleGeometryCollection(t):!0},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return $r}}),a(Qi.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Qi}}),$r.EndpointInfo=Qi,a(xt.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this.quadrantSegments=t,this.quadrantSegments===0&&(this.joinStyle=xt.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=xt.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),0>=t&&(this.quadrantSegments=1),this.joinStyle!==xt.JOIN_ROUND&&(this.quadrantSegments=xt.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(t){this.joinStyle=t},setSimplifyFactor:function(t){this.simplifyFactor=0>t?0:t},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(t){this.endCapStyle=t},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(t){this.mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return xt}}),xt.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},xt.CAP_ROUND=1,xt.CAP_FLAT=2,xt.CAP_SQUARE=3,xt.JOIN_ROUND=1,xt.JOIN_MITRE=2,xt.JOIN_BEVEL=3,xt.DEFAULT_QUADRANT_SEGMENTS=8,xt.DEFAULT_MITRE_LIMIT=5,xt.DEFAULT_SIMPLIFY_FACTOR=.01,a(oo.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return 0>n&&(n=this.getRightmostSideOfSegment(t,e-1)),0>n&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n},findRightmostEdgeAtVertex:function(){var t=this.minDe.getEdge().getCoordinates();T.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],r=et.computeOrientation(this.minCoord,n,e),s=!1;(e.y<this.minCoord.y&&n.y<this.minCoord.y&&r===et.COUNTERCLOCKWISE||e.y>this.minCoord.y&&n.y>this.minCoord.y&&r===et.CLOCKWISE)&&(s=!0),s&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(t,e){var n=t.getEdge(),r=n.getCoordinates();if(0>e||e+1>=r.length||r[e].y===r[e+1].y)return-1;var s=$.LEFT;return r[e].y<r[e+1].y&&(s=$.RIGHT),s},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(this.minCoord===null||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n])},findRightmostEdgeAtNode:function(){var t=this.minDe.getNode(),e=t.getEdges();this.minDe=e.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}T.isTrue(this.minIndex!==0||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),this.minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var r=this.getRightmostSide(this.minDe,this.minIndex);r===$.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return oo}}),$i.prototype.addLast=function(t){this.array_.push(t)},$i.prototype.removeFirst=function(){return this.array_.shift()},$i.prototype.isEmpty=function(){return this.array_.length===0},a(ao.prototype,{clearVisitedEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(e===null)throw new ge("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();r.setVisited(!0),this.copySymDepths(r)}},computeDepth:function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths($.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth($.RIGHT)>=1&&e.getDepth($.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new Jt,n=new $i,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var s=n.removeFirst();e.add(s),this.computeNodeDepth(s);for(var o=s.getEdges().iterator();o.hasNext();){var u=o.next(),l=u.getSym();if(!l.isVisited()){var x=l.getNode();e.contains(x)||(n.addLast(x),e.add(x))}}}},compareTo:function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},getEnvelope:function(){if(this.env===null){for(var t=new D,e=this.dirEdgeList.iterator();e.hasNext();)for(var n=e.next(),r=n.getEdge().getCoordinates(),s=0;s<r.length-1;s++)t.expandToInclude(r[s]);this.env=t}return this.env},addReachable:function(t){var e=new ie;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth($.LEFT,t.getDepth($.RIGHT)),e.setDepth($.RIGHT,t.getDepth($.LEFT))},add:function(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this.dirEdgeList.add(r);var s=r.getSym(),o=s.getNode();o.isVisited()||e.push(o)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[g]},getClass:function(){return ao}}),a(jt.prototype,{isDeletable:function(t,e,n,r){var s=this.inputLine[t],o=this.inputLine[e],u=this.inputLine[n];return this.isConcave(s,o,u)&&this.isShallow(s,o,u,r)?this.isShallowSampled(s,o,t,n,r):!1},deleteShallowConcavities:function(){for(var t=1,e=(this.inputLine.length-1,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),r=!1;n<this.inputLine.length;){var s=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=jt.DELETE,s=!0,r=!0),t=s?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},isShallowConcavity:function(t,e,n,r){var s=et.computeOrientation(t,e,n),o=s===this.angleOrientation;if(!o)return!1;var u=et.distancePointLine(e,t,n);return r>u},isShallowSampled:function(t,e,n,r,s){var o=Math.trunc((r-n)/jt.NUM_PTS_TO_CHECK);0>=o&&(o=1);for(var u=n;r>u;u+=o)if(!this.isShallow(t,e,this.inputLine[u],s))return!1;return!0},isConcave:function(e,n,r){var s=et.computeOrientation(e,n,r),o=s===this.angleOrientation;return o},simplify:function(t){this.distanceTol=Math.abs(t),0>t&&(this.angleOrientation=et.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===jt.DELETE;)e++;return e},isShallow:function(t,e,n,r){var s=et.distancePointLine(e,t,n);return r>s},collapseLine:function(){for(var t=new A,e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==jt.DELETE&&t.add(this.inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return jt}}),jt.simplify=function(t,e){var n=new jt(t);return n.simplify(e)},jt.INIT=0,jt.DELETE=1,jt.KEEP=1,jt.NUM_PTS_TO_CHECK=10,a(ti.prototype,{getCoordinates:function(){var t=this.ptList.toArray(ti.COORDINATE_ARRAY_TYPE);return t},setPrecisionModel:function(t){this.precisionModel=t},addPt:function(t){var e=new v(t);return this.precisionModel.makePrecise(e),this.isRedundant(e)?null:void this.ptList.add(e)},reverse:function(){},addPts:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},isRedundant:function(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1),n=t.distance(e);return n<this.minimimVertexDistance},toString:function(){var t=new ft,e=t.createLineString(this.getCoordinates());return e.toString()},closeRing:function(){if(this.ptList.size()<1)return null;var t=new v(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1);return this.ptList.size()>=2&&this.ptList.get(this.ptList.size()-2),t.equals(e)?null:void this.ptList.add(t)},setMinimumVertexDistance:function(t){this.minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return ti}}),ti.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),a(Ze.prototype,{addNextSegment:function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=et.computeOrientation(this.s0,this.s1,this.s2),r=n===et.CLOCKWISE&&this.side===$.LEFT||n===et.COUNTERCLOCKWISE&&this.side===$.RIGHT;n===0?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},addLineEndCap:function(t,e){var n=new lt(t,e),r=new lt;this.computeOffsetSegment(n,$.LEFT,this.distance,r);var s=new lt;this.computeOffsetSegment(n,$.RIGHT,this.distance,s);var o=e.x-t.x,u=e.y-t.y,l=Math.atan2(u,o);switch(this.bufParams.getEndCapStyle()){case xt.CAP_ROUND:this.segList.addPt(r.p1),this.addFilletArc(e,l+Math.PI/2,l-Math.PI/2,et.CLOCKWISE,this.distance),this.segList.addPt(s.p1);break;case xt.CAP_FLAT:this.segList.addPt(r.p1),this.segList.addPt(s.p1);break;case xt.CAP_SQUARE:var x=new v;x.x=Math.abs(this.distance)*Math.cos(l),x.y=Math.abs(this.distance)*Math.sin(l);var P=new v(r.p1.x+x.x,r.p1.y+x.y),z=new v(s.p1.x+x.x,s.p1.y+x.y);this.segList.addPt(P),this.segList.addPt(z)}},getCoordinates:function(){var t=this.segList.getCoordinates();return t},addMitreJoin:function(t,e,n,r){var s=!0,o=null;try{o=J.intersection(e.p0,e.p1,n.p0,n.p1);var u=0>=r?1:o.distance(t)/Math.abs(r);u>this.bufParams.getMitreLimit()&&(s=!1)}catch(l){if(!(l instanceof G))throw l;o=new v(0,0),s=!1}finally{}s?this.segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this.bufParams.getMitreLimit())},addFilletCorner:function(t,e,n,r,s){var o=e.x-t.x,u=e.y-t.y,l=Math.atan2(u,o),x=n.x-t.x,P=n.y-t.y,z=Math.atan2(P,x);r===et.CLOCKWISE?z>=l&&(l+=2*Math.PI):l>=z&&(l-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,l,z,r,s),this.segList.addPt(n)},addOutsideTurn:function(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*Ze.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===xt.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===xt.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(t){this.segList.addPt(new v(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new v(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new v(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new v(t.x-this.distance,t.y+this.distance)),this.segList.closeRing()},addSegments:function(t,e){this.segList.addPts(t,e)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)},addLimitedMitreJoin:function(t,e,n,r){var s=this.seg0.p1,o=ht.angle(s,this.seg0.p0),u=(ht.angle(s,this.seg1.p1),ht.angleBetweenOriented(this.seg0.p0,s,this.seg1.p1)),l=u/2,x=ht.normalize(o+l),P=ht.normalize(x+Math.PI),z=r*n,k=z*Math.abs(Math.sin(l)),j=n-k,nt=s.x+z*Math.cos(P),at=s.y+z*Math.sin(P),ut=new v(nt,at),bt=new lt(s,ut),kt=bt.pointAlongOffset(1,j),Ve=bt.pointAlongOffset(1,-j);this.side===$.LEFT?(this.segList.addPt(kt),this.segList.addPt(Ve)):(this.segList.addPt(Ve),this.segList.addPt(kt))},computeOffsetSegment:function(t,e,n,r){var s=e===$.LEFT?1:-1,o=t.p1.x-t.p0.x,u=t.p1.y-t.p0.y,l=Math.sqrt(o*o+u*u),x=s*n*o/l,P=s*n*u/l;r.p0.x=t.p0.x-P,r.p0.y=t.p0.y+x,r.p1.x=t.p1.x-P,r.p1.y=t.p1.y+x},addFilletArc:function(t,e,n,r,s){var o=r===et.CLOCKWISE?-1:1,u=Math.abs(e-n),l=Math.trunc(u/this.filletAngleQuantum+.5);if(1>l)return null;var x=null,P=null;x=0,P=u/l;for(var z=x,k=new v;u>z;){var j=e+o*z;k.x=t.x+s*Math.cos(j),k.y=t.y+s*Math.sin(j),this.segList.addPt(k),z+=P}},addInsideTurn:function(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*Ze.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var n=new v((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n);var r=new v((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(r)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(t){var e=new v(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},init:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new ti,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*Ze.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var e=this.li.getIntersectionNum();e>=2&&(this.bufParams.getJoinStyle()===xt.JOIN_BEVEL||this.bufParams.getJoinStyle()===xt.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,et.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return Ze}}),Ze.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Ze.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Ze.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Ze.MAX_CLOSING_SEG_LEN_FACTOR=80,a(ei.prototype,{getOffsetCurve:function(t,e){if(this.distance=e,e===0)return null;var n=0>e,r=Math.abs(e),s=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],s):this.computeOffsetCurve(t,n,s);var o=s.getCoordinates();return n&&ot.reverse(o),o},computeSingleSidedBufferCurve:function(t,e,n){var r=this.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var s=jt.simplify(t,-r),o=s.length-1;n.initSideSegments(s[o],s[o-1],$.LEFT),n.addFirstSegment();for(var u=o-2;u>=0;u--)n.addNextSegment(s[u],!0)}else{n.addSegments(t,!1);var l=jt.simplify(t,r),x=l.length-1;n.initSideSegments(l[0],l[1],$.LEFT),n.addFirstSegment();for(var u=2;x>=u;u++)n.addNextSegment(l[u],!0)}n.addLastSegment(),n.closeRing()},computeRingBufferCurve:function(t,e,n){var r=this.simplifyTolerance(this.distance);e===$.RIGHT&&(r=-r);var s=jt.simplify(t,r),o=s.length-1;n.initSideSegments(s[o-1],s[0],e);for(var u=1;o>=u;u++){var l=u!==1;n.addNextSegment(s[u],l)}n.closeRing()},computeLineBufferCurve:function(t,e){var n=this.simplifyTolerance(this.distance),r=jt.simplify(t,n),s=r.length-1;e.initSideSegments(r[0],r[1],$.LEFT);for(var o=2;s>=o;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[s-1],r[s]);var u=jt.simplify(t,-n),l=u.length-1;e.initSideSegments(u[l],u[l-1],$.LEFT);for(var o=l-2;o>=0;o--)e.addNextSegment(u[o],!0);e.addLastSegment(),e.addLineEndCap(u[1],u[0]),e.closeRing()},computePointCurve:function(t,e){switch(this.bufParams.getEndCapStyle()){case xt.CAP_ROUND:e.createCircle(t);break;case xt.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if(this.distance=e,0>e&&!this.bufParams.isSingleSided()||e===0)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this.bufParams.isSingleSided()){var s=0>e;this.computeSingleSidedBufferCurve(t,s,r)}else this.computeLineBufferCurve(t,r);var o=r.getCoordinates();return o},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(t){return t*this.bufParams.getSimplifyFactor()},getRingCurve:function(t,e,n){if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(n===0)return ei.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},computeOffsetCurve:function(t,e,n){var r=this.simplifyTolerance(this.distance);if(e){var s=jt.simplify(t,-r),o=s.length-1;n.initSideSegments(s[o],s[o-1],$.LEFT),n.addFirstSegment();for(var u=o-2;u>=0;u--)n.addNextSegment(s[u],!0)}else{var l=jt.simplify(t,r),x=l.length-1;n.initSideSegments(l[0],l[1],$.LEFT),n.addFirstSegment();for(var u=2;x>=u;u++)n.addNextSegment(l[u],!0)}n.addLastSegment()},getSegGen:function(t){return new Ze(this.precisionModel,this.bufParams,t)},interfaces_:function(){return[]},getClass:function(){return ei}}),ei.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new v(t[n]);return e},a(ts.prototype,{findStabbedSegments:function(){if(arguments.length===1){for(var t=arguments[0],e=new w,n=this.subgraphs.iterator();n.hasNext();){var r=n.next(),s=r.getEnvelope();t.y<s.getMinY()||t.y>s.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(arguments.length===3){if(K(arguments[2],N)&&arguments[0]instanceof v&&arguments[1]instanceof Zn)for(var o=arguments[0],u=arguments[1],l=arguments[2],x=u.getEdge().getCoordinates(),n=0;n<x.length-1;n++){this.seg.p0=x[n],this.seg.p1=x[n+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var P=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(P<o.x||this.seg.isHorizontal()||o.y<this.seg.p0.y||o.y>this.seg.p1.y||et.computeOrientation(this.seg.p0,this.seg.p1,o)===et.RIGHT)){var z=u.getDepth($.LEFT);this.seg.p0.equals(x[n])||(z=u.getDepth($.RIGHT));var k=new es(this.seg,z);l.add(k)}}else if(K(arguments[2],N)&&arguments[0]instanceof v&&K(arguments[1],N))for(var j=arguments[0],nt=arguments[1],at=arguments[2],n=nt.iterator();n.hasNext();){var ut=n.next();ut.isForward()&&this.findStabbedSegments(j,ut,at)}}},getDepth:function(t){var e=this.findStabbedSegments(t);if(e.size()===0)return 0;var n=Qe.min(e);return n.leftDepth},interfaces_:function(){return[]},getClass:function(){return ts}}),a(es.prototype,{compareTo:function(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(e.upwardSeg);return n!==0?n:(n=-1*e.upwardSeg.orientationIndex(this.upwardSeg),n!==0?n:this.upwardSeg.compareTo(e.upwardSeg))},compareX:function(t,e){var n=t.p0.compareTo(e.p0);return n!==0?n:t.p1.compareTo(e.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[g]},getClass:function(){return es}}),ts.DepthSegment=es,a(uo.prototype,{addPoint:function(t){if(this.distance<=0)return null;var e=t.getCoordinates(),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,f.EXTERIOR,f.INTERIOR)},addPolygon:function(t){var e=this.distance,n=$.LEFT;this.distance<0&&(e=-this.distance,n=$.RIGHT);var r=t.getExteriorRing(),s=ot.removeRepeatedPoints(r.getCoordinates());if(this.distance<0&&this.isErodedCompletely(r,this.distance)||this.distance<=0&&s.length<3)return null;this.addPolygonRing(s,e,n,f.EXTERIOR,f.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var u=t.getInteriorRingN(o),l=ot.removeRepeatedPoints(u.getCoordinates());this.distance>0&&this.isErodedCompletely(u,-this.distance)||this.addPolygonRing(l,e,$.opposite(n),f.INTERIOR,f.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var n=new _t(t[0],t[1],t[2]),r=n.inCentre(),s=et.distancePointLine(r,n.p0,n.p1);return s<Math.abs(e)},addLineString:function(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var e=ot.removeRepeatedPoints(t.getCoordinates()),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,f.EXTERIOR,f.INTERIOR)},addCurve:function(t,e,n){if(t===null||t.length<2)return null;var r=new Xe(t,new zt(0,f.BOUNDARY,e,n));this.curveList.add(r)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(t,e,n,r,s){if(e===0&&t.length<qt.MINIMUM_VALID_SIZE)return null;var o=r,u=s;t.length>=qt.MINIMUM_VALID_SIZE&&et.isCCW(t)&&(o=s,u=r,n=$.opposite(n));var l=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(l,o,u)},add:function(t){if(t.isEmpty())return null;if(t instanceof Tt)this.addPolygon(t);else if(t instanceof gt)this.addLineString(t);else if(t instanceof At)this.addPoint(t);else if(t instanceof ce)this.addCollection(t);else if(t instanceof he)this.addCollection(t);else if(t instanceof Kt)this.addCollection(t);else{if(!(t instanceof pt))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var n=t.getCoordinates();if(n.length<4)return 0>e;if(n.length===4)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),s=Math.min(r.getHeight(),r.getWidth());return 0>e&&2*Math.abs(e)>s},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},interfaces_:function(){return[]},getClass:function(){return uo}}),a(ni.prototype,{isTrivialIntersection:function(t,e,n,r){if(t===n&&this.li.getIntersectionNum()===1){if(ni.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var s=t.size()-1;if(e===0&&r===s||r===0&&e===s)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var s=t.getCoordinates()[e],o=t.getCoordinates()[e+1],u=n.getCoordinates()[r],l=n.getCoordinates()[r+1];this.li.computeIntersection(s,o,u,l),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[Ur]},getClass:function(){return ni}}),ni.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1},a(bn.prototype,{setWorkingPrecisionModel:function(t){this.workingPrecisionModel=t},insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(e!==null){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new zt(t.getLabel()),r.flip()),n.merge(r);var s=bn.depthDelta(r),o=e.getDepthDelta(),u=o+s;e.setDepthDelta(u)}else this.edgeList.add(t),t.setDepthDelta(bn.depthDelta(t.getLabel()))},buildSubgraphs:function(t,e){for(var n=new w,r=t.iterator();r.hasNext();){var s=r.next(),o=s.getRightmostCoordinate(),u=new ts(n),l=u.getDepth(o);s.computeDepth(l),s.findResultEdges(),n.add(s),e.add(s.getDirectedEdges(),s.getNodes())}},createSubgraphs:function(t){for(var e=new w,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var s=new ao;s.create(r),e.add(s)}}return Qe.sort(e,Qe.reverseOrder()),e},createEmptyResultGeometry:function(){var t=this.geomFact.createPolygon();return t},getNoder:function(t){if(this.workingNoder!==null)return this.workingNoder;var e=new Sn,n=new Wt;return n.setPrecisionModel(t),e.setSegmentIntersector(new ni(n)),e},buffer:function(t,e){var n=this.workingPrecisionModel;n===null&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();var r=new ei(n,this.bufParams),s=new uo(t,e,r),o=s.getCurves();if(o.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(o,n),this.graph=new He(new mr),this.graph.addEdges(this.edgeList.getEdges());var u=this.createSubgraphs(this.graph),l=new Gi(this.geomFact);this.buildSubgraphs(u,l);var x=l.getPolygons();if(x.size()<=0)return this.createEmptyResultGeometry();var P=this.geomFact.buildGeometry(x);return P},computeNodedEdges:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings(),s=r.iterator();s.hasNext();){var o=s.next(),u=o.getCoordinates();if(u.length!==2||!u[0].equals2D(u[1])){var l=o.getData(),x=new Te(o.getCoordinates(),new zt(l));this.insertUniqueEdge(x)}}},setNoder:function(t){this.workingNoder=t},interfaces_:function(){return[]},getClass:function(){return bn}}),bn.depthDelta=function(t){var e=t.getLocation(0,$.LEFT),n=t.getLocation(0,$.RIGHT);return e===f.INTERIOR&&n===f.EXTERIOR?1:e===f.EXTERIOR&&n===f.INTERIOR?-1:0},bn.convertSegStrings=function(t){for(var e=new ft,n=new w;t.hasNext();){var r=t.next(),s=e.createLineString(r.getCoordinates());n.add(s)}return e.buildGeometry(n)},a(ri.prototype,{checkEndPtVertexIntersections:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next(),n=e.getCoordinates();this.checkEndPtVertexIntersections(n[0],this.segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this.segStrings)}else if(arguments.length===2){for(var r=arguments[0],s=arguments[1],t=s.iterator();t.hasNext();)for(var e=t.next(),n=e.getCoordinates(),o=1;o<n.length-1;o++)if(n[o].equals(r))throw new L("found endpt/interior pt intersection at index "+o+" :pt "+r)}},checkInteriorIntersections:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this.segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(arguments.length===2)for(var s=arguments[0],o=arguments[1],u=s.getCoordinates(),l=o.getCoordinates(),x=0;x<u.length-1;x++)for(var P=0;P<l.length-1;P++)this.checkInteriorIntersections(s,x,o,P);else if(arguments.length===4){var z=arguments[0],k=arguments[1],j=arguments[2],nt=arguments[3];if(z===j&&k===nt)return null;var at=z.getCoordinates()[k],ut=z.getCoordinates()[k+1],bt=j.getCoordinates()[nt],kt=j.getCoordinates()[nt+1];if(this.li.computeIntersection(at,ut,bt,kt),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,at,ut)||this.hasInteriorIntersection(this.li,bt,kt)))throw new L("found non-noded intersection at "+at+"-"+ut+" and "+bt+"-"+kt)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(arguments.length===1)for(var n=arguments[0],r=n.getCoordinates(),t=0;t<r.length-2;t++)this.checkCollapse(r[t],r[t+1],r[t+2])},hasInteriorIntersection:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var s=t.getIntersection(r);if(!s.equals(e)&&!s.equals(n))return!0}return!1},checkCollapse:function(t,e,n){if(t.equals(n))throw new L("found non-noded collapse at "+ri.fact.createLineString([t,e,n]))},interfaces_:function(){return[]},getClass:function(){return ri}}),ri.fact=new ft,a(xr.prototype,{intersectsScaled:function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),s=Math.min(t.y,e.y),o=Math.max(t.y,e.y),u=this.maxx<n||this.minx>r||this.maxy<s||this.miny>o;if(u)return!1;var l=this.intersectsToleranceSquare(t,e);return T.isTrue(!(u&&l),"Found bad envelope test"),l},initCorners:function(t){var e=.5;this.minx=t.x-e,this.maxx=t.x+e,this.miny=t.y-e,this.maxy=t.y+e,this.corner[0]=new v(this.maxx,this.maxy),this.corner[1]=new v(this.minx,this.maxy),this.corner[2]=new v(this.minx,this.miny),this.corner[3]=new v(this.maxx,this.miny)},intersects:function(t,e){return this.scaleFactor===1?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(t){return Math.round(t*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){if(this.safeEnv===null){var t=xr.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new D(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},intersectsPixelClosure:function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.hasIntersection())))},intersectsToleranceSquare:function(t,e){var n=!1,r=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),this.li.isProper()?!0:(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.isProper()?!0:(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.isProper()?!0:(this.li.hasIntersection()&&(r=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.isProper()||n&&r||t.equals(this.pt)?!0:!!e.equals(this.pt))))},addSnappedNode:function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return this.intersects(n,r)?(t.addIntersection(this.getCoordinate(),e),!0):!1},interfaces_:function(){return[]},getClass:function(){return xr}}),xr.SAFE_ENV_EXPANSION_FACTOR=.75,a(Dn.prototype,{select:function(){if(arguments.length!==1){if(arguments.length===2){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}}},interfaces_:function(){return[]},getClass:function(){return Dn}}),a(ns.prototype,{snap:function(){if(arguments.length===1){var t=arguments[0];return this.snap(t,null,-1)}if(arguments.length===3){var e=arguments[0],n=arguments[1],r=arguments[2],s=e.getSafeEnvelope(),o=new ii(e,n,r);return this.index.query(s,{interfaces_:function(){return[wn]},visitItem:function(u){var l=u;l.select(s,o)}}),o.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return ns}}),C(ii,Dn),a(ii.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(arguments.length!==2)return Dn.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();return this.parentEdge!==null&&n===this.parentEdge&&e===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(n,e))},interfaces_:function(){return[]},getClass:function(){return ii}}),ns.HotPixelSnapAction=ii,a(lo.prototype,{processIntersections:function(t,e,n,r){if(t===n&&e===r)return null;var s=t.getCoordinates()[e],o=t.getCoordinates()[e+1],u=n.getCoordinates()[r],l=n.getCoordinates()[r+1];if(this.li.computeIntersection(s,o,u,l),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var x=0;x<this.li.getIntersectionNum();x++)this.interiorIntersections.add(this.li.getIntersection(x));t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[Ur]},getClass:function(){return lo}}),a(ho.prototype,{checkCorrectness:function(t){var e=Xe.getNodedSubstrings(t),n=new ri(e);try{n.checkValid()}catch(r){if(!(r instanceof V))throw r;r.printStackTrace()}finally{}},getNodedSubstrings:function(){return Xe.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){var n=new lo(e);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(t),n.getInteriorIntersections()},computeVertexSnaps:function(){if(K(arguments[0],b))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.computeVertexSnaps(n)}else if(arguments[0]instanceof Xe)for(var r=arguments[0],s=r.getCoordinates(),o=0;o<s.length;o++){var u=new xr(s[o],this.scaleFactor,this.li),l=this.pointSnapper.snap(u,r,o);l&&r.addIntersection(s[o],o)}},computeNodes:function(t){this.nodedSegStrings=t,this.noder=new Sn,this.pointSnapper=new ns(this.noder.getIndex()),this.snapRound(t,this.li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new xr(n,this.scaleFactor,this.li);this.pointSnapper.snap(r)}},interfaces_:function(){return[Vr]},getClass:function(){return ho}}),a(Qt.prototype,{bufferFixedPrecision:function(t){var e=new Qr(new ho(new Ct(1)),t.getScale()),n=new bn(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(arguments.length===0){for(var t=Qt.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(s){if(!(s instanceof ge))throw s;this.saveException=s}finally{}if(this.resultGeometry!==null)return null}throw this.saveException}if(arguments.length===1){var e=arguments[0],n=Qt.precisionScaleFactor(this.argGeom,this.distance,e),r=new Ct(n);this.bufferFixedPrecision(r)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),this.resultGeometry!==null)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===Ct.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this.bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new bn(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(e){if(!(e instanceof L))throw e;this.saveException=e}finally{}},getResultGeometry:function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(t){this.bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return Qt}}),Qt.bufferOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new Qt(t),r=n.getResultGeometry(e);return r}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof Z&&typeof arguments[1]=="number"){var s=arguments[0],o=arguments[1],u=arguments[2],l=new Qt(s);l.setQuadrantSegments(u);var r=l.getResultGeometry(o);return r}if(arguments[2]instanceof xt&&arguments[0]instanceof Z&&typeof arguments[1]=="number"){var x=arguments[0],P=arguments[1],z=arguments[2],l=new Qt(x,z),r=l.getResultGeometry(P);return r}}else if(arguments.length===4){var k=arguments[0],j=arguments[1],nt=arguments[2],at=arguments[3],l=new Qt(k);l.setQuadrantSegments(nt),l.setEndCapStyle(at);var r=l.getResultGeometry(j);return r}},Qt.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),s=st.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),o=e>0?e:0,u=s+2*o,l=Math.trunc(Math.log(u)/Math.log(10)+1),x=n-l,P=Math.pow(10,x);return P},Qt.CAP_ROUND=xt.CAP_ROUND,Qt.CAP_BUTT=xt.CAP_FLAT,Qt.CAP_FLAT=xt.CAP_FLAT,Qt.CAP_SQUARE=xt.CAP_SQUARE,Qt.MAX_PRECISION_DIGITS=12;var eh=Object.freeze({BufferOp:Qt,BufferParameters:xt});a(tr.prototype,{filter:function(t){t instanceof Tt&&this.comps.add(t)},interfaces_:function(){return[nn]},getClass:function(){return tr}}),tr.getPolygons=function(){if(arguments.length===1){var t=arguments[0];return tr.getPolygons(t,new w)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e instanceof Tt?n.add(e):e instanceof pt&&e.apply(new tr(n)),n}},a(me.prototype,{isInsideArea:function(){return this.segIndex===me.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return me}}),me.INSIDE_AREA=-1,a(er.prototype,{filter:function(t){t instanceof At&&this.pts.add(t)},interfaces_:function(){return[nn]},getClass:function(){return er}}),er.getPoints=function(){if(arguments.length===1){var t=arguments[0];return t instanceof At?Qe.singletonList(t):er.getPoints(t,new w)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e instanceof At?n.add(e):e instanceof pt&&e.apply(new er(n)),n}},a(si.prototype,{filter:function(t){(t instanceof At||t instanceof gt||t instanceof Tt)&&this.locations.add(new me(t,0,t.getCoordinate()))},interfaces_:function(){return[nn]},getClass:function(){return si}}),si.getLocations=function(t){var e=new w;return t.apply(new si(e)),e},a(Ge.prototype,{computeContainmentDistance:function(){if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],r=1-e,s=tr.getPolygons(this.geom[e]);if(s.size()>0){var o=si.getLocations(this.geom[r]);if(this.computeContainmentDistance(o,s,n),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[r]=n[0],this.minDistanceLocation[e]=n[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&K(arguments[0],N)&&K(arguments[1],N)){for(var u=arguments[0],l=arguments[1],x=arguments[2],P=0;P<u.size();P++)for(var z=u.get(P),k=0;k<l.size();k++)if(this.computeContainmentDistance(z,l.get(k),x),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof me&&arguments[1]instanceof Tt){var j=arguments[0],nt=arguments[1],at=arguments[2],ut=j.getCoordinate();if(f.EXTERIOR!==this.ptLocator.locate(ut,nt))return this.minDistance=0,at[0]=j,at[1]=new me(nt,ut),null}}},computeMinDistanceLinesPoints:function(t,e,n){for(var r=0;r<t.size();r++)for(var s=t.get(r),o=0;o<e.size();o++){var u=e.get(o);if(this.computeMinDistance(s,u,n),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=te.getLines(this.geom[0]),n=te.getLines(this.geom[1]),r=er.getPoints(this.geom[0]),s=er.getPoints(this.geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,s,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,s,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(t,e){return t[0]===null?null:void(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},nearestPoints:function(){this.computeMinDistance();var t=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return t},computeMinDistance:function(){if(arguments.length===0){if(this.minDistanceLocation!==null||(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof gt&&arguments[1]instanceof At){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var r=t.getCoordinates(),s=e.getCoordinate(),o=0;o<r.length-1;o++){var u=et.distancePointLine(s,r[o],r[o+1]);if(u<this.minDistance){this.minDistance=u;var l=new lt(r[o],r[o+1]),x=l.closestPoint(s);n[0]=new me(t,o,x),n[1]=new me(e,0,s)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof gt&&arguments[1]instanceof gt){var P=arguments[0],z=arguments[1],k=arguments[2];if(P.getEnvelopeInternal().distance(z.getEnvelopeInternal())>this.minDistance)return null;for(var r=P.getCoordinates(),j=z.getCoordinates(),o=0;o<r.length-1;o++)for(var nt=0;nt<j.length-1;nt++){var u=et.distanceLineLine(r[o],r[o+1],j[nt],j[nt+1]);if(u<this.minDistance){this.minDistance=u;var at=new lt(r[o],r[o+1]),ut=new lt(j[nt],j[nt+1]),bt=at.closestPoints(ut);k[0]=new me(P,o,bt[0]),k[1]=new me(z,nt,bt[1])}if(this.minDistance<=this.terminateDistance)return null}}}},computeMinDistancePoints:function(t,e,n){for(var r=0;r<t.size();r++)for(var s=t.get(r),o=0;o<e.size();o++){var u=e.get(o),l=s.getCoordinate().distance(u.getCoordinate());if(l<this.minDistance&&(this.minDistance=l,n[0]=new me(s,0,s.getCoordinate()),n[1]=new me(u,0,u.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(this.geom[0]===null||this.geom[1]===null)throw new h;return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(t,e,n){for(var r=0;r<t.size();r++)for(var s=t.get(r),o=0;o<e.size();o++){var u=e.get(o);if(this.computeMinDistance(s,u,n),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return Ge}}),Ge.distance=function(t,e){var n=new Ge(t,e);return n.distance()},Ge.isWithinDistance=function(t,e,n){var r=new Ge(t,e,n);return r.distance()<=n},Ge.nearestPoints=function(t,e){var n=new Ge(t,e);return n.nearestPoints()};var nh=Object.freeze({DistanceOp:Ge});a(co.prototype,{getCoordinates:function(){if(this.coordinates===null){for(var t=0,e=0,n=new A,r=this.directedEdges.iterator();r.hasNext();){var s=r.next();s.getEdgeDirection()?t++:e++,n.add(s.getEdge().getLine().getCoordinates(),!1,s.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),e>t&&ot.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(t){this.directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return co}}),a(Oe.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this.data=t},getData:function(){return this.data},setMarked:function(t){this._isMarked=t},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(t){this.data=t},interfaces_:function(){return[]},getClass:function(){return Oe}}),Oe.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()===e)return n}return null},Oe.setVisited=function(t,e){for(;t.hasNext();){var n=t.next();n.setVisited(e)}},Oe.setMarked=function(t,e){for(;t.hasNext();){var n=t.next();n.setMarked(e)}},C(we,Oe),a(we.prototype,{isRemoved:function(){return this.parentEdge===null},compareDirection:function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:et.computeOrientation(t.p0,t.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(t){var e=this.getClass().getName(),n=e.lastIndexOf("."),r=e.substring(n+1);t.print("  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(t){var e=t;return this.compareDirection(e)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(t){this.parentEdge=t},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(t){this.sym=t},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[g]},getClass:function(){return we}}),we.toEdges=function(t){for(var e=new w,n=t.iterator();n.hasNext();)e.add(n.next().parentEdge);return e},C(oi,we),a(oi.prototype,{getNext:function(){return this.getToNode().getDegree()!==2?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(T.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return oi}}),C(Je,Oe),a(Je.prototype,{isRemoved:function(){return this.dirEdge===null},setDirectedEdges:function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this.dirEdge[t]}if(arguments[0]instanceof gn){var e=arguments[0];return this.dirEdge[0].getFromNode()===e?this.dirEdge[0]:this.dirEdge[1].getFromNode()===e?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(t){return this.dirEdge[0].getFromNode()===t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===t?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return Je}}),a(go.prototype,{getNextEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e+1))},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(Qe.sort(this.outEdges),this.sorted=!0)},remove:function(t){this.outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e-1))},getIndex:function(){if(arguments[0]instanceof Je){var t=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n.getEdge()===t)return e}return-1}if(arguments[0]instanceof we){var r=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n===r)return e}return-1}if(Number.isInteger(arguments[0])){var s=arguments[0],o=s%this.outEdges.size();return 0>o&&(o+=this.outEdges.size()),o}},add:function(t){this.outEdges.add(t),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return go}}),C(gn,Oe),a(gn.prototype,{isRemoved:function(){return this.pt===null},addOutEdge:function(t){this.deStar.add(t)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(arguments.length===0)this.pt=null;else if(arguments.length===1){var t=arguments[0];this.deStar.remove(t)}},getIndex:function(t){return this.deStar.getIndex(t)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return gn}}),gn.getEdgesBetween=function(t,e){var n=we.toEdges(t.getOutEdges().getEdges()),r=new Jt(n),s=we.toEdges(e.getOutEdges().getEdges());return r.retainAll(s),r},C(rs,Je),a(rs.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return rs}}),a(fo.prototype,{find:function(t){return this.nodeMap.get(t)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(t){return this.nodeMap.remove(t)},values:function(){return this.nodeMap.values()},add:function(t){return this.nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return fo}}),a(Er.prototype,{findNodesOfDegree:function(t){for(var e=new w,n=this.nodeIterator();n.hasNext();){var r=n.next();r.getDegree()===t&&e.add(r)}return e},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof Je){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),t.remove()}else if(arguments[0]instanceof we){var e=arguments[0],n=e.getSym();n!==null&&n.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)}else if(arguments[0]instanceof gn){for(var r=arguments[0],s=r.getOutEdges().getEdges(),o=s.iterator();o.hasNext();){var u=o.next(),n=u.getSym();n!==null&&this.remove(n),this.dirEdges.remove(u);var l=u.getEdge();l!==null&&this.edges.remove(l)}this.nodeMap.remove(r.getCoordinate()),r.remove()}},findNode:function(t){return this.nodeMap.find(t)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof Je){var t=arguments[0];return this.edges.contains(t)}if(arguments[0]instanceof we){var e=arguments[0];return this.dirEdges.contains(e)}},add:function(){if(arguments[0]instanceof gn){var t=arguments[0];this.nodeMap.add(t)}else if(arguments[0]instanceof Je){var e=arguments[0];this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof we){var n=arguments[0];this.dirEdges.add(n)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return Er}}),C(is,Er),a(is.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=ot.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var n=e[0],r=e[e.length-1],s=this.getNode(n),o=this.getNode(r),u=new oi(s,o,e[1],!0),l=new oi(o,s,e[e.length-2],!1),x=new rs(t);x.setDirectedEdges(u,l),this.add(x)},getNode:function(t){var e=this.findNode(t);return e===null&&(e=new gn(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return is}}),a(po.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(T.isTrue(e.getDegree()===2),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getDegree()!==2&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var n=e.next();n.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(n))}},merge:function(){if(this.mergedLineStrings!==null)return null;Oe.setMarked(this.graph.nodeIterator(),!1),Oe.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new w,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new w;for(var t=this.edgeStrings.iterator();t.hasNext();){var e=t.next();this.mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){var e=new co(this.factory),n=t;do e.add(n),n.getEdge().setMarked(!0),n=n.getNext();while(n!==null&&n!==t);return e},add:function(){if(arguments[0]instanceof Z){var t=arguments[0];t.apply({interfaces_:function(){return[rt]},filter:function(o){o instanceof gt&&this.add(o)}})}else if(K(arguments[0],b)){var e=arguments[0];this.mergedLineStrings=null;for(var n=e.iterator();n.hasNext();){var r=n.next();this.add(r)}}else if(arguments[0]instanceof gt){var s=arguments[0];this.factory===null&&(this.factory=s.getFactory()),this.graph.addEdge(s)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return po}});var rh=Object.freeze({LineMerger:po}),ih=Object.freeze({OverlayOp:it});C(ai,we),a(ai.prototype,{getNext:function(){return this.next},isInRing:function(){return this.edgeRing!==null},setRing:function(t){this.edgeRing=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setNext:function(t){this.next=t},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return ai}}),C(ss,Je),a(ss.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return ss}}),a(qe.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(this.ringPts===null){for(var t=new A,e=this.deList.iterator();e.hasNext();){var n=e.next(),r=n.getEdge();qe.addEdge(r.getLine().getCoordinates(),n.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),this.ringPts.length<=3?!1:(this.getRing(),this.ring.isValid())},build:function(t){var e=t;do this.add(e),e.setRing(this),e=e.getNext(),T.isTrue(e!==null,"found null DE in ring"),T.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t)},isOuterHole:function(){return this._isHole?!this.hasShell():!1},getPolygon:function(){var t=null;if(this.holes!==null){t=new Array(this.holes.size()).fill(null);for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}var n=this.factory.createPolygon(this.ring,t);return n},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof qt){var t=arguments[0];this.holes===null&&(this.holes=new w),this.holes.add(t)}else if(arguments[0]instanceof qe){var e=arguments[0];e.setShell(this);var n=e.getRing();this.holes===null&&(this.holes=new w),this.holes.add(n)}},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing();if(n.isOuterHole())return n}return null},computeHole:function(){var t=this.getRing();this._isHole=et.isCCW(t.getCoordinates())},hasShell:function(){return this.shell!==null},isOuterShell:function(){return this.getOuterHole()!==null},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return $t.toLineString(new Ie(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(t){this.deList.add(t)},getRing:function(){if(this.ring!==null)return this.ring;this.getCoordinates(),this.ringPts.length<3&&W.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){if(!(t instanceof V))throw t;W.out.println(this.ringPts)}finally{}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing().getShell();if(n!==null&&n.isIncludedSet())return this.setIncluded(!n.isIncluded()),null}},setShell:function(t){this.shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return qe}}),qe.findDirEdgesInRing=function(t){var e=t,n=new w;do n.add(e),e=e.getNext(),T.isTrue(e!==null,"found null DE in ring"),T.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t);return n},qe.addEdge=function(t,e,n){if(e)for(var r=0;r<t.length;r++)n.add(t[r],!1);else for(var r=t.length-1;r>=0;r--)n.add(t[r],!1)},qe.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),r=n.getEnvelopeInternal(),s=n.getCoordinateN(0),o=null,u=null,l=e.iterator();l.hasNext();){var x=l.next(),P=x.getRing(),z=P.getEnvelopeInternal();if(!z.equals(r)&&z.contains(r)){s=ot.ptNotInList(n.getCoordinates(),P.getCoordinates());var k=!1;et.isPointInRing(s,P.getCoordinates())&&(k=!0),k&&(o===null||u.contains(z))&&(o=x,u=o.getRing().getEnvelopeInternal())}}return o},a(mo.prototype,{compare:function(t,e){var n=t,r=e;return n.getRing().getEnvelope().compareTo(r.getRing().getEnvelope())},interfaces_:function(){return[S]},getClass:function(){return mo}}),qe.EnvelopeComparator=mo,C(Yt,Er),a(Yt.prototype,{findEdgeRing:function(t){var e=new qe(this.factory);return e.build(t),e},computeDepthParity:function(){if(arguments.length===0)for(;;){var t=null;if(t===null)return null;this.computeDepthParity(t)}},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();Yt.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=ot.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var n=e[0],r=e[e.length-1],s=this.getNode(n),o=this.getNode(r),u=new ai(s,o,e[1],!0),l=new ai(o,s,e[e.length-2],!1),x=new ss(t);x.setDirectedEdges(u,l),this.add(x)},deleteCutEdges:function(){this.computeNextCWEdges(),Yt.findLabeledEdgeRings(this.dirEdges);for(var t=new w,e=this.dirEdges.iterator();e.hasNext();){var n=e.next();if(!n.isMarked()){var r=n.getSym();if(n.getLabel()===r.getLabel()){n.setMarked(!0),r.setMarked(!0);var s=n.getEdge();t.add(s.getLine())}}}return t},getEdgeRings:function(){this.computeNextCWEdges(),Yt.label(this.dirEdges,-1);var t=Yt.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new w,n=this.dirEdges.iterator();n.hasNext();){var r=n.next();if(!r.isMarked()&&!r.isInRing()){var s=this.findEdgeRing(r);e.add(s)}}return e},getNode:function(t){var e=this.findNode(t);return e===null&&(e=new gn(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel(),s=Yt.findIntersectionNodes(n,r);if(s!==null)for(var o=s.iterator();o.hasNext();){var u=o.next();Yt.computeNextCCWEdges(u,r)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new Jt,n=new ie,r=t.iterator();r.hasNext();)n.push(r.next());for(;!n.isEmpty();){var s=n.pop();Yt.deleteAllEdges(s);for(var o=s.getOutEdges().getEdges(),r=o.iterator();r.hasNext();){var u=r.next();u.setMarked(!0);var l=u.getSym();l!==null&&l.setMarked(!0);var x=u.getEdge();e.add(x.getLine());var P=u.getToNode();Yt.getDegreeNonDeleted(P)===1&&n.push(P)}}return e},interfaces_:function(){return[]},getClass:function(){return Yt}}),Yt.findLabeledEdgeRings=function(t){for(var e=new w,n=1,r=t.iterator();r.hasNext();){var s=r.next();if(!(s.isMarked()||s.getLabel()>=0)){e.add(s);var o=qe.findDirEdgesInRing(s);Yt.label(o,n),n++}}return e},Yt.getDegreeNonDeleted=function(t){for(var e=t.getOutEdges().getEdges(),n=0,r=e.iterator();r.hasNext();){var s=r.next();s.isMarked()||n++}return n},Yt.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges(),n=e.iterator();n.hasNext();){var r=n.next();r.setMarked(!0);var s=r.getSym();s!==null&&s.setMarked(!0)}},Yt.label=function(t,e){for(var n=t.iterator();n.hasNext();){var r=n.next();r.setLabel(e)}},Yt.computeNextCWEdges=function(t){for(var e=t.getOutEdges(),n=null,r=null,s=e.getEdges().iterator();s.hasNext();){var o=s.next();if(!o.isMarked()){if(n===null&&(n=o),r!==null){var u=r.getSym();u.setNext(o)}r=o}}if(r!==null){var u=r.getSym();u.setNext(n)}},Yt.computeNextCCWEdges=function(t,e){for(var n=t.getOutEdges(),r=null,s=null,o=n.getEdges(),u=o.size()-1;u>=0;u--){var l=o.get(u),x=l.getSym(),P=null;l.getLabel()===e&&(P=l);var z=null;x.getLabel()===e&&(z=x),P===null&&z===null||(z!==null&&(s=z),P!==null&&(s!==null&&(s.setNext(P),s=null),r===null&&(r=P)))}s!==null&&(T.isTrue(r!==null),s.setNext(r))},Yt.getDegree=function(t,e){for(var n=t.getOutEdges().getEdges(),r=0,s=n.iterator();s.hasNext();){var o=s.next();o.getLabel()===e&&r++}return r},Yt.findIntersectionNodes=function(t,e){var n=t,r=null;do{var s=n.getFromNode();Yt.getDegree(s,e)>1&&(r===null&&(r=new w),r.add(s)),n=n.getNext(),T.isTrue(n!==null,"found null DE in ring"),T.isTrue(n===t||!n.isInRing(),"found DE already in ring")}while(n!==t);return r},a(ve.prototype,{getGeometry:function(){return this.geomFactory===null&&(this.geomFactory=new ft),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(ft.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(t,e,n){for(var r=t.iterator();r.hasNext();){var s=r.next();s.isValid()?e.add(s):n.add(s.getLineString())}},polygonize:function(){if(this.polyList!==null||(this.polyList=new w,this.graph===null))return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),e=new w;this.invalidRingLines=new w,this.isCheckingRingsValid?this.findValidRings(t,e,this.invalidRingLines):e=t,this.findShellsAndHoles(e),ve.assignHolesToShells(this.holeList,this.shellList),Qe.sort(this.shellList,new qe.EnvelopeComparator);var n=!0;this.extractOnlyPolygonal&&(ve.findDisjointShells(this.shellList),n=!1),this.polyList=ve.extractPolygons(this.shellList,n)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(K(arguments[0],b))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}else if(arguments[0]instanceof gt){var r=arguments[0];this.geomFactory=r.getFactory(),this.graph===null&&(this.graph=new Yt(this.geomFactory)),this.graph.addEdge(r)}else if(arguments[0]instanceof Z){var s=arguments[0];s.apply(this.lineStringAdder)}},setCheckRingsValid:function(t){this.isCheckingRingsValid=t},findShellsAndHoles:function(t){this.holeList=new w,this.shellList=new w;for(var e=t.iterator();e.hasNext();){var n=e.next();n.computeHole(),n.isHole()?this.holeList.add(n):this.shellList.add(n)}},interfaces_:function(){return[]},getClass:function(){return ve}}),ve.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getOuterHole();r===null||r.isProcessed()||(n.setIncluded(!0),r.setProcessed(!0))}},ve.extractPolygons=function(t,e){for(var n=new w,r=t.iterator();r.hasNext();){var s=r.next();(e||s.isIncluded())&&n.add(s.getPolygon())}return n},ve.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var r=n.next();ve.assignHoleToShell(r,e)}},ve.assignHoleToShell=function(t,e){var n=qe.findEdgeRingContaining(t,e);n!==null&&n.addHole(t)},ve.findDisjointShells=function(t){ve.findOuterShells(t);var e=null;do{e=!1;for(var n=t.iterator();n.hasNext();){var r=n.next();r.isIncludedSet()||(r.updateIncluded(),r.isIncludedSet()||(e=!0))}}while(e)},a(os.prototype,{filter:function(t){t instanceof gt&&this.p.add(t)},interfaces_:function(){return[rt]},getClass:function(){return os}}),ve.LineStringAdder=os;var sh=Object.freeze({Polygonizer:ve});a(as.prototype,{createEdgeEndForNext:function(t,e,n,r){var s=n.segmentIndex+1;if(s>=t.getNumPoints()&&r===null)return null;var o=t.getCoordinate(s);r!==null&&r.segmentIndex===n.segmentIndex&&(o=r.coord);var u=new Ye(t,n.coord,o,new zt(t.getLabel()));e.add(u)},createEdgeEndForPrev:function(t,e,n,r){var s=n.segmentIndex;if(n.dist===0){if(s===0)return null;s--}var o=t.getCoordinate(s);r!==null&&r.segmentIndex>=s&&(o=r.coord);var u=new zt(t.getLabel());u.flip();var l=new Ye(t,n.coord,o,u);e.add(l)},computeEdgeEnds:function(){if(arguments.length===1){for(var t=arguments[0],e=new w,n=t;n.hasNext();){var r=n.next();this.computeEdgeEnds(r,e)}return e}if(arguments.length===2){var s=arguments[0],o=arguments[1],u=s.getEdgeIntersectionList();u.addEndpoints();var l=u.iterator(),x=null,P=null;if(!l.hasNext())return null;var z=l.next();do x=P,P=z,z=null,l.hasNext()&&(z=l.next()),P!==null&&(this.createEdgeEndForPrev(s,o,P,x),this.createEdgeEndForNext(s,o,P,z));while(P!==null)}},interfaces_:function(){return[]},getClass:function(){return as}}),C(ui,Ye),a(ui.prototype,{insert:function(t){this.edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--> Label: "+this.label);for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t),t.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(t,e){for(var n=0,r=!1,s=this.iterator();s.hasNext();){var o=s.next(),u=o.getLabel().getLocation(t);u===f.BOUNDARY&&n++,u===f.INTERIOR&&(r=!0)}var u=f.NONE;r&&(u=f.INTERIOR),n>0&&(u=de.determineBoundary(e,n)),this.label.setLocation(t,u)},computeLabelSide:function(t,e){for(var n=this.iterator();n.hasNext();){var r=n.next();if(r.getLabel().isArea()){var s=r.getLabel().getLocation(t,e);if(s===f.INTERIOR)return this.label.setLocation(t,e,f.INTERIOR),null;s===f.EXTERIOR&&this.label.setLocation(t,e,f.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(t){this.computeLabelSide(t,$.LEFT),this.computeLabelSide(t,$.RIGHT)},updateIM:function(t){Te.updateIM(this.label,t)},computeLabel:function(t){for(var e=!1,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().isArea()&&(e=!0)}e?this.label=new zt(f.NONE,f.NONE,f.NONE):this.label=new zt(f.NONE);for(var s=0;2>s;s++)this.computeLabelOn(s,t),e&&this.computeLabelSides(s)},interfaces_:function(){return[]},getClass:function(){return ui}}),C(us,Kn),a(us.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}},insert:function(t){var e=this.edgeMap.get(t);e===null?(e=new ui(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return us}}),C(ls,ln),a(ls.prototype,{updateIMFromEdges:function(t){this.edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return ls}}),C(li,Jn),a(li.prototype,{createNode:function(t){return new ls(t,new us)},interfaces_:function(){return[]},getClass:function(){return li}}),a(hs.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},computeProperIntersectionIM:function(t,e){var n=this.arg[0].getGeometry().getDimension(),r=this.arg[1].getGeometry().getDimension(),s=t.hasProperIntersection(),o=t.hasProperInteriorIntersection();n===2&&r===2?s&&e.setAtLeast("212101212"):n===2&&r===1?(s&&e.setAtLeast("FFF0FFFF2"),o&&e.setAtLeast("1FFFFF1FF")):n===1&&r===2?(s&&e.setAtLeast("F0FFFFFF2"),o&&e.setAtLeast("1F1FFFFFF")):n===1&&r===1&&o&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var r=n.next();r.isIsolated()&&(this.labelIsolatedEdge(r,e,this.arg[e].getGeometry()),this.isolatedEdges.add(r))}},labelIsolatedEdge:function(t,e,n){if(n.getDimension()>0){var r=this.ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,r)}else t.getLabel().setAllLocations(e,f.EXTERIOR)},computeIM:function(){var t=new wt;if(t.set(f.EXTERIOR,f.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new as,r=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(r);var s=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(s),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),r=this.nodes.addNode(n.getCoordinate());r.setLabel(t,n.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),s=n.getEdgeIntersectionList().iterator();s.hasNext();){var o=s.next(),u=this.nodes.find(o.coord);u.getLabel().isNull(t)&&(r===f.BOUNDARY?u.setLabelBoundary(t):u.setLabel(t,f.INTERIOR))}},labelIsolatedNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n)},computeIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),s=n.getEdgeIntersectionList().iterator();s.hasNext();){var o=s.next(),u=this.nodes.addNode(o.coord);r===f.BOUNDARY?u.setLabelBoundary(t):u.getLabel().isNull(t)&&u.setLabel(t,f.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();T.isTrue(n.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}for(var r=this.nodes.iterator();r.hasNext();){var s=r.next();s.updateIM(t),s.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(f.INTERIOR,f.EXTERIOR,e.getDimension()),t.set(f.BOUNDARY,f.EXTERIOR,e.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(t.set(f.EXTERIOR,f.INTERIOR,n.getDimension()),t.set(f.EXTERIOR,f.BOUNDARY,n.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return hs}}),a(hi.prototype,{isContainedInBoundary:function(t){if(t instanceof Tt)return!1;if(t instanceof At)return this.isPointContainedInBoundary(t);if(t instanceof gt)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),n=new v,r=new v,s=0;s<e.size()-1;s++)if(e.getCoordinate(s,n),e.getCoordinate(s+1,r),!this.isLineSegmentContainedInBoundary(n,r))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof At){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof v){var e=arguments[0];return e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX()||e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()}},contains:function(t){return this.rectEnv.contains(t.getEnvelopeInternal())?!this.isContainedInBoundary(t):!1},interfaces_:function(){return[]},getClass:function(){return hi}}),hi.contains=function(t,e){var n=new hi(t);return n.contains(e)},a(vo.prototype,{intersects:function(t,e){var n=new D(t,e);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(t)||this.rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var r=t;t=e,e=r}var s=!1;return e.y>t.y&&(s=!0),s?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return vo}}),a(An.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof pt)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return An}}),a(Ir.prototype,{intersects:function(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new cs(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new gs(this.rectangle);if(n.applyTo(t),n.containsPoint())return!0;var r=new fs(this.rectangle);return r.applyTo(t),!!r.intersects()},interfaces_:function(){return[]},getClass:function(){return Ir}}),Ir.intersects=function(t,e){var n=new Ir(t);return n.intersects(e)},C(cs,An),a(cs.prototype,{isDone:function(){return this._intersects===!0},visit:function(t){var e=t.getEnvelopeInternal();return this.rectEnv.intersects(e)?this.rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this.rectEnv.getMinX()&&e.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this.rectEnv.getMinY()&&e.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return cs}}),C(gs,An),a(gs.prototype,{isDone:function(){return this._containsPoint===!0},visit:function(t){if(!(t instanceof Tt))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var n=new v,r=0;4>r;r++)if(this.rectSeq.getCoordinate(r,n),e.contains(n)&&Ce.containsPointInPolygon(n,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return gs}}),C(fs,An),a(fs.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return this.hasIntersection===!0},visit:function(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;var n=te.getLines(t);this.checkIntersectionWithLineStrings(n)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this.p0),e.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return fs}}),C(Et,Tn),a(Et.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return Et}}),Et.covers=function(t,e){return t.getEnvelopeInternal().covers(e.getEnvelopeInternal())?t.isRectangle()?!0:Et.relate(t,e).isCovers():!1},Et.intersects=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?t.isRectangle()?Ir.intersects(t,e):e.isRectangle()?Ir.intersects(e,t):Et.relate(t,e).isIntersects():!1},Et.touches=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?Et.relate(t,e).isTouches(t.getDimension(),e.getDimension()):!1},Et.within=function(t,e){return e.contains(t)},Et.coveredBy=function(t,e){return Et.covers(e,t)},Et.relate=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new Et(t,e),r=n.getIntersectionMatrix();return r}if(arguments.length===3){if(typeof arguments[2]=="string"&&arguments[0]instanceof Z&&arguments[1]instanceof Z){var s=arguments[0],o=arguments[1],u=arguments[2];return Et.relateWithCheck(s,o).matches(u)}if(K(arguments[2],ct)&&arguments[0]instanceof Z&&arguments[1]instanceof Z){var l=arguments[0],x=arguments[1],P=arguments[2],n=new Et(l,x,P),r=n.getIntersectionMatrix();return r}}},Et.overlaps=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?Et.relate(t,e).isOverlaps(t.getDimension(),e.getDimension()):!1},Et.disjoint=function(t,e){return!t.intersects(e)},Et.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Et.relate(t,e)},Et.crosses=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?Et.relate(t,e).isCrosses(t.getDimension(),e.getDimension()):!1},Et.contains=function(t,e){return t.getEnvelopeInternal().contains(e.getEnvelopeInternal())?t.isRectangle()?hi.contains(t,e):Et.relate(t,e).isContains():!1};var oh=Object.freeze({RelateOp:Et});a(Se.prototype,{extractElements:function(t,e){if(t===null)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this.skipEmpty&&r.isEmpty()||e.add(r)}},combine:function(){for(var t=new w,e=this.inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return t.size()===0?this.geomFactory!==null?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return Se}}),Se.combine=function(){if(arguments.length===1){var t=arguments[0],e=new Se(t);return e.combine()}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=new Se(Se.createList(n,r));return e.combine()}if(arguments.length===3){var s=arguments[0],o=arguments[1],u=arguments[2],e=new Se(Se.createList(s,o,u));return e.combine()}},Se.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},Se.createList=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new w;return n.add(t),n.add(e),n}if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2],n=new w;return n.add(r),n.add(s),n.add(o),n}},a(ci.prototype,{union:function(){for(var t=new Hn,e=new re,n=0;n<this.pointGeom.getNumGeometries();n++){var r=this.pointGeom.getGeometryN(n),s=r.getCoordinate(),o=t.locate(s,this.otherGeom);o===f.EXTERIOR&&e.add(s)}if(e.size()===0)return this.otherGeom;var u=null,l=ot.toCoordinateArray(e);return u=l.length===1?this.geomFact.createPoint(l[0]):this.geomFact.createMultiPointFromCoords(l),Se.combine(u,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return ci}}),ci.union=function(t,e){var n=new ci(t,e);return n.union()},a(Fn.prototype,{filter:function(t){this.sortIndex!==-1&&t.getSortIndex()!==this.sortIndex||this.comps.add(t)},interfaces_:function(){return[nn]},getClass:function(){return Fn}}),Fn.extract=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return Fn.extract(t,e,new w)}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];return n.getSortIndex()===r?s.add(n):n instanceof pt&&n.apply(new Fn(r,s)),s}},a(Me.prototype,{reduceToGeometries:function(t){for(var e=new w,n=t.iterator();n.hasNext();){var r=n.next(),s=null;K(r,N)?s=this.unionTree(r):r instanceof Z&&(s=r),e.add(s)}return e},extractByEnvelope:function(t,e,n){for(var r=new w,s=0;s<e.getNumGeometries();s++){var o=e.getGeometryN(s);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this.geomFactory.buildGeometry(r)},unionOptimized:function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r)){var s=Se.combine(t,e);return s}if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var o=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,o)},union:function(){if(this.inputPolys===null)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new Ft(Me.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this.inputPolys=null;var r=t.itemsTree(),s=this.unionTree(r);return s},binaryUnion:function(){if(arguments.length===1){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(arguments.length===3){var e=arguments[0],n=arguments[1],r=arguments[2];if(1>=r-n){var o=Me.getGeometry(e,n);return this.unionSafe(o,null)}if(r-n===2)return this.unionSafe(Me.getGeometry(e,n),Me.getGeometry(e,n+1));var s=Math.trunc((r+n)/2),o=this.binaryUnion(e,n,s),u=this.binaryUnion(e,s,r);return this.unionSafe(o,u)}},repeatedUnion:function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=e===null?r.copy():e.union(r)}return e},unionSafe:function(t,e){return t===null&&e===null?null:t===null?e.copy():e===null?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return Me.restrictToPolygons(t.union(e))},unionTree:function(t){var e=this.reduceToGeometries(t),n=this.binaryUnion(e);return n},unionUsingEnvelopeIntersection:function(t,e,n){var r=new w,s=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),u=this.unionActual(s,o);r.add(u);var l=Se.combine(r);return l},bufferUnion:function(){if(arguments.length===1){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),r=n.buffer(0);return r}if(arguments.length===2){var s=arguments[0],o=arguments[1],e=s.getFactory(),n=e.createGeometryCollection([s,o]),r=n.buffer(0);return r}},interfaces_:function(){return[]},getClass:function(){return Me}}),Me.restrictToPolygons=function(t){if(K(t,rn))return t;var e=tr.getPolygons(t);return e.size()===1?e.get(0):t.getFactory().createMultiPolygon(ft.toPolygonArray(e))},Me.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Me.union=function(t){var e=new Me(t);return e.union()},Me.STRTREE_NODE_CAPACITY=4,a(Gn.prototype,{unionNoOpt:function(t){var e=this.geomFact.createPoint();return Zt.overlayOp(t,e,it.UNION)},unionWithNull:function(t,e){return t===null&&e===null?null:e===null?t:t===null?e:t.union(e)},extract:function(){if(K(arguments[0],b))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.extract(n)}else if(arguments[0]instanceof Z){var r=arguments[0];this.geomFact===null&&(this.geomFact=r.getFactory()),Fn.extract(r,Z.SORTINDEX_POLYGON,this.polygons),Fn.extract(r,Z.SORTINDEX_LINESTRING,this.lines),Fn.extract(r,Z.SORTINDEX_POINT,this.points)}},union:function(){if(this.geomFact===null)return null;var e=null;if(this.points.size()>0){var n=this.geomFact.buildGeometry(this.points);e=this.unionNoOpt(n)}var r=null;if(this.lines.size()>0){var s=this.geomFact.buildGeometry(this.lines);r=this.unionNoOpt(s)}var o=null;this.polygons.size()>0&&(o=Me.union(this.polygons));var u=this.unionWithNull(r,o),l=null;return l=e===null?u:u===null?e:ci.union(e,u),l===null?this.geomFact.createGeometryCollection():l},interfaces_:function(){return[]},getClass:function(){return Gn}}),Gn.union=function(){if(arguments.length===1){if(K(arguments[0],b)){var t=arguments[0],e=new Gn(t);return e.union()}if(arguments[0]instanceof Z){var n=arguments[0],e=new Gn(n);return e.union()}}else if(arguments.length===2){var r=arguments[0],s=arguments[1],e=new Gn(r,s);return e.union()}};var ah=Object.freeze({UnaryUnionOp:Gn});a(gi.prototype,{visitInteriorRing:function(t,e){var n=t.getCoordinates(),r=n[0],s=gi.findDifferentPoint(n,r),o=e.findEdgeInSameDirection(r,s),u=e.findEdgeEnd(o),l=null;u.getLabel().getLocation(0,$.RIGHT)===f.INTERIOR?l=u:u.getSym().getLabel().getLocation(0,$.RIGHT)===f.INTERIOR&&(l=u.getSym()),T.isTrue(l!==null,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(l)},visitShellInteriors:function(t,e){if(t instanceof Tt){var n=t;this.visitInteriorRing(n.getExteriorRing(),e)}if(t instanceof Kt)for(var r=t,s=0;s<r.getNumGeometries();s++){var n=r.getGeometryN(s);this.visitInteriorRing(n.getExteriorRing(),e)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,$.RIGHT)===f.INTERIOR&&n.setInResult(!0)}},visitLinkedDirectedEdges:function(t){var e=t,n=t;do T.isTrue(n!==null,"found null Directed Edge"),n.setVisited(!0),n=n.getNext();while(n!==e)},buildEdgeRings:function(t){for(var e=new w,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getEdgeRing()===null){var s=new Yr(r,this.geometryFactory);s.linkDirectedEdgesForMinimalEdgeRings();var o=s.buildMinimalRings();e.addAll(o)}}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var r=n.getEdges(),s=r.get(0);if(s.getLabel().getLocation(0,$.RIGHT)===f.INTERIOR){for(var o=0;o<r.size();o++)if(s=r.get(o),!s.isVisited())return this.disconnectedRingcoord=s.getCoordinate(),!0}}}return!1},isInteriorsConnected:function(){var t=new w;this.geomGraph.computeSplitEdges(t);var e=new He(new mr);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)},interfaces_:function(){return[]},getClass:function(){return gi}}),gi.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null},a(Ke.prototype,{hasChildren:function(){for(var t=0;2>t;t++)if(this.subnode[t]!==null)return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;2>e;e++)this.subnode[e]!==null&&this.subnode[e].addAllItems(t);return t},size:function(){for(var t=0,e=0;2>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){return t===null||this.isSearchMatch(t)?(e.addAll(this.items),this.subnode[0]!==null&&this.subnode[0].addAllItemsFromOverlapping(t,e),void(this.subnode[1]!==null&&this.subnode[1].addAllItemsFromOverlapping(t,e))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,r=0;2>r;r++)if(this.subnode[r]!==null&&(n=this.subnode[r].remove(t,e))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n||(n=this.items.remove(e))},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;2>e;e++)if(this.subnode[e]!==null){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},nodeSize:function(){for(var t=0,e=0;2>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].nodeSize());return t+1},add:function(t){this.items.add(t)},interfaces_:function(){return[]},getClass:function(){return Ke}}),Ke.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},a(fn.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(arguments.length===1){var t=arguments[0];return this.overlaps(t.min,t.max)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return!(this.min>n||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(arguments.length===1){if(arguments[0]instanceof fn){var t=arguments[0];return this.contains(t.min,t.max)}if(typeof arguments[0]=="number"){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return n>=this.min&&r<=this.max}},init:function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return fn}}),a(fi.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(t){for(this.level=fi.computeLevel(t),this.interval=new fn,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},computeInterval:function(t,e){var n=Qn.powerOf2(t);this.pt=Math.floor(e.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return fi}}),fi.computeLevel=function(t){var e=t.getWidth(),n=Qn.exponent(e)+1;return n},C(Nn,Ke),a(Nn.prototype,{getInterval:function(){return this.interval},find:function(t){var e=Ke.getSubnodeIndex(t,this.centre);if(e===-1)return this;if(this.subnode[e]!==null){var n=this.subnode[e];return n.find(t)}return this},insert:function(t){T.isTrue(this.interval===null||this.interval.contains(t.interval));var e=Ke.getSubnodeIndex(t.interval,this.centre);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insert(t),this.subnode[e]=n}},isSearchMatch:function(t){return t.overlaps(this.interval)},getSubnode:function(t){return this.subnode[t]===null&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getNode:function(t){var e=Ke.getSubnodeIndex(t,this.centre);if(e!==-1){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0;switch(t){case 0:e=this.interval.getMin(),n=this.centre;break;case 1:e=this.centre,n=this.interval.getMax()}var r=new fn(e,n),s=new Nn(r,this.level-1);return s},interfaces_:function(){return[]},getClass:function(){return Nn}}),Nn.createNode=function(t){var e=new fi(t),n=new Nn(e.getInterval(),e.getLevel());return n},Nn.createExpanded=function(t,e){var n=new fn(e);t!==null&&n.expandToInclude(t.interval);var r=Nn.createNode(n);return t!==null&&r.insert(t),r},C(Nr,Ke),a(Nr.prototype,{insert:function(t,e){var n=Ke.getSubnodeIndex(t,Nr.origin);if(n===-1)return this.add(e),null;var r=this.subnode[n];if(r===null||!r.getInterval().contains(t)){var s=Nn.createExpanded(r,t);this.subnode[n]=s}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){T.isTrue(t.getInterval().contains(e));var r=Mn.isZeroWidth(e.getMin(),e.getMax()),s=null;s=r?t.find(e):t.getNode(e),s.add(n)},interfaces_:function(){return[]},getClass:function(){return Nr}}),Nr.origin=0,a(Cr.prototype,{size:function(){return this.root!==null?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=Cr.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];return this.query(new fn(t,t))}if(arguments[0]instanceof fn){var e=arguments[0],n=new w;return this.query(e,n),n}}else if(arguments.length===2){var r=arguments[0],s=arguments[1];this.root.addAllItemsFromOverlapping(r,s)}},iterator:function(){var t=new w;return this.root.addAllItems(t),t.iterator()},remove:function(t,e){var n=Cr.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e)},depth:function(){return this.root!==null?this.root.depth():0},nodeSize:function(){return this.root!==null?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return Cr}}),Cr.ensureExtent=function(t,e){var n=t.getMin(),r=t.getMax();return n!==r?t:(n===r&&(n-=e/2,r=n+e/2),new fn(n,r))},a(yo.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return yo}}),a(ds.prototype,{testLineSegment:function(t,e){var n=null,r=null,s=null,o=null,u=null,l=e.p0,x=e.p1;r=l.x-t.x,s=l.y-t.y,o=x.x-t.x,u=x.y-t.y,(s>0&&0>=u||u>0&&0>=s)&&(n=Un.signOfDet2x2(r,s,o,u)/(u-s),n>0&&this.crossings++)},buildIndex:function(){this.tree=new Cr;for(var t=ot.removeRepeatedPoints(this.ring.getCoordinates()),e=De.getChains(t),n=0;n<e.size();n++){var r=e.get(n),s=r.getEnvelope();this.interval.min=s.getMinY(),this.interval.max=s.getMaxY(),this.tree.insert(this.interval,r)}},testMonotoneChain:function(t,e,n){n.select(t,e)},isInside:function(t){this.crossings=0;var e=new D(c.NEGATIVE_INFINITY,c.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),r=new di(this,t),s=n.iterator();s.hasNext();){var o=s.next();this.testMonotoneChain(e,r,o)}return this.crossings%2===1},interfaces_:function(){return[yo]},getClass:function(){return ds}}),C(di,Dn),a(di.prototype,{select:function(){if(arguments.length!==1)return Dn.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return di}}),ds.MCSelecter=di,a(xo.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var r=n.next(),s=this.nodes.addNode(r.getCoordinate());s.setLabel(e,r.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=new as,n=e.computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(n)},computeIntersectionNodes:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var r=n.next(),s=r.getLabel().getLocation(e),o=r.getEdgeIntersectionList().iterator();o.hasNext();){var u=o.next(),l=this.nodes.addNode(u.coord);s===f.BOUNDARY?l.setLabelBoundary(e):l.getLabel().isNull(e)&&l.setLabel(e,f.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return xo}}),a(Eo.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next(),n=e.getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdgeEnds().size()>1)return this.invalidPoint=r.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return Eo}}),a(Io.prototype,{buildIndex:function(){this.index=new Ft;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),n=e.getCoordinates(),r=this.index.query(e.getEnvelopeInternal()),s=0;s<r.size();s++){var o=r.get(s),u=o.getCoordinates();if(e!==o&&e.getEnvelopeInternal().intersects(o.getEnvelopeInternal())){var l=_e.findPtNotNode(n,o,this.graph);if(l!==null){var x=et.isPointInRing(l,u);if(x)return this.nestedPt=l,!1}}}return!0},add:function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return Io}}),a(mt.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return mt.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var t="";return this.pt!==null&&(t=" at or near point "+this.pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return mt}}),mt.ERROR=0,mt.REPEATED_POINT=1,mt.HOLE_OUTSIDE_SHELL=2,mt.NESTED_HOLES=3,mt.DISCONNECTED_INTERIOR=4,mt.SELF_INTERSECTION=5,mt.RING_SELF_INTERSECTION=6,mt.NESTED_SHELLS=7,mt.DUPLICATE_RINGS=8,mt.TOO_FEW_POINTS=9,mt.INVALID_COORDINATE=10,mt.RING_NOT_CLOSED=11,mt.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],a(_e.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!_e.isValid(t[e]))return this.validErr=new mt(mt.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof Tt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getExteriorRing().getCoordinates()),this.validErr!==null)return null;for(var e=0;e<n.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(n.getInteriorRingN(e).getCoordinates()),this.validErr!==null)return null}},checkHolesNotNested:function(t,e){for(var n=new Io(e),r=0;r<t.getNumInteriorRing();r++){var s=t.getInteriorRingN(r);n.add(s)}var o=n.isNonNested();o||(this.validErr=new mt(mt.NESTED_HOLES,n.getNestedPoint()))},checkConsistentArea:function(t){var e=new Eo(t),n=e.isNodeConsistentArea();return n?void(e.hasDuplicateRings()&&(this.validErr=new mt(mt.DUPLICATE_RINGS,e.getInvalidPoint()))):(this.validErr=new mt(mt.SELF_INTERSECTION,e.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),this.validErr===null},checkShellInsideHole:function(t,e,n){var r=t.getCoordinates(),s=e.getCoordinates(),o=_e.findPtNotNode(r,e,n);if(o!==null){var u=et.isPointInRing(o,s);if(!u)return o}var l=_e.findPtNotNode(s,t,n);if(l!==null){var x=et.isPointInRing(l,r);return x?l:null}return T.shouldNeverReachHere("points in shell and hole appear to be equal"),null},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),this.validErr!==null)return null}},checkConnectedInteriors:function(t){var e=new gi(t);e.isInteriorsConnected()||(this.validErr=new mt(mt.DISCONNECTED_INTERIOR,e.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new re,n=!0,r=t.iterator();r.hasNext();){var s=r.next();if(n)n=!1;else{if(e.contains(s.coord))return this.validErr=new mt(mt.RING_SELF_INTERSECTION,s.coord),null;e.add(s.coord)}}},checkHolesInShell:function(t,e){for(var n=t.getExteriorRing(),r=new ds(n),s=0;s<t.getNumInteriorRing();s++){var o=t.getInteriorRingN(s),u=_e.findPtNotNode(o.getCoordinates(),n,e);if(u===null)return null;var l=!r.isInside(u);if(l)return this.validErr=new mt(mt.HOLE_OUTSIDE_SHELL,u),null}},checkTooFewPoints:function(t){return t.hasTooFewPoints()?(this.validErr=new mt(mt.TOO_FEW_POINTS,t.getInvalidPoint()),null):void 0},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof At){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof ce){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof qt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),this.validErr!==null||(this.checkClosedRing(n),this.validErr!==null))return null;var r=new de(0,n);if(this.checkTooFewPoints(r),this.validErr!==null)return null;var s=new Wt;r.computeSelfNodes(s,!0,!0),this.checkNoSelfIntersectingRings(r)}else if(arguments[0]instanceof gt){var o=arguments[0];if(this.checkInvalidCoordinates(o.getCoordinates()),this.validErr!==null)return null;var r=new de(0,o);this.checkTooFewPoints(r)}else if(arguments[0]instanceof Tt){var u=arguments[0];if(this.checkInvalidCoordinates(u),this.validErr!==null||(this.checkClosedRings(u),this.validErr!==null))return null;var r=new de(0,u);if(this.checkTooFewPoints(r),this.validErr!==null||(this.checkConsistentArea(r),this.validErr!==null)||!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(r),this.validErr!==null)||(this.checkHolesInShell(u,r),this.validErr!==null)||(this.checkHolesNotNested(u,r),this.validErr!==null))return null;this.checkConnectedInteriors(r)}else if(arguments[0]instanceof Kt){for(var l=arguments[0],x=0;x<l.getNumGeometries();x++){var P=l.getGeometryN(x);if(this.checkInvalidCoordinates(P),this.validErr!==null||(this.checkClosedRings(P),this.validErr!==null))return null}var r=new de(0,l);if(this.checkTooFewPoints(r),this.validErr!==null||(this.checkConsistentArea(r),this.validErr!==null)||!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(r),this.validErr!==null))return null;for(var x=0;x<l.getNumGeometries();x++){var P=l.getGeometryN(x);if(this.checkHolesInShell(P,r),this.validErr!==null)return null}for(var x=0;x<l.getNumGeometries();x++){var P=l.getGeometryN(x);if(this.checkHolesNotNested(P,r),this.validErr!==null)return null}if(this.checkShellsNotNested(l,r),this.validErr!==null)return null;this.checkConnectedInteriors(r)}else if(arguments[0]instanceof pt)for(var z=arguments[0],x=0;x<z.getNumGeometries();x++){var k=z.getGeometryN(x);if(this.checkValid(k),this.validErr!==null)return null}else if(arguments[0]instanceof Z){var j=arguments[0];if(this.validErr=null,j.isEmpty())return null;if(j instanceof At)this.checkValid(j);else if(j instanceof ce)this.checkValid(j);else if(j instanceof qt)this.checkValid(j);else if(j instanceof gt)this.checkValid(j);else if(j instanceof Tt)this.checkValid(j);else if(j instanceof Kt)this.checkValid(j);else{if(!(j instanceof pt))throw new UnsupportedOperationException(j.getClass().getName());this.checkValid(j)}}},setSelfTouchingRingFormingHoleValid:function(t){this.isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,n){var r=t.getCoordinates(),s=e.getExteriorRing(),o=s.getCoordinates(),u=_e.findPtNotNode(r,s,n);if(u===null)return null;var l=et.isPointInRing(u,o);if(!l)return null;if(e.getNumInteriorRing()<=0)return this.validErr=new mt(mt.NESTED_SHELLS,u),null;for(var x=null,P=0;P<e.getNumInteriorRing();P++){var z=e.getInteriorRingN(P);if(x=this.checkShellInsideHole(t,z,n),x===null)return null}this.validErr=new mt(mt.NESTED_SHELLS,x)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),this.validErr!==null)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),this.validErr!==null)return null},checkClosedRing:function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new mt(mt.RING_NOT_CLOSED,e)}},checkShellsNotNested:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var r=t.getGeometryN(n),s=r.getExteriorRing(),o=0;o<t.getNumGeometries();o++)if(n!==o){var u=t.getGeometryN(o);if(this.checkShellNotNested(s,u,e),this.validErr!==null)return null}},interfaces_:function(){return[]},getClass:function(){return _e}}),_e.findPtNotNode=function(t,e,n){for(var r=n.findEdge(e),s=r.getEdgeIntersectionList(),o=0;o<t.length;o++){var u=t[o];if(!s.isIntersection(u))return u}return null},_e.isValid=function(){if(arguments[0]instanceof Z){var t=arguments[0],e=new _e(t);return e.isValid()}if(arguments[0]instanceof v){var n=arguments[0];return c.isNaN(n.x)||c.isInfinite(n.x)||c.isNaN(n.y)?!1:!c.isInfinite(n.y)}};var uh=Object.freeze({IsValidOp:_e}),lh=Object.freeze({BoundaryOp:vn,IsSimpleOp:$r,buffer:eh,distance:nh,linemerge:rh,overlay:ih,polygonize:sh,relate:oh,union:ah,valid:uh});C(ps,Ee.CoordinateOperation),a(ps.prototype,{editCoordinates:function(t,e){if(t.length===0)return null;for(var n=new Array(t.length).fill(null),r=0;r<t.length;r++){var s=new v(t[r]);this.targetPM.makePrecise(s),n[r]=s}var o=new A(n,!1),u=o.toCoordinateArray(),l=0;e instanceof gt&&(l=2),e instanceof qt&&(l=4);var x=n;return this.removeCollapsed&&(x=null),u.length<l?x:u},interfaces_:function(){return[]},getClass:function(){return ps}}),a(nr.prototype,{fixPolygonalTopology:function(t){var e=t;this.changePrecisionModel||(e=this.changePM(t,this.targetPM));var n=e.buffer(0),r=n;return this.changePrecisionModel||(r=t.getFactory().createGeometry(n)),r},reducePointwise:function(t){var e=null;if(this.changePrecisionModel){var n=this.createFactory(t.getFactory(),this.targetPM);e=new Ee(n)}else e=new Ee;var r=this.removeCollapsed;t.getDimension()>=2&&(r=!0);var s=e.edit(t,new ps(this.targetPM,r));return s},changePM:function(t,e){var n=this.createEditor(t.getFactory(),e);return n.edit(t,new Ee.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this.removeCollapsed=t},createFactory:function(t,e){var n=new ft(e,t.getSRID(),t.getCoordinateSequenceFactory());return n},setChangePrecisionModel:function(t){this.changePrecisionModel=t},reduce:function(t){var e=this.reducePointwise(t);return this.isPointwise?e:K(e,rn)?e.isValid()?e:this.fixPolygonalTopology(e):e},setPointwise:function(t){this.isPointwise=t},createEditor:function(t,e){if(t.getPrecisionModel()===e)return new Ee;var n=this.createFactory(t,e),r=new Ee(n);return r},interfaces_:function(){return[]},getClass:function(){return nr}}),nr.reduce=function(t,e){var n=new nr(e);return n.reduce(t)},nr.reducePointwise=function(t,e){var n=new nr(e);return n.setPointwise(!0),n.reduce(t)};var hh=Object.freeze({GeometryPrecisionReducer:nr});a(pi.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var n=-1,r=t,s=t+1;e>s;s++){var o=this.seg.distance(this.pts[s]);o>n&&(n=o,r=s)}if(n<=this.distanceTolerance)for(var s=t+1;e>s;s++)this.usePt[s]=!1;else this.simplifySection(t,r),this.simplifySection(r,e)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var t=0;t<this.pts.length;t++)this.usePt[t]=!0;this.simplifySection(0,this.pts.length-1);for(var e=new A,t=0;t<this.pts.length;t++)this.usePt[t]&&e.add(new v(this.pts[t]));return e.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return pi}}),pi.simplify=function(t,e){var n=new pi(t);return n.setDistanceTolerance(e),n.simplify()},a(wr.prototype,{setEnsureValid:function(t){this.isEnsureValidTopology=t},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new mi(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(0>t)throw new h;this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return wr}}),wr.simplify=function(t,e){var n=new wr(t);return n.setDistanceTolerance(e),n.getResultGeometry()},C(mi,ae),a(mi.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;var n=ae.prototype.transformPolygon.call(this,t,e);return e instanceof Kt?n:this.createValidArea(n)},createValidArea:function(t){return this.isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),r=null;return r=n.length===0?new Array(0).fill(null):pi.simplify(n,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(r)},transformMultiPolygon:function(t,e){var n=ae.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformLinearRing:function(t,e){var n=e instanceof Tt,r=ae.prototype.transformLinearRing.call(this,t,e);return!n||r instanceof qt?r:null},interfaces_:function(){return[]},getClass:function(){return mi}}),wr.DPTransformer=mi,C(vi,lt),a(vi.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return vi}}),a(Cn.prototype,{addToResult:function(t){this.resultSegs.add(t)},asLineString:function(){return this.parentLine.getFactory().createLineString(Cn.extractCoordinates(this.resultSegs))},getResultSize:function(){var t=this.resultSegs.size();return t===0?0:t+1},getParent:function(){return this.parentLine},getSegment:function(t){return this.segs[t]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(Cn.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var t=this.parentLine.getCoordinates();this.segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var n=new vi(t[e],t[e+1],this.parentLine,e);this.segs[e]=n}},getResultCoordinates:function(){return Cn.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return Cn}}),Cn.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),n=null,r=0;r<t.size();r++)n=t.get(r),e[r]=n.p0;return e[e.length-1]=n.p1,e},a(Sr.prototype,{remove:function(t){this.index.remove(new D(t.p0,t.p1),t)},add:function(){if(arguments[0]instanceof Cn)for(var t=arguments[0],e=t.getSegments(),n=0;n<e.length;n++){var r=e[n];this.add(r)}else if(arguments[0]instanceof lt){var s=arguments[0];this.index.insert(new D(s.p0,s.p1),s)}},query:function(t){var e=new D(t.p0,t.p1),n=new No(t);this.index.query(e,n);var r=n.getItems();return r},interfaces_:function(){return[]},getClass:function(){return Sr}}),a(No.prototype,{visitItem:function(t){var e=t;D.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[wn]},getClass:function(){return No}}),a(yi.prototype,{flatten:function(t,e){var n=this.linePts[t],r=this.linePts[e],s=new lt(n,r);return this.remove(this.line,t,e),this.outputIndex.add(s),s},hasBadIntersection:function(t,e,n){return this.hasBadOutputIntersection(n)?!0:!!this.hasBadInputIntersection(t,e,n)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplifySection:function(t,e,n){n+=1;var r=new Array(2).fill(null);if(t+1===e){var s=this.line.getSegment(t);return this.line.addToResult(s),null}var o=!0;if(this.line.getResultSize()<this.line.getMinimumSize()){var u=n+1;u<this.line.getMinimumSize()&&(o=!1)}var l=new Array(1).fill(null),x=this.findFurthestPoint(this.linePts,t,e,l);l[0]>this.distanceTolerance&&(o=!1);var P=new lt;if(P.p0=this.linePts[t],P.p1=this.linePts[e],r[0]=t,r[1]=e,this.hasBadIntersection(this.line,r,P)&&(o=!1),o){var s=this.flatten(t,e);return this.line.addToResult(s),null}this.simplifySection(t,x,n),this.simplifySection(x,e,n)},hasBadOutputIntersection:function(t){for(var e=this.outputIndex.query(t),n=e.iterator();n.hasNext();){var r=n.next();if(this.hasInteriorIntersection(r,t))return!0}return!1},findFurthestPoint:function(t,e,n,r){var s=new lt;s.p0=t[e],s.p1=t[n];for(var o=-1,u=e,l=e+1;n>l;l++){var x=t[l],P=s.distance(x);P>o&&(o=P,u=l)}return r[0]=o,u},simplify:function(t){this.line=t,this.linePts=t.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(t,e,n){for(var r=e;n>r;r++){var s=t.getSegment(r);this.inputIndex.remove(s)}},hasInteriorIntersection:function(t,e){return this.li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,n){for(var r=this.inputIndex.query(n),s=r.iterator();s.hasNext();){var o=s.next();if(this.hasInteriorIntersection(o,n)){if(yi.isInLineSection(t,e,o))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return yi}}),yi.isInLineSection=function(t,e,n){if(n.getParent()!==t.getParent())return!1;var r=n.getIndex();return r>=e[0]&&r<e[1]},a(Co.prototype,{setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(t){for(var e=t.iterator();e.hasNext();)this.inputIndex.add(e.next());for(var e=t.iterator();e.hasNext();){var n=new yi(this.inputIndex,this.outputIndex);n.setDistanceTolerance(this.distanceTolerance),n.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return Co}}),a(rr.prototype,{getResultGeometry:function(){if(this.inputGeom.isEmpty())return this.inputGeom.copy();this.linestringMap=new sn,this.inputGeom.apply(new ms(this)),this.lineSimplifier.simplify(this.linestringMap.values());var t=new xi(this.linestringMap).transform(this.inputGeom);return t},setDistanceTolerance:function(t){if(0>t)throw new h;this.lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return rr}}),rr.simplify=function(t,e){var n=new rr(t);return n.setDistanceTolerance(e),n.getResultGeometry()},C(xi,ae),a(xi.prototype,{transformCoordinates:function(t,e){if(t.size()===0)return null;if(e instanceof gt){var n=this.linestringMap.get(e);return this.createCoordinateSequence(n.getResultCoordinates())}return ae.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return xi}}),a(ms.prototype,{filter:function(t){if(t instanceof gt){var e=t;if(e.isEmpty())return null;var n=e.isClosed()?4:2,r=new Cn(e,n);this.tps.linestringMap.put(e,r)}},interfaces_:function(){return[rt]},getClass:function(){return ms}}),rr.LineStringTransformer=xi,rr.LineStringMapBuilderFilter=ms;var ch=Object.freeze({DouglasPeuckerSimplifier:wr,TopologyPreservingSimplifier:rr});a(Lr.prototype,{splitAt:function(){if(arguments.length===1){var t=arguments[0],e=this.minimumLen/this.segLen;if(t.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(e),null;if(t.distance(this.seg.p1)<this.minimumLen)return this.splitPt=Lr.pointAlongReverse(this.seg,e),null;this.splitPt=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1],s=this.getConstrainedLength(n),o=s/this.segLen;r.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(o):this.splitPt=Lr.pointAlongReverse(this.seg,o)}},setMinimumLength:function(t){this.minimumLen=t},getConstrainedLength:function(t){return t<this.minimumLen?this.minimumLen:t},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return Lr}}),Lr.pointAlongReverse=function(t,e){var n=new v;return n.x=t.p1.x-e*(t.p1.x-t.p0.x),n.y=t.p1.y-e*(t.p1.y-t.p0.y),n},a(wo.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return wo}}),a(Ei.prototype,{findSplitPoint:function(t,e){var n=t.getLineSegment(),r=n.getLength(),s=r/2,o=new Lr(n),u=Ei.projectedSplitPoint(t,e),l=2*u.distance(e)*.8,x=l;return x>s&&(x=s),o.setMinimumLength(x),o.splitAt(u),o.getSplitPoint()},interfaces_:function(){return[wo]},getClass:function(){return Ei}}),Ei.projectedSplitPoint=function(t,e){var n=t.getLineSegment(),r=n.project(e);return r},a(Dt.prototype,{interfaces_:function(){return[]},getClass:function(){return Dt}}),Dt.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},Dt.isInCircleDDNormalized=function(t,e,n,r){var s=I.valueOf(t.x).selfSubtract(r.x),o=I.valueOf(t.y).selfSubtract(r.y),u=I.valueOf(e.x).selfSubtract(r.x),l=I.valueOf(e.y).selfSubtract(r.y),x=I.valueOf(n.x).selfSubtract(r.x),P=I.valueOf(n.y).selfSubtract(r.y),z=s.multiply(l).selfSubtract(u.multiply(o)),k=u.multiply(P).selfSubtract(x.multiply(l)),j=x.multiply(o).selfSubtract(s.multiply(P)),nt=s.multiply(s).selfAdd(o.multiply(o)),at=u.multiply(u).selfAdd(l.multiply(l)),ut=x.multiply(x).selfAdd(P.multiply(P)),bt=nt.selfMultiply(k).selfAdd(at.selfMultiply(j)).selfAdd(ut.selfMultiply(z)),kt=bt.doubleValue()>0;return kt},Dt.checkRobustInCircle=function(t,e,n,r){var s=Dt.isInCircleNonRobust(t,e,n,r),o=Dt.isInCircleDDSlow(t,e,n,r),u=Dt.isInCircleCC(t,e,n,r),l=_t.circumcentre(t,e,n);W.out.println("p radius diff a = "+Math.abs(r.distance(l)-t.distance(l))/t.distance(l)),s===o&&s===u||(W.out.println("inCircle robustness failure (double result = "+s+", DD result = "+o+", CC result = "+u+")"),W.out.println($t.toLineString(new Ie([t,e,n,r]))),W.out.println("Circumcentre = "+$t.toPoint(l)+" radius = "+t.distance(l)),W.out.println("p radius diff a = "+Math.abs(r.distance(l)/t.distance(l)-1)),W.out.println("p radius diff b = "+Math.abs(r.distance(l)/e.distance(l)-1)),W.out.println("p radius diff c = "+Math.abs(r.distance(l)/n.distance(l)-1)),W.out.println())},Dt.isInCircleDDFast=function(t,e,n,r){var s=I.sqr(t.x).selfAdd(I.sqr(t.y)).selfMultiply(Dt.triAreaDDFast(e,n,r)),o=I.sqr(e.x).selfAdd(I.sqr(e.y)).selfMultiply(Dt.triAreaDDFast(t,n,r)),u=I.sqr(n.x).selfAdd(I.sqr(n.y)).selfMultiply(Dt.triAreaDDFast(t,e,r)),l=I.sqr(r.x).selfAdd(I.sqr(r.y)).selfMultiply(Dt.triAreaDDFast(t,e,n)),x=s.selfSubtract(o).selfAdd(u).selfSubtract(l),P=x.doubleValue()>0;return P},Dt.isInCircleCC=function(t,e,n,r){var s=_t.circumcentre(t,e,n),o=t.distance(s),u=r.distance(s)-o;return 0>=u},Dt.isInCircleNormalized=function(t,e,n,r){var s=t.x-r.x,o=t.y-r.y,u=e.x-r.x,l=e.y-r.y,x=n.x-r.x,P=n.y-r.y,z=s*l-u*o,k=u*P-x*l,j=x*o-s*P,nt=s*s+o*o,at=u*u+l*l,ut=x*x+P*P,bt=nt*k+at*j+ut*z;return bt>0},Dt.isInCircleDDSlow=function(t,e,n,r){var s=I.valueOf(r.x),o=I.valueOf(r.y),u=I.valueOf(t.x),l=I.valueOf(t.y),x=I.valueOf(e.x),P=I.valueOf(e.y),z=I.valueOf(n.x),k=I.valueOf(n.y),j=u.multiply(u).add(l.multiply(l)).multiply(Dt.triAreaDDSlow(x,P,z,k,s,o)),nt=x.multiply(x).add(P.multiply(P)).multiply(Dt.triAreaDDSlow(u,l,z,k,s,o)),at=z.multiply(z).add(k.multiply(k)).multiply(Dt.triAreaDDSlow(u,l,x,P,s,o)),ut=s.multiply(s).add(o.multiply(o)).multiply(Dt.triAreaDDSlow(u,l,x,P,z,k)),bt=j.subtract(nt).add(at).subtract(ut),kt=bt.doubleValue()>0;return kt},Dt.isInCircleNonRobust=function(t,e,n,r){var s=(t.x*t.x+t.y*t.y)*Dt.triArea(e,n,r)-(e.x*e.x+e.y*e.y)*Dt.triArea(t,n,r)+(n.x*n.x+n.y*n.y)*Dt.triArea(t,e,r)-(r.x*r.x+r.y*r.y)*Dt.triArea(t,e,n)>0;return s},Dt.isInCircleRobust=function(t,e,n,r){return Dt.isInCircleNormalized(t,e,n,r)},Dt.triAreaDDSlow=function(t,e,n,r,s,o){return n.subtract(t).multiply(o.subtract(e)).subtract(r.subtract(e).multiply(s.subtract(t)))},Dt.triAreaDDFast=function(t,e,n){var r=I.valueOf(e.x).selfSubtract(t.x).selfMultiply(I.valueOf(n.y).selfSubtract(t.y)),s=I.valueOf(e.y).selfSubtract(t.y).selfMultiply(I.valueOf(n.x).selfSubtract(t.x));return r.selfSubtract(s)},a(St.prototype,{circleCenter:function(t,e){var n=new St(this.getX(),this.getY()),r=this.bisector(n,t),s=this.bisector(t,e),o=new J(r,s),u=null;try{u=new St(o.getX(),o.getY())}catch(l){if(!(l instanceof G))throw l;W.err.println("a: "+n+"  b: "+t+"  c: "+e),W.err.println(l)}finally{}return u},dot:function(t){return this.p.x*t.getX()+this.p.y*t.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(t,e){var n=e.getX()-t.getX(),r=e.getY()-t.getY(),s=new J(t.getX()+n/2,t.getY()+r/2,1),o=new J(t.getX()-r+n/2,t.getY()+n+r/2,1);return new J(s,o)},equals:function(){if(arguments.length===1){var t=arguments[0];return this.p.x===t.getX()&&this.p.y===t.getY()}if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.p.distance(e.getCoordinate())<n}},getCoordinate:function(){return this.p},isInCircle:function(t,e,n){return Dt.isInCircleRobust(t.p,e.p,n.p,this.p)},interpolateZValue:function(t,e,n){var r=t.getX(),s=t.getY(),o=e.getX()-r,u=n.getX()-r,l=e.getY()-s,x=n.getY()-s,P=o*x-u*l,z=this.getX()-r,k=this.getY()-s,j=(x*z-u*k)/P,nt=(-l*z+o*k)/P,at=t.getZ()+j*(e.getZ()-t.getZ())+nt*(n.getZ()-t.getZ());return at},midPoint:function(t){var e=(this.p.x+t.getX())/2,n=(this.p.y+t.getY())/2,r=(this.p.z+t.getZ())/2;return new St(e,n,r)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)>0},getX:function(){return this.p.x},crossProduct:function(t){return this.p.x*t.getY()-this.p.y*t.getX()},setZ:function(t){this.p.z=t},times:function(t){return new St(t*this.p.x,t*this.p.y)},cross:function(){return new St(this.p.y,-this.p.x)},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(t){return new St(this.p.x-t.getX(),this.p.y-t.getY())},getY:function(){return this.p.y},classify:function(t,e){var n=this,r=e.sub(t),s=n.sub(t),o=r.crossProduct(s);return o>0?St.LEFT:0>o?St.RIGHT:r.getX()*s.getX()<0||r.getY()*s.getY()<0?St.BEHIND:r.magn()<s.magn()?St.BEYOND:t.equals(n)?St.ORIGIN:e.equals(n)?St.DESTINATION:St.BETWEEN},sum:function(t){return new St(this.p.x+t.getX(),this.p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var n=this.circleCenter(t,e),r=this.distance(n,t),s=this.distance(this,t),o=this.distance(t,e);return s>o&&(s=o),o=this.distance(e,this),s>o&&(s=o),r/s},interfaces_:function(){return[]},getClass:function(){return St}}),St.interpolateZ=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2],r=e.distance(n),s=t.distance(e),o=n.z-e.z,u=e.z+o*(s/r);return u}if(arguments.length===4){var l=arguments[0],x=arguments[1],P=arguments[2],z=arguments[3],k=x.x,j=x.y,nt=P.x-k,at=z.x-k,ut=P.y-j,bt=z.y-j,kt=nt*bt-at*ut,Ve=l.x-k,or=l.y-j,Rs=(bt*Ve-at*or)/kt,Ts=(-ut*Ve+nt*or)/kt,Ps=x.z+Rs*(P.z-x.z)+Ts*(z.z-x.z);return Ps}},St.LEFT=0,St.RIGHT=1,St.BEYOND=2,St.BEHIND=3,St.BETWEEN=4,St.ORIGIN=5,St.DESTINATION=6,C(qn,St),a(qn.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=t.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this.constraint=t},interfaces_:function(){return[]},getClass:function(){return qn}}),a(Gt.prototype,{equalsNonOriented:function(t){return this.equalsOriented(t)?!0:!!this.equalsOriented(t.sym())},toLineSegment:function(){return new lt(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this.vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this.data=t},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var t=this.vertex.getCoordinate(),e=this.dest().getCoordinate();return $t.toLineString(t,e)},isLive:function(){return this._rot!==null},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this.next=t},interfaces_:function(){return[]},getClass:function(){return Gt}}),Gt.makeEdge=function(t,e){var n=new Gt,r=new Gt,s=new Gt,o=new Gt;n._rot=r,r._rot=s,s._rot=o,o._rot=n,n.setNext(n),r.setNext(o),s.setNext(s),o.setNext(r);var u=n;return u.setOrig(t),u.setDest(e),u},Gt.swap=function(t){var e=t.oPrev(),n=t.sym().oPrev();Gt.splice(t,e),Gt.splice(t.sym(),n),Gt.splice(t,e.lNext()),Gt.splice(t.sym(),n.lNext()),t.setOrig(e.dest()),t.setDest(n.dest())},Gt.splice=function(t,e){var n=t.oNext().rot(),r=e.oNext().rot(),s=e.oNext(),o=t.oNext(),u=r.oNext(),l=n.oNext();t.setNext(s),e.setNext(o),n.setNext(u),r.setNext(l)},Gt.connect=function(t,e){var n=Gt.makeEdge(t.dest(),e.orig());return Gt.splice(n,t.lNext()),Gt.splice(n.sym(),e),n},a(Ii.prototype,{insertSite:function(t){var e=this.subdiv.locate(t);if(this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete(e.oNext()));var n=this.subdiv.makeEdge(e.orig(),t);Gt.splice(n,e);var r=n;do n=this.subdiv.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!==r);for(;;){var s=e.oPrev();if(s.dest().rightOf(e)&&t.isInCircle(e.orig(),s.dest(),e.dest()))Gt.swap(e),e=e.oPrev();else{if(e.oNext()===r)return n;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},interfaces_:function(){return[]},getClass:function(){return Ii}}),a(So.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return So}}),a(vs.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e,e},findEdge:function(){var t=this.subdiv.getEdges();return t.iterator().next()},interfaces_:function(){return[So]},getClass:function(){return vs}}),C(Rr,L),a(Rr.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return Rr}}),Rr.msgWithSpatial=function(t,e){return e!==null?t+" [ "+e+" ]":t},a(Tr.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Tr}}),a(Le.prototype,{getTriangleVertices:function(t){var e=new Es;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return t.equals(this.frameVertex[0])||t.equals(this.frameVertex[1])?!0:!!t.equals(this.frameVertex[2])},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},connect:function(t,e){var n=Gt.connect(t,e);return this.quadEdges.add(n),n},getVoronoiCellPolygon:function(t,e){var n=new w,r=t;do{var s=t.rot().orig().getCoordinate();n.add(s),t=t.oPrev()}while(t!==r);var o=new A;o.addAll(n,!1),o.closeRing(),o.size()<4&&(W.out.println(o),o.add(o.get(o.size()-1),!0));var u=o.toCoordinateArray(),l=e.createPolygon(e.createLinearRing(u),null),x=r.orig();return l.setUserData(x.getCoordinate()),l},setLocator:function(t){this.locator=t},initSubdiv:function(){var t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);Gt.splice(t.sym(),e);var n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return Gt.splice(e.sym(),n),Gt.splice(n.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);Le.getTriangleEdges(t,e);var n=new Array(3).fill(null);Le.getTriangleEdges(t.sym(),n);var r=t.lNext().dest();if(this.isFrameVertex(r))return!0;var s=t.sym().lNext().dest();return!!this.isFrameVertex(s)},makeEdge:function(t,e){var n=Gt.makeEdge(t,e);return this.quadEdges.add(n),n},visitTriangles:function(t,e){this.visitedKey++;var n=new ie;n.push(this.startingEdge);for(var r=new Jt;!n.empty();){var s=n.pop();if(!r.contains(s)){var o=this.fetchTriangleToVisit(s,n,e,r);o!==null&&t.visit(o)}}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate());var n=this.seg.distance(e);return n<this.edgeCoincidenceTolerance},getEnvelope:function(){return new D(this.frameEnv)},createFrame:function(t){var e=t.getWidth(),n=t.getHeight(),r=0;r=e>n?10*e:10*n,this.frameVertex[0]=new St((t.getMaxX()+t.getMinX())/2,t.getMaxY()+r),this.frameVertex[1]=new St(t.getMinX()-r,t.getMinY()-r),this.frameVertex[2]=new St(t.getMaxX()+r,t.getMinY()-r),this.frameEnv=new D(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new Is;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new Jt,n=this.quadEdges.iterator();n.hasNext();){var r=n.next(),s=r.orig();!t&&this.isFrameVertex(s)||e.add(s);var o=r.dest();!t&&this.isFrameVertex(o)||e.add(o)}return e},fetchTriangleToVisit:function(t,e,n,r){var s=t,o=0,u=!1;do{this.triEdges[o]=s,this.isFrameEdge(s)&&(u=!0);var l=s.sym();r.contains(l)||e.push(l),r.add(s),o++,s=s.lNext()}while(s!==t);return u&&!n?null:this.triEdges},getEdges:function(){if(arguments.length===0)return this.quadEdges;if(arguments.length===1){for(var t=arguments[0],e=this.getPrimaryEdges(!1),n=new Array(e.size()).fill(null),r=0,s=e.iterator();s.hasNext();){var o=s.next();n[r++]=t.createLineString([o.orig().getCoordinate(),o.dest().getCoordinate()])}return t.createMultiLineString(n)}},getVertexUniqueEdges:function(t){for(var e=new w,n=new Jt,r=this.quadEdges.iterator();r.hasNext();){var s=r.next(),o=s.orig();n.contains(o)||(n.add(o),!t&&this.isFrameVertex(o)||e.add(s));var u=s.sym(),l=u.orig();n.contains(l)||(n.add(l),!t&&this.isFrameVertex(l)||e.add(u))}return e},getTriangleEdges:function(t){var e=new xs;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this.visitedKey++;var e=new w,n=new ie;n.push(this.startingEdge);for(var r=new Jt;!n.empty();){var s=n.pop();if(!r.contains(s)){var o=s.getPrimary();!t&&this.isFrameEdge(o)||e.add(o),n.push(s.oNext()),n.push(s.sym().oNext()),r.add(s),r.add(s.sym())}}return e},delete:function(t){Gt.splice(t,t.oPrev()),Gt.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),r=t.rot().sym();this.quadEdges.remove(t),this.quadEdges.remove(e),this.quadEdges.remove(n),this.quadEdges.remove(r),t.delete(),e.delete(),n.delete(),r.delete()},locateFromEdge:function(t,e){for(var n=0,r=this.quadEdges.size(),s=e;;){if(n++,n>r)throw new Rr(s.toLineSegment());if(t.equals(s.orig())||t.equals(s.dest()))break;if(t.rightOf(s))s=s.sym();else if(t.rightOf(s.oNext())){if(t.rightOf(s.dPrev()))break;s=s.dPrev()}else s=s.oNext()}return s},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new ys,!0);for(var e=new w,n=this.getVertexUniqueEdges(!1),r=n.iterator();r.hasNext();){var s=r.next();e.add(this.getVoronoiCellPolygon(s,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(ft.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),n=new Array(e.size()).fill(null),r=0,s=e.iterator();s.hasNext();){var o=s.next();n[r++]=t.createPolygon(t.createLinearRing(o),null)}return t.createGeometryCollection(n)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;var n=this.makeEdge(e.orig(),t);Gt.splice(n,e);var r=n;do n=this.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!==r);return r},locate:function(){if(arguments.length===1){if(arguments[0]instanceof St){var t=arguments[0];return this.locator.locate(t)}if(arguments[0]instanceof v){var e=arguments[0];return this.locator.locate(new St(e))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],s=this.locator.locate(new St(n));if(s===null)return null;var o=s;s.dest().getCoordinate().equals2D(n)&&(o=s.sym());var u=o;do{if(u.dest().getCoordinate().equals2D(r))return u;u=u.oNext()}while(u!==o);return null}},interfaces_:function(){return[]},getClass:function(){return Le}}),Le.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new h},a(ys.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),r=t[2].orig().getCoordinate(),s=_t.circumcentre(e,n,r),o=new St(s),u=0;3>u;u++)t[u].rot().setOrig(o)},interfaces_:function(){return[Tr]},getClass:function(){return ys}}),a(xs.prototype,{getTriangleEdges:function(){return this.triList},visit:function(t){this.triList.add(t.clone())},interfaces_:function(){return[Tr]},getClass:function(){return xs}}),a(Es.prototype,{visit:function(t){this.triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[Tr]},getClass:function(){return Es}}),a(Is.prototype,{checkTriangleSize:function(t){t.length>=2?$t.toLineString(t[0],t[1]):t.length>=1&&$t.toPoint(t[0])},visit:function(t){this.coordList.clear();for(var e=0;3>e;e++){var n=t[e].orig();this.coordList.add(n.getCoordinate())}if(this.coordList.size()>0){this.coordList.closeRing();var r=this.coordList.toCoordinateArray();if(r.length!==4)return null;this.triCoords.add(r)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[Tr]},getClass:function(){return Is}}),Le.TriangleCircumcentreVisitor=ys,Le.TriangleEdgesListVisitor=xs,Le.TriangleVertexListVisitor=Es,Le.TriangleCoordinatesVisitor=Is,Le.EDGE_COINCIDENCE_TOL_FACTOR=1e3,a(ir.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){var t=this.ls.getCoordinate(1);return t.z},getStartZ:function(){var t=this.ls.getCoordinate(0);return t.z},intersection:function(t){return this.ls.intersection(t.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){var t=this.ls.getCoordinate(1);return t.y},getStartX:function(){var t=this.ls.getCoordinate(0);return t.x},equalsTopo:function(t){return this.ls.equalsTopo(t.getLineSegment())},getStartY:function(){var t=this.ls.getCoordinate(0);return t.y},setData:function(t){this.data=t},getData:function(){return this.data},getEndX:function(){var t=this.ls.getCoordinate(1);return t.x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return ir}}),a(Ni.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Ni}}),a(Ns.prototype,{isRepeated:function(){return this.count>1},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(t){this.left=t},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(t){this.right=t},interfaces_:function(){return[]},getClass:function(){return Ns}}),a(sr.prototype,{insert:function(){if(arguments.length===1){var t=arguments[0];return this.insert(t,null)}if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this.root===null)return this.root=new Ns(e,n),this.root;if(this.tolerance>0){var r=this.findBestMatchNode(e);if(r!==null)return r.increment(),r}return this.insertExact(e,n)}},query:function(){var t=arguments,e=this;if(arguments.length===1){var n=arguments[0],r=new w;return this.query(n,r),r}if(arguments.length===2){if(arguments[0]instanceof D&&K(arguments[1],N))(function(){var u=t[0],l=t[1];e.queryNode(e.root,u,!0,{interfaces_:function(){return[Ni]},visit:function(x){l.add(x)}})})();else if(arguments[0]instanceof D&&K(arguments[1],Ni)){var s=arguments[0],o=arguments[1];this.queryNode(this.root,s,!0,o)}}},queryNode:function(t,e,n,r){if(t===null)return null;var s=null,o=null,u=null;n?(s=e.getMinX(),o=e.getMaxX(),u=t.getX()):(s=e.getMinY(),o=e.getMaxY(),u=t.getY());var l=u>s,x=o>=u;l&&this.queryNode(t.getLeft(),e,!n,r),e.contains(t.getCoordinate())&&r.visit(t),x&&this.queryNode(t.getRight(),e,!n,r)},findBestMatchNode:function(t){var e=new Cs(t,this.tolerance);return this.query(e.queryEnvelope(),e),e.getNode()},isEmpty:function(){return this.root===null},insertExact:function(t,e){for(var n=this.root,r=this.root,s=!0,o=!0;n!==null;){if(n!==null){var u=t.distance(n.getCoordinate())<=this.tolerance;if(u)return n.increment(),n}o=s?t.x<n.getX():t.y<n.getY(),r=n,n=o?n.getLeft():n.getRight(),s=!s}this.numberOfNodes=this.numberOfNodes+1;var l=new Ns(t,e);return o?r.setLeft(l):r.setRight(l),l},interfaces_:function(){return[]},getClass:function(){return sr}}),sr.toCoordinates=function(){if(arguments.length===1){var t=arguments[0];return sr.toCoordinates(t,!1)}if(arguments.length===2){for(var e=arguments[0],n=arguments[1],r=new A,s=e.iterator();s.hasNext();)for(var o=s.next(),u=n?o.getCount():1,l=0;u>l;l++)r.add(o.getCoordinate(),!0);return r.toCoordinateArray()}},a(Cs.prototype,{visit:function(t){var e=this.p.distance(t.getCoordinate()),n=e<=this.tolerance;if(!n)return null;var r=!1;(this.matchNode===null||e<this.matchDist||this.matchNode!==null&&e===this.matchDist&&t.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(r=!0),r&&(this.matchNode=t,this.matchDist=e)},queryEnvelope:function(){var t=new D(this.p);return t.expandBy(this.tolerance),t},getNode:function(){return this.matchNode},interfaces_:function(){return[Ni]},getClass:function(){return Cs}}),sr.BestMatchVisitor=Cs,a(Bn.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();var t=0,e=0;do e=this.enforceGabriel(this.segments),t++;while(e>0&&t<Bn.MAX_SPLIT_ITER)},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var t=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),e=0,n=this.initialVertices.iterator();n.hasNext();){var r=n.next();t[e++]=r.getCoordinate()}for(var s=this.segVertices.iterator();s.hasNext();){var r=s.next();t[e++]=r.getCoordinate()}return t},setConstraints:function(t,e){this.segments=t,this.segVertices=e},computeConvexHull:function(){var t=new ft,e=this.getPointArray(),n=new an(e,t);this.convexHull=n.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),n=t.getEnd(),r=new v((e.x+n.x)/2,(e.y+n.y)/2),s=e.distance(r),o=new D(r);o.expandBy(s);for(var u=this.kdt.query(o),l=null,x=c.MAX_VALUE,P=u.iterator();P.hasNext();){var z=P.next(),k=z.getCoordinate();if(!k.equals2D(e)&&!k.equals2D(n)){var j=r.distance(k);if(s>j){var nt=j;(l===null||x>nt)&&(l=k,x=nt)}}}return l},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(t){this.splitFinder=t},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(t){for(var e=new w,n=0,r=new w,s=t.iterator();s.hasNext();){var o=s.next(),u=this.findNonGabrielPoint(o);if(u!==null){this.splitPt=this.splitFinder.findSplitPoint(o,u);var l=this.createVertex(this.splitPt,o),x=(this.insertSite(l),new ir(o.getStartX(),o.getStartY(),o.getStartZ(),l.getX(),l.getY(),l.getZ(),o.getData())),P=new ir(l.getX(),l.getY(),l.getZ(),o.getEndX(),o.getEndY(),o.getEndZ(),o.getData());e.add(x),e.add(P),r.add(o),n+=1}}return t.removeAll(r),t.addAll(e),n},createVertex:function(){if(arguments.length===1){var t=arguments[0],e=null;return e=this.vertexFactory!==null?this.vertexFactory.createVertex(t,null):new qn(t)}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=null;return e=this.vertexFactory!==null?this.vertexFactory.createVertex(n,r):new qn(n),e.setOnConstraint(!0),e}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var t=Bn.computeVertexEnvelope(this.initialVertices),e=Bn.computeVertexEnvelope(this.segVertices),n=new D(t);n.expandToInclude(e);var r=.2*n.getWidth(),s=.2*n.getHeight(),o=Math.max(r,s);this.computeAreaEnv=new D(n),this.computeAreaEnv.expandBy(o)},setVertexFactory:function(t){this.vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new Le(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new vs(this.subdiv)),this.incDel=new Ii(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof qn){var t=arguments[0],e=this.kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var n=e.getData();return n.merge(t),n}return this.incDel.insertSite(t),t}if(arguments[0]instanceof v){var r=arguments[0];this.insertSite(this.createVertex(r))}},interfaces_:function(){return[]},getClass:function(){return Bn}}),Bn.computeVertexEnvelope=function(t){for(var e=new D,n=t.iterator();n.hasNext();){var r=n.next();e.expandToInclude(r.getCoordinate())}return e},Bn.MAX_SPLIT_ITER=99,a(ne.prototype,{create:function(){if(this.subdiv!==null)return null;var t=ne.envelope(this.siteCoords),e=ne.toVertices(this.siteCoords);this.subdiv=new Le(t,this.tolerance);var n=new Ii(this.subdiv);n.insertSites(e)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof Z){var t=arguments[0];this.siteCoords=ne.extractUniqueCoordinates(t)}else if(K(arguments[0],b)){var e=arguments[0];this.siteCoords=ne.unique(ot.toCoordinateArray(e))}},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return ne}}),ne.extractUniqueCoordinates=function(t){if(t===null)return new A;var e=t.getCoordinates();return ne.unique(e)},ne.envelope=function(t){for(var e=new D,n=t.iterator();n.hasNext();){var r=n.next();e.expandToInclude(r)}return e},ne.unique=function(t){var e=ot.copyDeep(t);en.sort(e);var n=new A(e,!1);return n},ne.toVertices=function(t){for(var e=new w,n=t.iterator();n.hasNext();){var r=n.next();e.add(new St(r))}return e},a(Pr.prototype,{createSiteVertices:function(t){for(var e=new w,n=t.iterator();n.hasNext();){var r=n.next();this.constraintVertexMap.containsKey(r)||e.add(new qn(r))}return e},create:function(){if(this.subdiv!==null)return null;var t=ne.envelope(this.siteCoords),e=new w;this.constraintLines!==null&&(t.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),e=Pr.createConstraintSegments(this.constraintLines));var n=this.createSiteVertices(this.siteCoords),r=new Bn(n,this.tolerance);r.setConstraints(e,new w(this.constraintVertexMap.values())),r.formInitialDelaunay(),r.enforceConstraints(),this.subdiv=r.getSubdivision()},setTolerance:function(t){this.tolerance=t},setConstraints:function(t){this.constraintLines=t},setSites:function(t){this.siteCoords=ne.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),n=0;n<e.length;n++){var r=new qn(e[n]);this.constraintVertexMap.put(e[n],r)}},interfaces_:function(){return[]},getClass:function(){return Pr}}),Pr.createConstraintSegments=function(){if(arguments.length===1){for(var t=arguments[0],e=te.getLines(t),n=new w,r=e.iterator();r.hasNext();){var s=r.next();Pr.createConstraintSegments(s,n)}return n}if(arguments.length===2)for(var o=arguments[0],u=arguments[1],l=o.getCoordinates(),r=1;r<l.length;r++)u.add(new ir(l[r-1],l[r]))},a(Ci.prototype,{create:function(){if(this.subdiv!==null)return null;var t=ne.envelope(this.siteCoords);this.diagramEnv=t;var e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(e),this.clipEnv!==null&&this.diagramEnv.expandToInclude(this.clipEnv);var n=ne.toVertices(this.siteCoords);this.subdiv=new Le(t,this.tolerance);var r=new Ii(this.subdiv);r.insertSites(n)},getDiagram:function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return Ci.clipGeometryCollection(e,this.diagramEnv)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof Z){var t=arguments[0];this.siteCoords=ne.extractUniqueCoordinates(t)}else if(K(arguments[0],b)){var e=arguments[0];this.siteCoords=ne.unique(ot.toCoordinateArray(e))}},setClipEnvelope:function(t){this.clipEnv=t},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return Ci}}),Ci.clipGeometryCollection=function(t,e){for(var n=t.getFactory().toGeometry(e),r=new w,s=0;s<t.getNumGeometries();s++){var o=t.getGeometryN(s),u=null;e.contains(o.getEnvelopeInternal())?u=o:e.intersects(o.getEnvelopeInternal())&&(u=n.intersection(o),u.setUserData(o.getUserData())),u===null||u.isEmpty()||r.add(u)}return t.getFactory().createGeometryCollection(ft.toGeometryArray(r))};var gh=Object.freeze({ConformingDelaunayTriangulationBuilder:Pr,DelaunayTriangulationBuilder:ne,VoronoiDiagramBuilder:Ci});a(ws.prototype,{interfaces_:function(){return[]},getClass:function(){return ws}}),ws.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return it.createEmptyResult(it.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Zt.overlayOp(t,e,it.UNION)},a(Z.prototype,{equalsTopo:function(t){return this.getEnvelopeInternal().equals(t.getEnvelopeInternal())?Et.relate(this,t).isEquals(this.getDimension(),t.getDimension()):!1},union:function(){if(arguments.length===0)return Gn.union(this);if(arguments.length===1){var t=arguments[0];return ws.union(this,t)}},isValid:function(){return _e.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return it.createEmptyResult(it.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return fr.map(this,{interfaces_:function(){return[MapOp]},map:function(n){return n.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Zt.overlayOp(this,t,it.INTERSECTION)},covers:function(t){return Et.covers(this,t)},coveredBy:function(t){return Et.coveredBy(this,t)},touches:function(t){return Et.touches(this,t)},intersects:function(t){return Et.intersects(this,t)},within:function(t){return Et.within(this,t)},overlaps:function(t){return Et.overlaps(this,t)},disjoint:function(t){return Et.disjoint(this,t)},crosses:function(t){return Et.crosses(this,t)},buffer:function(){if(arguments.length===1){var t=arguments[0];return Qt.bufferOp(this,t)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return Qt.bufferOp(this,e,n)}if(arguments.length===3){var r=arguments[0],s=arguments[1],o=arguments[2];return Qt.bufferOp(this,r,s,o)}},convexHull:function(){return new an(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return Et.relate.apply(Et,[this].concat(e))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var t=on.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();if(e===0){var n=new Ji(this);t=n.getInteriorPoint()}else if(e===1){var n=new Zi(this);t=n.getInteriorPoint()}else{var n=new Fe(this);t=n.getInteriorPoint()}return this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return it.createEmptyResult(it.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Zt.overlayOp(this,t,it.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){var t=new $t;return t.write(this)},toString:function(){this.toText()},contains:function(t){return Et.contains(this,t)},difference:function(t){return this.isEmpty()?it.createEmptyResult(it.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Zt.overlayOp(this,t,it.DIFFERENCE))},isSimple:function(){var t=new $r(this);return t.isSimple()},isWithinDistance:function(t,e){var n=this.getEnvelopeInternal().distance(t.getEnvelopeInternal());return n>e?!1:Ge.isWithinDistance(this,t,e)},distance:function(t){return Ge.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}});var fh="1.1.2 (248dab8)";p.version=fh,p.algorithm=Hl,p.densify=Wl,p.dissolve=Zl,p.geom=Yl,p.index=jl,p.io=$l,p.noding=th,p.operation=lh,p.precision=hh,p.simplify=ch,p.triangulate=gh})}(Ms,Ms.exports)),Ms.exports}var Qo,wu;function pl(){if(wu)return Qo;wu=1;var F=As();return Qo=function(M,p){var a=new F.io.GeoJSONReader,d=a.read(JSON.stringify(M.geometry)),h=a.read(JSON.stringify(p.geometry)),c=d.union(h),g=new F.io.GeoJSONWriter;return c=g.write(c),{type:"Feature",geometry:c,properties:M.properties}},Qo}var $o,Su;function Bh(){if(Su)return $o;Su=1;var F=Aa(),M=pl(),p=be();function a(h,c,g){if(typeof c!="number")throw new Error("maxEdge parameter is required");if(typeof g!="string")throw new Error("units parameter is required");var m=F(h),S=m.features.filter(y);m.features=S;function y(L){var C=L.geometry.coordinates[0][0],_=L.geometry.coordinates[0][1],T=L.geometry.coordinates[0][2],v=p(C,_,g),H=p(_,T,g),X=p(C,T,g);return v<=c&&H<=c&&X<=c}return d(m)}function d(h){for(var c=JSON.parse(JSON.stringify(h.features[0])),g=h.features,m=0,S=g.length;m<S;m++){var y=g[m];y.geometry&&(c=M(c,y))}return c}return $o=a,$o}var ta,Lu;function zh(){if(Lu)return ta;Lu=1;var F=As();return ta=function(M,p){var a=JSON.parse(JSON.stringify(M)),d=JSON.parse(JSON.stringify(p));a.type!=="Feature"&&(a={type:"Feature",properties:{},geometry:a}),d.type!=="Feature"&&(d={type:"Feature",properties:{},geometry:d});var h=new F.io.GeoJSONReader,c=h.read(JSON.stringify(a.geometry)),g=h.read(JSON.stringify(d.geometry)),m=c.difference(g);if(!m.isEmpty()){var S=new F.io.GeoJSONWriter,y=S.write(m);return a.geometry=m,{type:"Feature",properties:a.properties,geometry:y}}},ta}var ea,Ru;function Vh(){if(Ru)return ea;Ru=1;var F=br();return ea=function(p,a,d,h){return p.features.forEach(function(c){var g=a.features.filter(function(m){return F(m,c)}).map(function(m){return m.properties[d]});c.properties||(c.properties={}),c.properties[h]=g}),p},ea}var na,Tu;function kh(){if(Tu)return na;Tu=1;var F=Dr().coordEach;return na=function(p){return p=JSON.parse(JSON.stringify(p)),F(p,function(a){a.reverse()}),p},na}var ra={exports:{}},Pu;function Uh(){return Pu||(Pu=1,function(F){(function(){function M(g,m){var S=g.x-m.x,y=g.y-m.y;return S*S+y*y}function p(g,m,S){var y=m.x,L=m.y,C=S.x-y,_=S.y-L;if(C!==0||_!==0){var T=((g.x-y)*C+(g.y-L)*_)/(C*C+_*_);T>1?(y=S.x,L=S.y):T>0&&(y+=C*T,L+=_*T)}return C=g.x-y,_=g.y-L,C*C+_*_}function a(g,m){for(var S=g[0],y=[S],L,C=1,_=g.length;C<_;C++)L=g[C],M(L,S)>m&&(y.push(L),S=L);return S!==L&&y.push(L),y}function d(g,m,S,y,L){for(var C=y,_,T=m+1;T<S;T++){var v=p(g[T],g[m],g[S]);v>C&&(_=T,C=v)}C>y&&(_-m>1&&d(g,m,_,y,L),L.push(g[_]),S-_>1&&d(g,_,S,y,L))}function h(g,m){var S=g.length-1,y=[g[0]];return d(g,0,S,m,y),y.push(g[S]),y}function c(g,m,S){if(g.length<=2)return g;var y=m!==void 0?m*m:1;return g=S?g:a(g,y),g=h(g,y),g}F.exports=c,F.exports.default=c})()}(ra)),ra.exports}var ia,Ou;function Xh(){if(Ou)return ia;Ou=1;var F=Uh(),M=["LineString","MultiLineString","Polygon","MultiPolygon"];ia=function(g,m,S){return g.type==="Feature"?d(p(g,m,S),g.properties):g.type==="FeatureCollection"?{type:"FeatureCollection",features:g.features.map(function(y){var L=p(y,m,S);return M.indexOf(L.type)>-1?d(L,y.properties):L})}:g.type==="GeometryCollection"?{type:"GeometryCollection",geometries:g.geometries.map(function(y){return M.indexOf(y.type)>-1?p({type:"Feature",geometry:y},m,S):y})}:g};function p(g,m,S){return g.geometry.type==="LineString"?{type:"LineString",coordinates:h(g.geometry.coordinates,m,S)}:g.geometry.type==="MultiLineString"?{type:"MultiLineString",coordinates:g.geometry.coordinates.map(function(y){return h(y,m,S)})}:g.geometry.type==="Polygon"?{type:"Polygon",coordinates:c(g.geometry.coordinates,m,S)}:g.geometry.type==="MultiPolygon"?{type:"MultiPolygon",coordinates:g.geometry.coordinates.map(function(y){return c(y,m,S)})}:g}function a(g){return g.length<3?!1:!(g.length===3&&g[2][0]===g[0][0]&&g[2][1]===g[0][1])}function d(g,m){return{type:"Feature",geometry:g,properties:m}}function h(g,m,S){return F(g.map(function(y){return{x:y[0],y:y[1]}}),m,S).map(function(y){return[y.x,y.y]})}function c(g,m,S){return g.map(function(y){var L=y.map(function(_){return{x:_[0],y:_[1]}});if(L.length<4)throw new Error("Invalid polygon");for(var C=F(L,m,S).map(function(_){return[_.x,_.y]});!a(C);)m-=m*.01,C=F(L,m,S).map(function(_){return[_.x,_.y]});return(C[C.length-1][0]!==C[0][0]||C[C.length-1][1]!==C[0][1])&&C.push(C[0]),C})}return ia}var sa,Mu;function Yh(){if(Mu)return sa;Mu=1;var F=function(M){this.points=M.points||[],this.duration=M.duration||1e4,this.sharpness=M.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=M.stepLength||60,this.length=this.points.length,this.delay=0;for(var p=0;p<this.length;p++)this.points[p].z=this.points[p].z||0;for(var p=0;p<this.length-1;p++){var a=this.points[p],d=this.points[p+1];this.centers.push({x:(a.x+d.x)/2,y:(a.y+d.y)/2,z:(a.z+d.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var p=0;p<this.centers.length-1;p++){var a=this.centers[p],d=this.centers[p+1],h=this.points[p+1].x-(this.centers[p].x+this.centers[p+1].x)/2,c=this.points[p+1].y-(this.centers[p].y+this.centers[p+1].y)/2,g=this.points[p+1].z-(this.centers[p].y+this.centers[p+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[p+1].x+this.sharpness*(this.centers[p].x+h),y:(1-this.sharpness)*this.points[p+1].y+this.sharpness*(this.centers[p].y+c),z:(1-this.sharpness)*this.points[p+1].z+this.sharpness*(this.centers[p].z+g)},{x:(1-this.sharpness)*this.points[p+1].x+this.sharpness*(this.centers[p+1].x+h),y:(1-this.sharpness)*this.points[p+1].y+this.sharpness*(this.centers[p+1].y+c),z:(1-this.sharpness)*this.points[p+1].z+this.sharpness*(this.centers[p+1].z+g)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};return F.prototype.cacheSteps=function(M){var p=[],a=this.pos(0);p.push(0);for(var d=0;d<this.duration;d+=10){var h=this.pos(d),c=Math.sqrt((h.x-a.x)*(h.x-a.x)+(h.y-a.y)*(h.y-a.y)+(h.z-a.z)*(h.z-a.z));c>M&&(p.push(d),a=h)}return p},F.prototype.vector=function(M){var p=this.pos(M+10),a=this.pos(M-10);return{angle:180*Math.atan2(p.y-a.y,p.x-a.x)/3.14,speed:Math.sqrt((a.x-p.x)*(a.x-p.x)+(a.y-p.y)*(a.y-p.y)+(a.z-p.z)*(a.z-p.z))}},F.prototype.pos=function(M){function p(g,m,S,y,L){var C=function(v){var H=v*v,X=H*v;return[X,3*H*(1-v),3*v*(1-v)*(1-v),(1-v)*(1-v)*(1-v)]},_=C(g),T={x:L.x*_[0]+y.x*_[1]+S.x*_[2]+m.x*_[3],y:L.y*_[0]+y.y*_[1]+S.y*_[2]+m.y*_[3],z:L.z*_[0]+y.z*_[1]+S.z*_[2]+m.z*_[3]};return T}var a=M-this.delay;a<0&&(a=0),a>this.duration&&(a=this.duration-1);var d=a/this.duration;if(d>=1)return this.points[this.length-1];var h=Math.floor((this.points.length-1)*d),c=(this.length-1)*d-h;return p(c,this.points[h],this.controls[h][1],this.controls[h+1][0],this.points[h+1])},sa=F,sa}var oa,_u;function Hh(){if(_u)return oa;_u=1;var F=Lt().lineString,M=Yh();return oa=function(p,a,d){var h=F([]);h.properties=p.properties;for(var c=new M({points:p.geometry.coordinates.map(function(S){return{x:S[0],y:S[1]}}),duration:a,sharpness:d}),g=0;g<c.duration;g+=10){var m=c.pos(g);Math.floor(g/100)%2===0&&h.geometry.coordinates.push([m.x,m.y])}return h},oa}var aa,bu;function Wh(){if(bu)return aa;bu=1;var F=br();return aa=function(M,p,a,d){return M=JSON.parse(JSON.stringify(M)),p=JSON.parse(JSON.stringify(p)),M.features.forEach(function(h){h.properties||(h.properties={}),p.features.forEach(function(c){if(h.properties[d]===void 0){var g=F(h,c);g&&(h.properties[d]=c.properties[a])}})}),M},aa}var ua,Du;function Zh(){if(Du)return ua;Du=1;var F=Lt().featureCollection;ua=function(p,a){var d=F(M(p.features,a));return d};function M(p,a){for(var d=p.slice(0),h=p.length,c=h-a,g,m;h-- >c;)m=Math.floor((h+1)*Math.random()),g=d[m],d[m]=d[h],d[h]=g;return d.slice(c)}return ua}var la,Au;function ml(){if(Au)return la;Au=1;var F=Lt().polygon;return la=function(M){var p=[M[0],M[1]],a=[M[0],M[3]],d=[M[2],M[3]],h=[M[2],M[1]];return F([[p,h,d,a,p]])},la}var ha,Fu;function Jh(){if(Fu)return ha;Fu=1;var F=Ds(),M=ml();return ha=function(p){return M(F(p))},ha}var ca,Gu;function Fs(){if(Gu)return ca;Gu=1;var F=bs().getCoord;return ca=function(M,p){var a=Math.PI/180,d=180/Math.PI,h=F(M),c=F(p),g=a*h[0],m=a*c[0],S=a*h[1],y=a*c[1],L=Math.sin(m-g)*Math.cos(y),C=Math.cos(S)*Math.sin(y)-Math.sin(S)*Math.cos(y)*Math.cos(m-g),_=d*Math.atan2(L,C);return _},ca}var ga,qu;function Gs(){if(qu)return ga;qu=1;var F=bs().getCoord,M=Lt(),p=M.point,a=M.distanceToRadians;return ga=function(d,h,c,g){var m=Math.PI/180,S=180/Math.PI,y=F(d),L=m*y[0],C=m*y[1],_=m*c,T=a(h,g),v=Math.asin(Math.sin(C)*Math.cos(T)+Math.cos(C)*Math.sin(T)*Math.cos(_)),H=L+Math.atan2(Math.sin(_)*Math.sin(T)*Math.cos(C),Math.cos(T)-Math.sin(C)*Math.sin(v));return p([S*H,S*v])},ga}var fa,Bu;function Kh(){if(Bu)return fa;Bu=1;var F=Fs(),M=Gs(),p=be();return fa=function(a,d){var h=p(a,d,"miles"),c=F(a,d),g=M(a,h/2,c,"miles");return g},fa}var da,zu;function jh(){if(zu)return da;zu=1,da=M;var F={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function M(p){if(!p||!p.type)return null;var a=F[p.type];if(!a)return null;if(a==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:p}]};if(a==="feature")return{type:"FeatureCollection",features:[p]};if(a==="featurecollection")return p}return da}var pa,Vu;function Qh(){if(Vu)return pa;Vu=1;var F=Lt(),M=F.featureCollection,p=As(),a=jh();pa=function(h,c,g){var m=F.distanceToDegrees(c,g),S=a(h),y=a(M(S.features.map(function(L){return d(L,m)})));if(y.features.length>1)return y;if(y.features.length===1)return y.features[0]};function d(h,c){var g=new p.io.GeoJSONReader,m=g.read(h.geometry),S=m.buffer(c),y=new p.io.GeoJSONWriter;return S=y.write(S),{type:"Feature",geometry:S,properties:{}}}return pa}var ma,ku;function vl(){if(ku)return ma;ku=1;var F=Ds(),M=Lt().point;return ma=function(p){var a=F(p),d=(a[0]+a[2])/2,h=(a[1]+a[3])/2;return M([d,h])},ma}var va,Uu;function $h(){if(Uu)return va;Uu=1;var F=Dr().coordEach,M=Lt().point;return va=function(p){var a=0,d=0,h=0;return F(p,function(c){a+=c[0],d+=c[1],h++},!0),M([a/h,d/h])},va}var ya,Xu;function tc(){if(Xu)return ya;Xu=1;var F=Dr();return ya=function(M){var p={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},a=Object.keys(p).reduce(function(h,c){return h[c.replace("Multi","")]=c,h},{});function d(h,c,g){g?p[c].coordinates=p[c].coordinates.concat(h.geometry.coordinates):p[c].coordinates.push(h.geometry.coordinates),p[c].properties.push(h.properties)}return F.featureEach(M,function(h){!h.geometry||(p[h.geometry.type]?d(h,h.geometry.type,!0):a[h.geometry.type]&&d(h,a[h.geometry.type],!1))}),{type:"FeatureCollection",features:Object.keys(p).filter(function(h){return p[h].coordinates.length}).sort().map(function(h){return{type:"Feature",properties:{collectedProperties:p[h].properties},geometry:{type:h,coordinates:p[h].coordinates}}})}},ya}var xa,Yu;function yl(){if(Yu)return xa;Yu=1;var F=Lt().featureCollection,M=Dr().coordEach,p=Lt().point;return xa=function(a){var d=[];return M(a,function(h){d.push(p(h))}),F(d)},xa}var Ea,Hu;function ec(){if(Hu)return Ea;Hu=1;var F=Lt().polygon,M=yh();Ea=function(d){if(!d.geometry||d.geometry.type!=="Polygon"&&d.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var h={type:"FeatureCollection",features:[]};return d.geometry.type==="Polygon"?h.features=p(d.geometry.coordinates):d.geometry.coordinates.forEach(function(c){h.features=h.features.concat(p(c))}),h};function p(d){var h=a(d),c=2,g=M(h.vertices,h.holes,c),m=[],S=[];g.forEach(function(C,_){var T=g[_];S.push([h.vertices[T*c],h.vertices[T*c+1]])});for(var y=0;y<S.length;y+=3){var L=S.slice(y,y+3);L.push(S[y]),m.push(F([L]))}return m}function a(d){for(var h=d[0][0].length,c={vertices:[],holes:[],dimensions:h},g=0,m=0;m<d.length;m++){for(var S=0;S<d[m].length;S++)for(var y=0;y<h;y++)c.vertices.push(d[m][S][y]);m>0&&(g+=d[m-1].length,c.holes.push(g))}return c}return Ea}var Ia,Wu;function nc(){if(Wu)return Ia;Wu=1;var F=As();return Ia=function(p,a){var d,h;p.type==="Feature"?d=p.geometry:d=p,a.type==="Feature"?h=a.geometry:h=a;var c=new F.io.GeoJSONReader,g=c.read(JSON.stringify(d)),m=c.read(JSON.stringify(h)),S=g.intersection(m);if(!S.isEmpty()){var y=new F.io.GeoJSONWriter,L=y.write(S);return{type:"Feature",properties:{},geometry:L}}},Ia}var Na,Zu;function rc(){if(Zu)return Na;Zu=1;var F=be();return Na=function(M,p){for(var a,d=1/0,h=0;h<p.features.length;h++){var c=F(M,p.features[h],"miles");c<d&&(a=p.features[h],d=c)}return a},Na}var _r={exports:{}},Ju;function ic(){if(Ju)return _r.exports;Ju=1,_r.exports=function(){throw new Error("call .point() or .polygon() instead")};function F(y){return y?c(y):[a(),d()]}_r.exports.position=F,_r.exports.point=function(y,L){var C=[];for(i=0;i<y;i++)C.push(m(L?h(F(L)):h()));return S(C)},_r.exports.polygon=function(y,L,C,_){typeof L!="number"&&(L=10),typeof C!="number"&&(C=10);var T=[];for(i=0;i<y;i++){var v=[],H=Array.apply(null,new Array(L+1)).map(Math.random);H.forEach(X),H.forEach(b),v[v.length-1]=v[0],v=v.map(M(F(_))),T.push(m(g([v])))}function X(E,N,R){R[N]=N>0?E+R[N-1]:E}function b(E,N){E=E*2*Math.PI/H[H.length-1];var R=Math.random();v.push([R*C*Math.sin(E),R*C*Math.cos(E)])}return S(T)};function M(y){return function(L,C){return[L[0]+y[0],L[1]+y[1]]}}function p(){return Math.random()-.5}function a(){return p()*360}function d(){return p()*180}function h(y){return{type:"Point",coordinates:y||[a(),d()]}}function c(y){return[Math.random()*(y[2]-y[0])+y[0],Math.random()*(y[3]-y[1])+y[1]]}function g(y){return{type:"Polygon",coordinates:y}}function m(y){return{type:"Feature",geometry:y,properties:{}}}function S(y){return{type:"FeatureCollection",features:y}}return _r.exports}var Ca,Ku;function sc(){if(Ku)return Ca;Ku=1;var F=ic();return Ca=function(M,p,a){switch(a=a||{},p=p||1,M){case"point":case"points":case void 0:return F.point(p,a.bbox);case"polygon":case"polygons":return F.polygon(p,a.num_vertices,a.max_radial_length,a.bbox);default:throw new Error("Unknown type given: valid options are points and polygons")}},Ca}var wa,ju;function oc(){if(ju)return wa;ju=1;var F=Lt().point;wa=function(p){var a,d={type:"FeatureCollection",features:[]};return p.type==="Feature"?a=p.geometry:a=p,a.coordinates.forEach(function(h){a.coordinates.forEach(function(c){for(var g=0;g<h.length-1;g++)for(var m=0;m<c.length-1;m++)if(!(h===c&&(Math.abs(g-m)===1||Math.abs(g-m)===h.length-2))){var S=M(h[g][0],h[g][1],h[g+1][0],h[g+1][1],c[m][0],c[m][1],c[m+1][0],c[m+1][1]);S&&d.features.push(F([S[0],S[1]]))}})}),d};function M(p,a,d,h,c,g,m,S){var y,L,C,_,T,v={x:null,y:null,onLine1:!1,onLine2:!1};return y=(S-g)*(d-p)-(m-c)*(h-a),y===0?v.x!==null&&v.y!==null?v:!1:(L=a-g,C=p-c,_=(m-c)*L-(S-g)*C,T=(d-p)*L-(h-a)*C,L=_/y,C=T/y,v.x=p+L*(d-p),v.y=a+L*(h-a),L>=0&&L<=1&&(v.onLine1=!0),C>=0&&C<=1&&(v.onLine2=!0),v.onLine1&&v.onLine2?[v.x,v.y]:!1)}return wa}var Sa,Qu;function ac(){if(Qu)return Sa;Qu=1;var F=Lt().featureCollection,M=vl(),p=be(),a=br(),d=yl();function h(g){g.type!=="FeatureCollection"&&(g.type!=="Feature"&&(g={type:"Feature",geometry:g,properties:{}}),g=F([g]));for(var m=M(g),S=!1,y=0;!S&&y<g.features.length;){var L=g.features[y].geometry,C,_,T,v,H,X,b,E=!1;if(L.type==="Point")m.geometry.coordinates[0]===L.coordinates[0]&&m.geometry.coordinates[1]===L.coordinates[1]&&(S=!0);else if(L.type==="MultiPoint"){var N=!1;for(b=0;!N&&b<L.coordinates.length;)m.geometry.coordinates[0]===L.coordinates[b][0]&&m.geometry.coordinates[1]===L.coordinates[b][1]&&(S=!0,N=!0),b++}else if(L.type==="LineString")for(b=0;!E&&b<L.coordinates.length-1;)C=m.geometry.coordinates[0],_=m.geometry.coordinates[1],T=L.coordinates[b][0],v=L.coordinates[b][1],H=L.coordinates[b+1][0],X=L.coordinates[b+1][1],c(C,_,T,v,H,X)&&(E=!0,S=!0),b++;else if(L.type==="MultiLineString")for(var R=0;R<L.coordinates.length;){E=!1,b=0;for(var B=L.coordinates[R];!E&&b<B.length-1;)C=m.geometry.coordinates[0],_=m.geometry.coordinates[1],T=B[b][0],v=B[b][1],H=B[b+1][0],X=B[b+1][1],c(C,_,T,v,H,X)&&(E=!0,S=!0),b++;R++}else if(L.type==="Polygon"||L.type==="MultiPolygon"){var w={type:"Feature",geometry:L,properties:{}};a(m,w)&&(S=!0)}y++}if(S)return m;var A=F([]);for(y=0;y<g.features.length;y++)A.features=A.features.concat(d(g.features[y]).features);var D,V=1/0;for(y=0;y<A.features.length;y++){var G=p(m,A.features[y],"miles");G<V&&(V=G,D=A.features[y])}return D}function c(g,m,S,y,L,C){var _=Math.sqrt((L-S)*(L-S)+(C-y)*(C-y)),T=Math.sqrt((g-S)*(g-S)+(m-y)*(m-y)),v=Math.sqrt((L-g)*(L-g)+(C-m)*(C-m));if(_===T+v)return!0}return Sa=h,Sa}var _s={},Si={},$u;function uc(){return $u||($u=1,Si.RADIUS=6378137,Si.FLATTENING=1/298.257223563,Si.POLAR_RADIUS=63567523142e-4),Si}var tl;function lc(){if(tl)return _s;tl=1;var F=uc();_s.geometry=M,_s.ring=a;function M(h){var c=0,g;switch(h.type){case"Polygon":return p(h.coordinates);case"MultiPolygon":for(g=0;g<h.coordinates.length;g++)c+=p(h.coordinates[g]);return c;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(g=0;g<h.geometries.length;g++)c+=M(h.geometries[g]);return c}}function p(h){var c=0;if(h&&h.length>0){c+=Math.abs(a(h[0]));for(var g=1;g<h.length;g++)c-=Math.abs(a(h[g]))}return c}function a(h){var c,g,m,S,y,L,C=0,_=h.length;if(_>2){for(i=0;i<_;i++)i===_-2?(S=_-2,y=_-1,L=0):i===_-1?(S=_-1,y=0,L=1):(S=i,y=i+1,L=i+2),c=h[S],g=h[y],m=h[L],C+=(d(m[0])-d(c[0]))*Math.sin(d(g[1]));C=C*F.RADIUS*F.RADIUS/2}return C}function d(h){return h*Math.PI/180}return _s}var La,el;function hc(){if(el)return La;el=1;var F=lc().geometry;function M(p){if(p.type==="FeatureCollection"){for(var a=0,d=0;a<p.features.length;a++)p.features[a].geometry&&(d+=F(p.features[a].geometry));return d}else return p.type==="Feature"?F(p.geometry):F(p)}return La=M,La}var Ra,nl;function cc(){if(nl)return Ra;nl=1;var F=be(),M=Lt().point,p=Fs(),a=Gs();return Ra=function(d,h,c){var g;if(d.type==="Feature")g=d.geometry.coordinates;else if(d.type==="LineString")g=d.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var m=0,S=0;S<g.length&&!(h>=m&&S===g.length-1);S++)if(m>=h){var y=h-m;if(y){var L=p(g[S],g[S-1])-180,C=a(g[S],y,L,c);return C}else return M(g[S])}else m+=F(g[S],g[S+1],c);return M(g[g.length-1])},Ra}var Ta,rl;function gc(){if(rl)return Ta;rl=1;var F=be(),M=Lt().point;Ta=function a(d,h){if(d.type==="FeatureCollection")return d.features.reduce(function(y,L){return y+a(L,h)},0);var c=d.type==="Feature"?d.geometry:d,g,m;if(c.type==="LineString")return p(c.coordinates,h);if(c.type==="Polygon"||c.type==="MultiLineString"){for(g=0,m=0;m<c.coordinates.length;m++)g+=p(c.coordinates[m],h);return g}else if(d.type==="MultiPolygon"){for(g=0,m=0;m<c.coordinates.length;m++)for(var S=0;S<c.coordinates[m].length;S++)g+=p(c.coordinates[m][S],h);return g}else throw new Error("input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry (or a FeatureCollection containing only those types)")};function p(a,d){for(var h=0,c=M(a[0]),g=M(a[0]),m,S=1;S<a.length;S++)g.geometry.coordinates=a[S],h+=F(c,g,d),m=c,c=g,g=m;return h}return Ta}var Pa,il;function xl(){if(il)return Pa;il=1;var F=be(),M=Lt().point,p=Fs(),a=Gs();Pa=function(c,g){var m;if(c.type==="Feature")m=c.geometry.coordinates;else if(c.type==="LineString")m=c.coordinates;else throw new Error("input must be a LineString Feature or Geometry");return d(g,m)};function d(c,g){for(var m="miles",S=M([1/0,1/0],{dist:1/0}),y=0;y<g.length-1;y++){var L=M(g[y]),C=M(g[y+1]);L.properties.dist=F(c,L,m),C.properties.dist=F(c,C,m);var _=Math.max(L.properties.dist,C.properties.dist),T=p(L,C),v=a(c,_,T+90,m),H=a(c,_,T-90,m),X=h(v.geometry.coordinates[0],v.geometry.coordinates[1],H.geometry.coordinates[0],H.geometry.coordinates[1],L.geometry.coordinates[0],L.geometry.coordinates[1],C.geometry.coordinates[0],C.geometry.coordinates[1]),b;X&&(b=M(X),b.properties.dist=F(c,b,m)),L.properties.dist<S.properties.dist&&(S=L,S.properties.index=y),C.properties.dist<S.properties.dist&&(S=C,S.properties.index=y),b&&b.properties.dist<S.properties.dist&&(S=b,S.properties.index=y)}return S}function h(c,g,m,S,y,L,C,_){var T,v,H,X,b,E={x:null,y:null,onLine1:!1,onLine2:!1};return T=(_-L)*(m-c)-(C-y)*(S-g),T===0?E.x!==null&&E.y!==null?E:!1:(v=g-L,H=c-y,X=(C-y)*v-(_-L)*H,b=(m-c)*v-(S-g)*H,v=X/T,H=b/T,E.x=c+v*(m-c),E.y=g+v*(S-g),v>0&&v<1&&(E.onLine1=!0),H>0&&H<1&&(E.onLine2=!0),E.onLine1&&E.onLine2?[E.x,E.y]:!1)}return Pa}var Oa,sl;function fc(){if(sl)return Oa;sl=1;var F=Lt().lineString,M=xl();return Oa=function(a,d,h){var c;if(h.type==="Feature")c=h.geometry.coordinates;else if(h.type==="LineString")c=h.coordinates;else throw new Error("input must be a LineString Feature or Geometry");var g=M(h,a),m=M(h,d),S;g.properties.index<=m.properties.index?S=[g,m]:S=[m,g];for(var y=F([S[0].geometry.coordinates],{}),L=S[0].properties.index+1;L<S[1].properties.index+1;L++)y.geometry.coordinates.push(c[L]);return y.geometry.coordinates.push(S[1].geometry.coordinates),y},Oa}var Ma,al;function dc(){if(al)return Ma;al=1;var F=Lt().point,M=Lt().featureCollection,p=be();return Ma=function(d,h,c){for(var g=M([]),m=h/p(F([d[0],d[1]]),F([d[2],d[1]]),c),S=m*(d[2]-d[0]),y=h/p(F([d[0],d[1]]),F([d[0],d[3]]),c),L=y*(d[3]-d[1]),C=d[0];C<=d[2];){for(var _=d[1];_<=d[3];)g.features.push(F([C,_])),_+=L;C+=S}return g},Ma}var _a,ul;function pc(){if(ul)return _a;ul=1;var F=Lt().featureCollection,M=Lt().point,p=Lt().polygon,a=be();return _a=function(h,c,g){for(var m=F([]),S=c/a(M([h[0],h[1]]),M([h[2],h[1]]),g),y=S*(h[2]-h[0]),L=c/a(M([h[0],h[1]]),M([h[0],h[3]]),g),C=L*(h[3]-h[1]),_=h[0];_<=h[2];){for(var T=h[1];T<=h[3];){var v=p([[[_,T],[_,T+C],[_+y,T+C],[_+y,T],[_,T]]]);m.features.push(v),T+=C}_+=y}return m},_a}var ba,ll;function mc(){if(ll)return ba;ll=1;var F=Lt().featureCollection,M=Lt().polygon,p=be();return ba=function(a,d,h){for(var c=F([]),g=d/p([a[0],a[1]],[a[2],a[1]],h),m=g*(a[2]-a[0]),S=d/p([a[0],a[1]],[a[0],a[3]],h),y=S*(a[3]-a[1]),L=0,C=a[0];C<=a[2];){for(var _=0,T=a[1];T<=a[3];)L%2===0&&_%2===0?c.features.push(M([[[C,T],[C,T+y],[C+m,T],[C,T]]]),M([[[C,T+y],[C+m,T+y],[C+m,T],[C,T+y]]])):L%2===0&&_%2===1?c.features.push(M([[[C,T],[C+m,T+y],[C+m,T],[C,T]]]),M([[[C,T],[C,T+y],[C+m,T+y],[C,T]]])):_%2===0&&L%2===1?c.features.push(M([[[C,T],[C,T+y],[C+m,T+y],[C,T]]]),M([[[C,T],[C+m,T+y],[C+m,T],[C,T]]])):_%2===1&&L%2===1&&c.features.push(M([[[C,T],[C,T+y],[C+m,T],[C,T]]]),M([[[C,T+y],[C+m,T+y],[C+m,T],[C,T+y]]])),T+=y,_++;L++,C+=m}return c},ba}var Da,hl;function vc(){if(hl)return Da;hl=1;for(var F=Lt().point,M=Lt().polygon,p=be(),a=Lt().featureCollection,d=[],h=[],c=0;c<6;c++){var g=2*Math.PI/6*c;d.push(Math.cos(g)),h.push(Math.sin(g))}Da=function(L,C,_,T){var v=C/p(F([L[0],L[1]]),F([L[2],L[1]]),_),H=v*(L[2]-L[0]),X=C/p(F([L[0],L[1]]),F([L[0],L[3]]),_),b=X*(L[3]-L[1]),E=H/2,N=E*2,R=Math.sqrt(3)/2*b,B=L[2]-L[0],w=L[3]-L[1],A=3/4*N,D=R,V=B/(N-E/2),G=Math.ceil(V);Math.round(V)===G&&G++;var f=(G*A-E/2-B)/2-E/2,K=Math.ceil(w/R),st=(w-K*R)/2,dt=K*R-w>R/2;dt&&(st-=R/4);for(var O=a([]),q=0;q<G;q++)for(var I=0;I<=K;I++){var Y=q%2===1;if(!(I===0&&Y)&&!(I===0&&dt)){var U=q*A+L[0]-f,W=I*D+L[1]+st;Y&&(W-=R/2),T?O.features.push.apply(O.features,S([U,W],H/2,b/2)):O.features.push(m([U,W],H/2,b/2))}}return O};function m(y,L,C){for(var _=[],T=0;T<6;T++){var v=y[0]+L*d[T],H=y[1]+C*h[T];_.push([v,H])}return _.push(_[0]),M([_])}function S(y,L,C){for(var _=[],T=0;T<6;T++){var v=[];v.push(y),v.push([y[0]+L*d[T],y[1]+C*h[T]]),v.push([y[0]+L*d[(T+1)%6],y[1]+C*h[(T+1)%6]]),v.push(y),_.push(M([v]))}return _}return Da}var cl;function yc(){if(cl)return ke.exports;cl=1,ke.exports={isolines:Nh(),convex:Gh(),within:qh(),concave:Bh(),difference:zh(),collect:Vh(),flip:kh(),simplify:Xh(),bezier:Hh(),tag:Wh(),sample:Zh(),envelope:Jh(),square:fl(),midpoint:Kh(),buffer:Qh(),center:vl(),centroid:$h(),combine:tc(),distance:be(),explode:yl(),bbox:Ds(),tesselate:ec(),bboxPolygon:ml(),inside:br(),intersect:nc(),nearest:rc(),planepoint:gl(),random:sc(),tin:Aa(),union:pl(),bearing:Fs(),destination:Gs(),kinks:oc(),pointOnSurface:ac(),area:hc(),along:cc(),lineDistance:gc(),lineSlice:fc(),pointOnLine:xl(),pointGrid:dc(),squareGrid:pc(),triangleGrid:mc(),hexGrid:vc()};var F=Lt();return ke.exports.point=F.point,ke.exports.polygon=F.polygon,ke.exports.lineString=F.lineString,ke.exports.multiPoint=F.multiPoint,ke.exports.multiPolygon=F.multiPolygon,ke.exports.multiLineString=F.multiLineString,ke.exports.feature=F.feature,ke.exports.featureCollection=F.featureCollection,ke.exports.geometryCollection=F.geometryCollection,ke.exports}yc();const Ec={__name:"sea",async setup(F){let M,p;const{viewer:a}=window;return a.terrainProvider=([M,p]=ph(()=>Cesium.createWorldTerrainAsync({requestVertexNormals:!0,requestWaterMask:!0})),M=await M,p(),M),a.camera.flyTo({destination:Cesium.Cartesian3.fromDegrees(120.338235,35.350744,56283),orientation:{heading:.037605902323875284,pitch:-.6395756804359709,roll:6.283184759051674}}),(d,h)=>(mh(),vh("div"))}};export{Ec as default};
