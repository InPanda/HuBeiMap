import{_ as f}from"./OperateBox.26f1204c.js";import{E as g,o as v,c as k,w as c,d as m,e as C}from"./index.22fc6a4f.js";/* empty css                  */class y{constructor(t){this.viewer=t.viewer,this.id=t.id,this.shortwaveRange=t.shortwaveRange,this.longitude=t.position[0],this.latitude=t.position[1],this.position=Cesium.Cartesian3.fromDegrees(t.position[0],t.position[1]),this.heading=0,this.positionArr=this.calcPoints(t.position[0],t.position[1],t.shortwaveRange,0),this.addEntities()}addEntities(){this.viewer.entities.add({id:this.id,position:this.position,wall:{positions:new Cesium.CallbackProperty(()=>Cesium.Cartesian3.fromDegreesArrayHeights(this.positionArr),!1),material:new Cesium.Color.fromCssColorString("#00dcff82"),distanceDisplayCondition:new Cesium.DistanceDisplayCondition(0,105e5)},ellipsoid:{radii:new Cesium.Cartesian3(this.shortwaveRange,this.shortwaveRange,this.shortwaveRange),maximumCone:Cesium.Math.toRadians(90),material:new Cesium.Color.fromCssColorString("#00dcff82"),outline:!0,outlineColor:new Cesium.Color.fromCssColorString("#00dcff82"),outlineWidth:1,stackPartitions:40,slicePartitions:40,distanceDisplayCondition:new Cesium.DistanceDisplayCondition(0,105e5)}}),this.addPostRender()}addPostRender(){this.tickListener=this.viewer.clock.onTick.addEventListener(()=>{this.heading+=1,this.positionArr=this.calcPoints(this.longitude,this.latitude,this.shortwaveRange,this.heading)})}calcPoints(t,e,o,r){var a=Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Cartesian3.fromDegrees(t,e)),s=o*Math.cos(r*Math.PI/180),i=o*Math.sin(r*Math.PI/180),h=Cesium.Cartesian3.fromElements(s,i,0),n=Cesium.Matrix4.multiplyByPoint(a,h,new Cesium.Cartesian3),l=Cesium.Cartographic.fromCartesian(n),u=Cesium.Math.toDegrees(l.longitude),d=Cesium.Math.toDegrees(l.latitude);return this.computeCirclularFlight(t,e,u,d,0,90)}computeCirclularFlight(t,e,o,r,a,s){let i=[];i.push(t),i.push(e),i.push(0);var h=Cesium.Cartesian3.distance(Cesium.Cartesian3.fromDegrees(t,e),Cesium.Cartesian3.fromDegrees(o,r));for(let n=a;n<=a+s;n++){let l=h*Math.sin(n*Math.PI/180),u=Math.cos(n*Math.PI/180),d=(o-t)*u+t,w=(r-e)*u+e;i.push(d),i.push(w),i.push(l)}return i}clear(){if(this.tickListener&&(this.tickListener(),this.tickListener=null),this.viewer&&this.id){const t=this.viewer.entities.getById(this.id);t&&this.viewer.entities.remove(t)}this.positionArr=[],this.heading=0}destroy(){this.clear(),this.viewer=null,this.id=null,this.shortwaveRange=null,this.longitude=null,this.latitude=null,this.position=null,this.positionArr=null}stop(){this.tickListener&&(this.tickListener(),this.tickListener=null)}start(){this.tickListener||this.addPostRender()}hide(){const t=this.viewer.entities.getById(this.id);t&&(t.show=!1)}show(){const t=this.viewer.entities.getById(this.id);t&&(t.show=!0)}}const P={__name:"volumRadar",setup(p){const{viewer:t}=window;let e;const o=()=>{e=new y({viewer:t,id:1,shortwaveRange:1e3,position:[-80,35]}),setTimeout(()=>{t.camera.flyTo({destination:new Cesium.Cartesian3.fromDegrees(-80,35,1e4)})},1e3)},r=()=>{e.clear()};return(a,s)=>{const i=g,h=f;return v(),k(h,null,{default:c(()=>[m(i,{type:"primary",onClick:o},{default:c(()=>s[0]||(s[0]=[C("\u6E32\u67D3")])),_:1}),m(i,{type:"primary",onClick:r},{default:c(()=>s[1]||(s[1]=[C("\u6E05\u9664")])),_:1})]),_:1})}}};export{P as default};
